{
  "generatedAt": "2026-02-24T19:39:39.386Z",
  "pages": {
    "quickstart/index": {
      "category": "quickstart",
      "slug": "index",
      "title": "Quickstart",
      "summary": "Command-line interface for installing and managing the OpenDevBrowser plugin, plus automation commands for agents.",
      "sourcePath": "docs/CLI.md",
      "editUrl": "https://github.com/freshtechbro/opendevbrowser/edit/main/docs/CLI.md",
      "contentHtml": "<p>Requires Node.js <code>&gt;=18</code>.</p>\n<pre><code>\n# Interactive installation (prompts for location)\n\nnpx opendevbrowser\n\n\n\n# Non-interactive with flags\n\nnpx opendevbrowser --global   # Install to ~/.config/opencode/opencode.json\n\nnpx opendevbrowser --local    # Install to ./opencode.json\n\n\n\n# Optional: persistent global CLI\n\nnpm install -g opendevbrowser\n\nopendevbrowser --version\n\n</code></pre>\n<h3>Pre-release local package onboarding (no npm publish)</h3>\n<pre><code>\ncd /Users/bishopdotun/Documents/DevProjects/opendevbrowser\n\nnpm pack\n\n\n\nWORKDIR=$(mktemp -d /tmp/opendevbrowser-first-run-XXXXXX)\n\ncd &quot;$WORKDIR&quot;\n\nnpm init -y\n\nnpm install /Users/bishopdotun/Documents/DevProjects/opendevbrowser/opendevbrowser-0.0.15.tgz\n\nnpx --no-install opendevbrowser --help\n\n</code></pre>\n<p>Load extension unpacked from:</p>\n<ul>\n<li><code>$WORKDIR/node_modules/opendevbrowser/extension</code></li>\n</ul>\n<p>For isolated daemon tests on machines that already run OpenDevBrowser, set:</p>\n<pre><code>\nexport OPENCODE_CONFIG_DIR=/tmp/opendevbrowser-first-run-isolated/config\n\nexport OPENCODE_CACHE_DIR=/tmp/opendevbrowser-first-run-isolated/cache\n\n</code></pre>\n<p>By default (<code>--skills-global</code>), the CLI installs bundled skills to global OpenCode/Codex/ClaudeCode/AmpCLI locations (legacy <code>claude</code>/<code>amp</code> labels are still synchronized for compatibility). Use <code>--skills-local</code> for project-local locations or <code>--no-skills</code> to skip skill installation. Use <code>--full</code> to always create <code>opendevbrowser.jsonc</code> and pre-extract extension assets.</p>\n<h3>Skill discovery order</h3>\n<p>The skill loader discovers skills in this order (first match wins):</p>\n<ol>\n<li>Project-local: <code>./.opencode/skill</code></li>\n<li>Global: <code>~/.config/opencode/skill</code> (or <code>$OPENCODE_CONFIG_DIR/skill</code>)</li>\n<li>Compatibility (project): <code>./.codex/skills</code></li>\n<li>Compatibility (global): <code>$CODEX_HOME/skills</code> (fallback <code>~/.codex/skills</code>)</li>\n<li>Compatibility (project): <code>./.claude/skills</code></li>\n<li>Compatibility (global): <code>$CLAUDECODE_HOME/skills</code> or <code>$CLAUDE_HOME/skills</code> (fallback <code>~/.claude/skills</code>)</li>\n<li>Compatibility (project): <code>./.amp/skills</code></li>\n<li>Compatibility (global): <code>$AMPCLI_HOME/skills</code> or <code>$AMP_CLI_HOME/skills</code> or <code>$AMP_HOME/skills</code> (fallback <code>~/.amp/skills</code>)</li>\n<li>Extra paths from <code>skillPaths</code> (advanced)</li>\n</ol>",
      "codeSample": "npx opendevbrowser"
    },
    "installation/index": {
      "category": "installation",
      "slug": "index",
      "title": "Installation",
      "summary": "Requires Node.js >=18.",
      "sourcePath": "docs/CLI.md",
      "editUrl": "https://github.com/freshtechbro/opendevbrowser/edit/main/docs/CLI.md",
      "contentHtml": "<p>Requires Node.js <code>&gt;=18</code>.</p>\n<pre><code>\n# Interactive installation (prompts for location)\n\nnpx opendevbrowser\n\n\n\n# Non-interactive with flags\n\nnpx opendevbrowser --global   # Install to ~/.config/opencode/opencode.json\n\nnpx opendevbrowser --local    # Install to ./opencode.json\n\n\n\n# Optional: persistent global CLI\n\nnpm install -g opendevbrowser\n\nopendevbrowser --version\n\n</code></pre>\n<h3>Pre-release local package onboarding (no npm publish)</h3>\n<pre><code>\ncd /Users/bishopdotun/Documents/DevProjects/opendevbrowser\n\nnpm pack\n\n\n\nWORKDIR=$(mktemp -d /tmp/opendevbrowser-first-run-XXXXXX)\n\ncd &quot;$WORKDIR&quot;\n\nnpm init -y\n\nnpm install /Users/bishopdotun/Documents/DevProjects/opendevbrowser/opendevbrowser-0.0.15.tgz\n\nnpx --no-install opendevbrowser --help\n\n</code></pre>\n<p>Load extension unpacked from:</p>\n<ul>\n<li><code>$WORKDIR/node_modules/opendevbrowser/extension</code></li>\n</ul>\n<p>For isolated daemon tests on machines that already run OpenDevBrowser, set:</p>\n<pre><code>\nexport OPENCODE_CONFIG_DIR=/tmp/opendevbrowser-first-run-isolated/config\n\nexport OPENCODE_CACHE_DIR=/tmp/opendevbrowser-first-run-isolated/cache\n\n</code></pre>\n<p>By default (<code>--skills-global</code>), the CLI installs bundled skills to global OpenCode/Codex/ClaudeCode/AmpCLI locations (legacy <code>claude</code>/<code>amp</code> labels are still synchronized for compatibility). Use <code>--skills-local</code> for project-local locations or <code>--no-skills</code> to skip skill installation. Use <code>--full</code> to always create <code>opendevbrowser.jsonc</code> and pre-extract extension assets.</p>\n<h3>Skill discovery order</h3>\n<p>The skill loader discovers skills in this order (first match wins):</p>\n<ol>\n<li>Project-local: <code>./.opencode/skill</code></li>\n<li>Global: <code>~/.config/opencode/skill</code> (or <code>$OPENCODE_CONFIG_DIR/skill</code>)</li>\n<li>Compatibility (project): <code>./.codex/skills</code></li>\n<li>Compatibility (global): <code>$CODEX_HOME/skills</code> (fallback <code>~/.codex/skills</code>)</li>\n<li>Compatibility (project): <code>./.claude/skills</code></li>\n<li>Compatibility (global): <code>$CLAUDECODE_HOME/skills</code> or <code>$CLAUDE_HOME/skills</code> (fallback <code>~/.claude/skills</code>)</li>\n<li>Compatibility (project): <code>./.amp/skills</code></li>\n<li>Compatibility (global): <code>$AMPCLI_HOME/skills</code> or <code>$AMP_CLI_HOME/skills</code> or <code>$AMP_HOME/skills</code> (fallback <code>~/.amp/skills</code>)</li>\n<li>Extra paths from <code>skillPaths</code> (advanced)</li>\n</ol>",
      "codeSample": "npm install -g opendevbrowser"
    },
    "changelog/index": {
      "category": "changelog",
      "slug": "index",
      "title": "Changelog",
      "summary": "All notable changes to this project will be documented in this file.",
      "sourcePath": "CHANGELOG.md",
      "editUrl": "https://github.com/freshtechbro/opendevbrowser/edit/main/CHANGELOG.md",
      "contentHtml": "<h1>Changelog</h1>\n<p>All notable changes to this project will be documented in this file.</p>\n<p>The format is based on <a href=\"https://keepachangelog.com/en/1.0.0/\" target=\"_blank\" rel=\"noreferrer\">Keep a Changelog</a>,</p>\n<p>and this project adheres to <a href=\"https://semver.org/spec/v2.0.0.html\" target=\"_blank\" rel=\"noreferrer\">Semantic Versioning</a>.</p>\n<h2>[Unreleased]</h2>\n<h2>[0.0.15] - 2026-02-08</h2>\n<h3>Added</h3>\n<ul>\n<li>Release distribution plan for npm, GitHub branch/PR flow, and GitHub Releases (<code>docs/DISTRIBUTION_PLAN.md</code>).</li>\n</ul>\n<h3>Changed</h3>\n<ul>\n<li>Updated README/CLI/extension guidance and project metadata.</li>\n<li>Bumped package and extension versions to <code>0.0.15</code>.</li>\n</ul>\n<h3>Fixed</h3>\n<ul>\n<li>Completed extension-mode remediation and native host automation flow.</li>\n<li>Hardened extension Ops/CDP handling and cleaned up Ops sessions on disconnect.</li>\n<li>Resolved typecheck/lint edge cases in Ops-related paths.</li>\n</ul>\n<h3>Tests</h3>\n<ul>\n<li>Expanded browser and target coverage.</li>\n<li>Stabilized CLI native status assertions.</li>\n</ul>\n<h2>[0.0.14] - 2026-02-02</h2>\n<h3>Added</h3>\n<ul>\n<li>Ops parity and end-to-end coverage across daemon and relay.</li>\n<li>Multi-client session tracking in core runtime.</li>\n<li>Expanded DOM query and interaction tools/CLI commands.</li>\n<li>Multi-client extension CDP router improvements.</li>\n</ul>\n<h3>Changed</h3>\n<ul>\n<li>Strengthened relay, extension, and daemon reliability paths.</li>\n<li>Refreshed CLI/extension/docs guidance for new workflows.</li>\n<li>Updated extension assets packaging flow during <code>extension:build</code>.</li>\n</ul>\n<h3>Fixed</h3>\n<ul>\n<li>Relay binding contention and extension instance mismatch cases.</li>\n<li>Native host and extension-mode workflow edge cases.</li>\n</ul>\n<h3>Security</h3>\n<ul>\n<li>Hardened relay authentication, token handling, and connection checks.</li>\n</ul>\n<h2>[0.0.13] - 2026-01-19</h2>\n<h3>Added</h3>\n<ul>\n<li>Hub daemon mode for centralized browser management</li>\n<li>Remote relay support for distributed setups</li>\n<li>Extension relay with flat session support (Chrome 125+)</li>\n<li>Multi-client CDP broker capability</li>\n<li>FIFO lease management for shared resources</li>\n<li>Annotation system for visual debugging</li>\n<li>Skill pack discovery and loading system</li>\n</ul>\n<h3>Changed</h3>\n<ul>\n<li>Refactored browser manager for hub compatibility</li>\n<li>Improved session lifecycle management</li>\n<li>Enhanced CDP connection handling</li>\n</ul>\n<h3>Fixed</h3>\n<ul>\n<li>Session cleanup on abrupt disconnections</li>\n<li>Target manager race conditions</li>\n<li>Snapshot pipeline edge cases</li>\n</ul>\n<h2>[0.0.12] - 2026-01-11</h2>\n<h3>Added</h3>\n<ul>\n<li>41 browser automation tools</li>\n<li>Chrome extension for relay mode</li>\n<li>Snapshot-based interaction system</li>\n<li>DevTools integration (console, network, performance)</li>\n<li>Page export capabilities (React component cloning)</li>\n<li>Script runner for custom automation</li>\n<li>Configuration system with JSONC support</li>\n</ul>\n<h3>Changed</h3>\n<ul>\n<li>Migrated to Playwright for browser control</li>\n<li>Improved AX-tree snapshot accuracy</li>\n<li>Enhanced ref management system</li>\n</ul>\n<h2>[0.0.11] - 2026-01-02</h2>\n<h3>Added</h3>\n<ul>\n<li>Initial OpenCode plugin implementation</li>\n<li>CDP-based browser automation</li>\n<li>Basic tool set (launch, snapshot, click, type)</li>\n<li>CLI interface for automation scripts</li>\n<li>TypeScript support with strict mode</li>\n</ul>\n<h2>[0.0.10] - 2026-01-02</h2>\n<h3>Added</h3>\n<ul>\n<li>Project bootstrap</li>\n<li>Initial architecture design</li>\n<li>Core browser management</li>\n<li>Basic snapshot pipeline</li>\n</ul>\n<p>[Unreleased]: https://github.com/freshtechbro/opendevbrowser/compare/eaced1e...HEAD</p>\n<p>[0.0.15]: https://github.com/freshtechbro/opendevbrowser/compare/ebb109e...eaced1e</p>\n<p>[0.0.14]: https://github.com/freshtechbro/opendevbrowser/compare/v0.0.13...ebb109e</p>\n<p>[0.0.13]: https://github.com/freshtechbro/opendevbrowser/compare/v0.0.12...v0.0.13</p>\n<p>[0.0.12]: https://github.com/freshtechbro/opendevbrowser/compare/v0.0.11...v0.0.12</p>\n<p>[0.0.11]: https://github.com/freshtechbro/opendevbrowser/compare/v0.0.10...v0.0.11</p>\n<p>[0.0.10]: https://github.com/freshtechbro/opendevbrowser/releases/tag/v0.0.10</p>",
      "codeSample": "npx opendevbrowser version"
    },
    "tools/index": {
      "category": "tools",
      "slug": "index",
      "title": "Tool Surface Overview",
      "summary": "Grouped view of tool surfaces, organized by session, navigation, inspection, diagnostics, and workflow layers.",
      "sourcePath": "docs/SURFACE_REFERENCE.md",
      "editUrl": "https://github.com/freshtechbro/opendevbrowser/edit/main/docs/SURFACE_REFERENCE.md",
      "contentHtml": "<h3>Session and cookies (6)</h3>\n<ul>\n<li><code>opendevbrowser_launch</code></li>\n<li><code>opendevbrowser_connect</code></li>\n<li><code>opendevbrowser_disconnect</code></li>\n<li><code>opendevbrowser_status</code></li>\n<li><code>opendevbrowser_cookie_import</code></li>\n<li><code>opendevbrowser_cookie_list</code></li>\n</ul>\n<h3>Targets and pages (7)</h3>\n<ul>\n<li><code>opendevbrowser_targets_list</code></li>\n<li><code>opendevbrowser_target_use</code></li>\n<li><code>opendevbrowser_target_new</code></li>\n<li><code>opendevbrowser_target_close</code></li>\n<li><code>opendevbrowser_page</code></li>\n<li><code>opendevbrowser_list</code></li>\n<li><code>opendevbrowser_close</code></li>\n</ul>\n<h3>Navigation and interaction (13)</h3>\n<ul>\n<li><code>opendevbrowser_goto</code></li>\n<li><code>opendevbrowser_wait</code></li>\n<li><code>opendevbrowser_snapshot</code></li>\n<li><code>opendevbrowser_click</code></li>\n<li><code>opendevbrowser_hover</code></li>\n<li><code>opendevbrowser_press</code></li>\n<li><code>opendevbrowser_check</code></li>\n<li><code>opendevbrowser_uncheck</code></li>\n<li><code>opendevbrowser_type</code></li>\n<li><code>opendevbrowser_select</code></li>\n<li><code>opendevbrowser_scroll</code></li>\n<li><code>opendevbrowser_scroll_into_view</code></li>\n<li><code>opendevbrowser_run</code></li>\n</ul>\n<h3>DOM inspection (7)</h3>\n<ul>\n<li><code>opendevbrowser_dom_get_html</code></li>\n<li><code>opendevbrowser_dom_get_text</code></li>\n<li><code>opendevbrowser_get_attr</code></li>\n<li><code>opendevbrowser_get_value</code></li>\n<li><code>opendevbrowser_is_visible</code></li>\n<li><code>opendevbrowser_is_enabled</code></li>\n<li><code>opendevbrowser_is_checked</code></li>\n</ul>\n<h3>Diagnostics and export (8)</h3>\n<ul>\n<li><code>opendevbrowser_console_poll</code></li>\n<li><code>opendevbrowser_network_poll</code></li>\n<li><code>opendevbrowser_debug_trace_snapshot</code></li>\n<li><code>opendevbrowser_perf</code></li>\n<li><code>opendevbrowser_screenshot</code></li>\n<li><code>opendevbrowser_clone_page</code></li>\n<li><code>opendevbrowser_clone_component</code></li>\n<li><code>opendevbrowser_annotate</code></li>\n</ul>\n<h3>Macro, workflow, and skill surfaces (7)</h3>\n<ul>\n<li><code>opendevbrowser_macro_resolve</code></li>\n<li><code>opendevbrowser_research_run</code></li>\n<li><code>opendevbrowser_shopping_run</code></li>\n<li><code>opendevbrowser_product_video_run</code></li>\n<li><code>opendevbrowser_prompting_guide</code> (tool-only)</li>\n<li><code>opendevbrowser_skill_list</code> (tool-only)</li>\n<li><code>opendevbrowser_skill_load</code> (tool-only)</li>\n</ul>",
      "codeSample": "npx opendevbrowser run --help"
    },
    "cli/index": {
      "category": "cli",
      "slug": "index",
      "title": "CLI Surface Overview",
      "summary": "Grouped view of command families across installation, session control, navigation, diagnostics, and workflow wrappers.",
      "sourcePath": "docs/SURFACE_REFERENCE.md",
      "editUrl": "https://github.com/freshtechbro/opendevbrowser/edit/main/docs/SURFACE_REFERENCE.md",
      "contentHtml": "<h3>Install and runtime management (10)</h3>\n<ul>\n<li><code>install</code></li>\n<li><code>update</code></li>\n<li><code>uninstall</code></li>\n<li><code>help</code></li>\n<li><code>version</code></li>\n<li><code>serve</code></li>\n<li><code>daemon</code></li>\n<li><code>native</code></li>\n<li><code>run</code></li>\n<li><code>artifacts</code></li>\n</ul>\n<h3>Session, connection, and workflow wrappers (9)</h3>\n<ul>\n<li><code>launch</code></li>\n<li><code>connect</code></li>\n<li><code>disconnect</code></li>\n<li><code>status</code></li>\n<li><code>cookie-import</code></li>\n<li><code>cookie-list</code></li>\n<li><code>research</code></li>\n<li><code>shopping</code></li>\n<li><code>product-video</code></li>\n</ul>\n<h3>Navigation (3)</h3>\n<ul>\n<li><code>goto</code></li>\n<li><code>wait</code></li>\n<li><code>snapshot</code></li>\n</ul>\n<h3>Interaction (9)</h3>\n<ul>\n<li><code>click</code></li>\n<li><code>hover</code></li>\n<li><code>press</code></li>\n<li><code>check</code></li>\n<li><code>uncheck</code></li>\n<li><code>type</code></li>\n<li><code>select</code></li>\n<li><code>scroll</code></li>\n<li><code>scroll-into-view</code></li>\n</ul>\n<h3>Targets and pages (7)</h3>\n<ul>\n<li><code>targets-list</code></li>\n<li><code>target-use</code></li>\n<li><code>target-new</code></li>\n<li><code>target-close</code></li>\n<li><code>page</code></li>\n<li><code>pages</code></li>\n<li><code>page-close</code></li>\n</ul>\n<h3>DOM inspection (7)</h3>\n<ul>\n<li><code>dom-html</code></li>\n<li><code>dom-text</code></li>\n<li><code>dom-attr</code></li>\n<li><code>dom-value</code></li>\n<li><code>dom-visible</code></li>\n<li><code>dom-enabled</code></li>\n<li><code>dom-checked</code></li>\n</ul>\n<h3>Export, diagnostics, macro, annotation, power (10)</h3>\n<ul>\n<li><code>clone-page</code></li>\n<li><code>clone-component</code></li>\n<li><code>perf</code></li>\n<li><code>screenshot</code></li>\n<li><code>console-poll</code></li>\n<li><code>network-poll</code></li>\n<li><code>debug-trace-snapshot</code></li>\n<li><code>macro-resolve</code></li>\n<li><code>annotate</code></li>\n<li><code>rpc</code> (CLI-only, internal power surface)</li>\n</ul>",
      "codeSample": "npx opendevbrowser help"
    },
    "skills/overview": {
      "category": "skills",
      "slug": "overview",
      "title": "Skill Packs Overview",
      "summary": "How skill packs are structured, validated, and applied to repeatable OpenDevBrowser workflows.",
      "sourcePath": "docs/ARCHITECTURE.md",
      "editUrl": "https://github.com/freshtechbro/opendevbrowser/edit/main/docs/ARCHITECTURE.md",
      "contentHtml": "<h2>Skill packs in practice</h2>\n<p>OpenDevBrowser ships with curated skill packs for repeatable, high-frequency automation workflows.</p>\n<h2>How to evaluate a pack</h2>\n<ul>\n<li>Validate pack assets and helper scripts before use.</li>\n<li>Confirm command examples map to current CLI/tool surfaces.</li>\n<li>Keep pack outputs tied to reproducible artifact paths.</li>\n</ul>\n<h2>Source of truth</h2>\n<ul>\n<li>skills/*/SKILL.md</li>\n<li>docs/ARCHITECTURE.md</li>\n<li>docs/CLI.md</li>\n</ul>",
      "codeSample": "./skills/opendevbrowser-best-practices/scripts/validate-skill-assets.sh"
    },
    "concepts/session-modes": {
      "category": "concepts",
      "slug": "session-modes",
      "title": "Session Modes",
      "summary": "OpenDevBrowser Architecture This document describes the architecture of OpenDevBrowser across plugin, CLI, and extension distributions, with a security-first focus. Status: active Last updated: 2026-02-24 System overview",
      "sourcePath": "docs/ARCHITECTURE.md",
      "editUrl": "https://github.com/freshtechbro/opendevbrowser/edit/main/docs/ARCHITECTURE.md",
      "contentHtml": "<h1>OpenDevBrowser Architecture</h1>\n<p>This document describes the architecture of OpenDevBrowser across plugin, CLI, and extension distributions, with a security-first focus.</p>\n<p>Status: active</p>\n<p>Last updated: 2026-02-24</p>\n<h2>System overview</h2>\n<p>OpenDevBrowser provides four primary entry points:</p>\n<ul>\n<li><strong>Plugin</strong>: OpenCode runtime entry that exposes <code>opendevbrowser_*</code> tools.</li>\n<li><strong>CLI</strong>: Installer + automation commands (daemon or single-shot <code>run</code>), plus guarded internal <code>rpc</code> passthrough for power users (unsafe, use with caution).</li>\n<li><strong>Extension</strong>: Relay mode for attaching to existing logged-in tabs.</li>\n<li><strong>Frontend</strong>: Next.js website and generated docs viewer (<code>frontend/</code>).</li>\n<li><strong>Hub daemon</strong>: <code>opendevbrowser serve</code> process that owns the relay and enforces FIFO leases when hub mode is enabled.</li>\n<li><strong>Automation platform layer</strong>: provider runtime, macro resolver, tiered fingerprint controls, and combined debug trace workflows shared across tool/CLI/daemon surfaces.</li>\n</ul>\n<p>Current automation surface sizes:</p>\n<ul>\n<li>CLI commands: <code>55</code></li>\n<li>Plugin tools: <code>48</code></li>\n<li><code>/ops</code> command names: <code>38</code></li>\n</ul>\n<p>The shared runtime core is in <code>src/core/</code> and wires <code>BrowserManager</code>, <code>AnnotationManager</code>, <code>ScriptRunner</code>, <code>SkillLoader</code>, and <code>RelayServer</code>.</p>\n<p>Canonical inventory and channel contracts: <code>docs/SURFACE_REFERENCE.md</code>.</p>\n<p>Frontend architecture and generation flow are documented in <code>docs/FRONTEND.md</code>.</p>\n<p>The CLI installer attempts to set up daemon auto-start on first successful install</p>\n<p>(macOS LaunchAgent, Windows Task Scheduler). Unsupported platforms are skipped and continue without auto-start.</p>\n<h2>Component map</h2>\n<h3>Canonical ASCII map</h3>\n<pre><code>\n┌─────────────────────────────────────────────────────────────────┐\n\n│                      Distribution Layer                         │\n\n├──────────────────┬──────────────────┬──────────────────┬──────────────────────────┤\n\n│  OpenCode Plugin │       CLI        │    Hub Daemon    │    Chrome Extension       │\n\n│  (src/index.ts)  │ (src/cli/index)  │ (opendevbrowser  │   (extension/src/)        │\n\n│                  │                  │      serve)     │                           │\n\n└────────┬─────────┴────────┬─────────┴─────────┬────────┴──────────────┬────────────┘\n\n         │                  │                  │                       │\n\n         ▼                  ▼                  ▼                       ▼\n\n┌─────────────────────────────────────────────────────────────────┐\n\n│                    Core Runtime (src/core/)                    │\n\n│  bootstrap.ts → wires managers, injects ToolDeps              │\n\n└────────┬────────────────────────────────────────────────────────┘\n\n         │\n\n    ┌────┴────┬─────────────┬──────────────┬──────────────┬──────────────┐\n\n    ▼         ▼             ▼              ▼              ▼              ▼\n\n┌────────┐ ┌────────┐ ┌──────────┐ ┌────────────┐ ┌────────────┐ ┌────────────┐\n\n│Browser │ │Script  │ │Snapshot  │ │ Annotation │ │  Relay     │ │  Skills    │\n\n│Manager │ │Runner  │ │Pipeline  │ │  Manager   │ │  Server    │ │  Loader    │\n\n└───┬────┘ └────────┘ └──────────┘ └────────────┘ └─────┬──────┘ └────────────┘\n\n    │                                                  │\n\n    ▼                                                  ▼\n\n┌────────┐                                        ┌────────────┐\n\n│Target  │                                        │ Extension  │\n\n│Manager │                                        │ (WS relay) │\n\n└────────┘                                        └────────────┘\n\n</code></pre>\n<h3>Data flow</h3>\n<pre><code>\nTool Call → Zod Validation → Manager/Runner → CDP/Playwright → Response\n\n                                   ↓\n\n                            Snapshot (AX-tree → refs)\n\n                                   ↓\n\n                            Action (ref → backendNodeId → DOM)\n\n</code></pre>\n<h3>Detailed dependency map (Mermaid)</h3>\n<pre><code>\nflowchart LR\n\n  subgraph Distribution\n\n    Plugin[OpenCode Plugin]\n\n    CLI[CLI]\n\n    Hub[Hub Daemon]\n\n    Extension[Chrome Extension]\n\n    Frontend[Next.js Frontend]\n\n  end\n\n\n\n  subgraph Core\n\n    CoreBootstrap[Core Bootstrap]\n\n    BrowserManager[BrowserManager]\n\n    TargetManager[TargetManager]\n\n    ProviderRuntime[Provider Runtime]\n\n    MacroRegistry[Macro Registry]\n\n    Fingerprint[Fingerprint Tiers]\n\n    AnnotationManager[AnnotationManager]\n\n    ScriptRunner[ScriptRunner]\n\n    Snapshotter[Snapshot Pipeline]\n\n    Devtools[DevTools Trackers]\n\n    Exporter[Export Pipeline]\n\n    Relay[RelayServer]\n\n  end\n\n\n\n  Plugin --&gt; CoreBootstrap\n\n  CLI --&gt; CoreBootstrap\n\n  Hub --&gt; CoreBootstrap\n\n  Extension --&gt; Relay\n\n  Frontend --&gt; CLI\n\n  Frontend --&gt; Docs[docs/* + CHANGELOG + skills/*/SKILL.md]\n\n\n\n  CoreBootstrap --&gt; BrowserManager\n\n  BrowserManager --&gt; TargetManager\n\n  CoreBootstrap --&gt; ProviderRuntime\n\n  CoreBootstrap --&gt; MacroRegistry\n\n  BrowserManager --&gt; Fingerprint\n\n  CoreBootstrap --&gt; AnnotationManager\n\n  AnnotationManager --&gt; BrowserManager\n\n  AnnotationManager --&gt; Relay\n\n  CoreBootstrap --&gt; ScriptRunner\n\n  CoreBootstrap --&gt; Snapshotter\n\n  CoreBootstrap --&gt; Devtools\n\n  CoreBootstrap --&gt; Exporter\n\n  CoreBootstrap --&gt; Relay\n\n</code></pre>\n<h2>Runtime flows</h2>\n<h3>1) Plugin tool invocation</h3>\n<ol>\n<li>OpenCode calls a tool like <code>opendevbrowser_launch</code>.</li>\n<li>Tool validates inputs with Zod and delegates to <code>BrowserManager</code>.</li>\n<li><code>BrowserManager</code> launches or connects to a Chrome instance.</li>\n<li>Optional automation flows route through provider runtime (<code>search</code>/<code>fetch</code>/<code>crawl</code>/<code>post</code>) and macro resolution.</li>\n<li>Tool returns structured response with session id, trace-aware diagnostics, and warnings.</li>\n</ol>\n<h3>2) CLI automation (daemon mode)</h3>\n<pre><code>\nsequenceDiagram\n\n  actor User\n\n  participant CLI\n\n  participant Daemon\n\n  participant Core\n\n  participant Relay\n\n  participant Browser\n\n\n\n  User-&gt;&gt;CLI: opendevbrowser serve\n\n  CLI-&gt;&gt;Daemon: start local server (127.0.0.1) and relay\n\n  Note over Daemon,Relay: Hub daemon owns relay + FIFO leases\n\n  Daemon-&gt;&gt;Core: create core runtime\n\n  Core-&gt;&gt;Relay: start relay server\n\n  User-&gt;&gt;CLI: opendevbrowser launch\n\n  CLI-&gt;&gt;Daemon: POST /command (Bearer token)\n\n  Daemon-&gt;&gt;Core: session.launch\n\n  Core-&gt;&gt;Browser: launch or connect\n\n  Core--&gt;&gt;Daemon: session id\n\n  Daemon--&gt;&gt;CLI: result\n\n  User-&gt;&gt;CLI: opendevbrowser rpc --unsafe-internal --name &lt;command&gt;\n\n  CLI-&gt;&gt;Daemon: POST /command (raw internal command name + params, bypasses stable CLI surface)\n\n  Daemon--&gt;&gt;CLI: raw command result\n\n</code></pre>\n<p><code>rpc</code> is intentionally CLI-only and internal. It can invoke unstable daemon command paths and should be treated as a last-resort power-user interface.</p>\n<h3>3) Extension relay mode</h3>\n<pre><code>\nsequenceDiagram\n\n  actor User\n\n  participant Extension\n\n  participant Hub\n\n  participant Relay\n\n  participant Browser\n\n  participant Tools\n\n\n\n  User-&gt;&gt;Extension: Enable auto-connect\n\n  Extension-&gt;&gt;Relay: GET /config (extension origin or loopback no-Origin)\n\n  Extension-&gt;&gt;Relay: GET /pair (extension origin or loopback no-Origin)\n\n  Extension-&gt;&gt;Relay: WS /extension\n\n  Tools-&gt;&gt;Relay: GET /config (loopback)\n\n  Tools-&gt;&gt;Relay: GET /pair (when pairing required, loopback)\n\n  Tools-&gt;&gt;Hub: acquire binding/lease when required\n\n  Tools-&gt;&gt;Relay: WS /ops?token=...\n\n  Tools-&gt;&gt;Relay: WS /annotation?token=... (annotate relay)\n\n  Relay-&gt;&gt;Extension: forward ops envelopes\n\n  Extension-&gt;&gt;Browser: execute CDP/debugger commands\n\n  Browser--&gt;&gt;Extension: CDP events/results\n\n  Extension--&gt;&gt;Relay: relay events/results\n\n  Relay--&gt;&gt;Tools: forward events/results\n\n</code></pre>\n<h3>4) Frontend docs/content generation</h3>\n<pre><code>\nsequenceDiagram\n\n  participant Sources as docs/* + CHANGELOG + skills/*/SKILL.md\n\n  participant Generator as frontend/scripts/generate-docs.mjs\n\n  participant Content as frontend/src/content/*\n\n  participant Next as frontend/src/app/docs/*\n\n\n\n  Sources-&gt;&gt;Generator: markdown and metadata inputs\n\n  Generator-&gt;&gt;Content: pages.json + docs-manifest.json + metrics.json + roadmap.json\n\n  Next-&gt;&gt;Content: render docs gateway and reference routes\n\n</code></pre>\n<h3>Session modes</h3>\n<ul>\n<li><code>extension</code>: attach to an existing tab via the Chrome extension relay.</li>\n<li><code>managed</code>: launch and manage a Chrome instance via Playwright (headed by default).</li>\n<li><code>cdpConnect</code>: attach to an existing Chrome via CDP (<code>/json/version</code>).</li>\n<li><code>connect</code> routing: local relay WS endpoints (for example <code>ws://127.0.0.1:&lt;relayPort&gt;</code> or <code>/ops</code>) are normalized to <code>/ops</code> and routed via the relay (<code>extension</code> mode). Legacy <code>/cdp</code> requires <code>--extension-legacy</code>.</li>\n<li>Launch defaults to <code>extension</code> when available; managed/CDPConnect require explicit user choice.</li>\n<li>Extension relay requires <strong>Chrome 125+</strong> and uses flat-session routing with DebuggerSession <code>sessionId</code>.</li>\n<li>Hub mode supports multi-client access. <code>/ops</code> accepts multiple clients, while FIFO binding/lease coordination applies to legacy <code>/cdp</code> and protected extension-session command paths.</li>\n</ul>\n<h3>Relay channel contracts</h3>\n<ul>\n<li><code>/ops</code> is the default high-level extension channel with explicit commands (<code>session.*</code>, <code>targets.*</code>, <code>page.*</code>, <code>nav.*</code>, <code>interact.*</code>, <code>dom.*</code>, <code>export.*</code>, <code>devtools.*</code>).</li>\n<li><code>/ops</code> envelopes: <code>ops_hello</code>, <code>ops_request</code>, <code>ops_response</code>, <code>ops_error</code>, <code>ops_event</code>, <code>ops_chunk</code>, <code>ops_ping</code>, <code>ops_pong</code>.</li>\n<li><code>/cdp</code> is legacy and forwards raw CDP commands via <code>forwardCDPCommand</code> envelopes (<code>id</code>, <code>method</code>, <code>params</code>, optional <code>sessionId</code>) and relays events/responses back.</li>\n<li><code>/annotation</code> remains a dedicated channel for annotation command/event/response flow.</li>\n<li>Full command names and payload examples are documented in <code>docs/SURFACE_REFERENCE.md</code>.</li>\n</ul>\n<h3>Multi-tab concurrency contract</h3>\n<ul>\n<li>Canonical spec: <code>docs/MULTITAB_PARALLEL_OPERATIONS_SPEC.md</code>.</li>\n<li>Execution key: <code>ExecutionKey = (sessionId, targetId)</code>.</li>\n<li>Command taxonomy:</li>\n<li><code>TargetScoped</code>: <code>goto</code>, <code>wait</code>, <code>snapshot</code>, interaction commands, DOM commands, <code>page.screenshot</code>, export/devtools target-bound commands.</li>\n<li><code>SessionStructural</code>: connect/disconnect, target/page create/close/select/list.</li>\n<li>Scheduler guarantees:</li>\n<li>Same target: strict FIFO.</li>\n<li>Different targets in one session: parallel up to governor <code>effectiveParallelCap</code>.</li>\n<li>Governor policy source of truth: <code>src/config.ts</code> (<code>parallelism</code> block), passed to extension <code>/ops</code> at <code>session.connect</code>.</li>\n<li>Legacy <code>/cdp</code> remains compatibility-only (<code>effectiveParallelCap=1</code>).</li>\n<li>Extension headless is unsupported by contract; headless extension launch/connect intent fails with <code>unsupported_mode</code>.</li>\n<li>Declared intentional mismatches are registry-bound in <code>docs/PARITY_DECLARED_DIVERGENCES.md</code>; undeclared parity mismatches fail gates.</li>\n</ul>\n<h3>Automation platform surfaces</h3>\n<ul>\n<li>Provider runtime supports source policy routing (<code>auto|web|community|social|shopping|all</code>) with per-provider timeouts, retries, circuit-breaker state, and partial-success envelopes.</li>\n<li>Workflow wrappers expose finalized skill-aligned entrypoints:</li>\n<li><code>research.run</code> / <code>opendevbrowser_research_run</code> / <code>opendevbrowser research run</code></li>\n<li><code>shopping.run</code> / <code>opendevbrowser_shopping_run</code> / <code>opendevbrowser shopping run</code></li>\n<li><code>product.video.run</code> / <code>opendevbrowser_product_video_run</code> / <code>opendevbrowser product-video run</code></li>\n<li>Workflow runtime primitives are layered as:</li>\n<li><code>timebox</code> (strict <code>days|from|to</code> resolution)</li>\n<li><code>orchestrator</code> (source/provider fanout + partial-failure accumulation)</li>\n<li><code>enrichment</code> (engagement/recency/date-confidence)</li>\n<li><code>renderer</code> (<code>compact|json|md|context|path</code>)</li>\n<li><code>artifact writer</code> (owner-only paths, TTL metadata, cleanup support)</li>\n<li>Macro engine resolves <code>@macro(...)</code> expressions into provider operations (<code>src/macros/*</code>) and is exposed through tool/CLI/daemon (<code>macro_resolve</code>, <code>macro-resolve</code>, <code>macro.resolve</code>) with resolve-only and execute modes.</li>\n<li>Execute-mode macro responses keep existing shapes and add metadata fields: <code>meta.tier.selected</code>, <code>meta.tier.reasonCode</code>, <code>meta.provenance.provider</code>, <code>meta.provenance.retrievalPath</code>, and <code>meta.provenance.retrievedAt</code>.</li>\n<li>Diagnostics include console/network/exception trackers and a combined debug bundle endpoint (<code>debug_trace_snapshot</code>, <code>debug-trace-snapshot</code>, <code>devtools.debugTraceSnapshot</code>).</li>\n<li>Legal/compliance gating for scrape-first adapters is enforced with per-provider review checklists (review date, allowed surfaces, prohibited flows, reviewer, expiry, signed-off status) and blocks expired/invalid enablement.</li>\n<li>Session coherence includes cookie import validation and tiered fingerprint controls:</li>\n<li>Provider cookie policy defaults are configurable via <code>providers.cookiePolicy</code> (<code>off|auto|required</code>) and <code>providers.cookieSource</code> (<code>file|env|inline</code>).</li>\n<li>Workflow wrappers expose per-run overrides: <code>useCookies</code> and <code>cookiePolicyOverride</code>.</li>\n<li>Effective policy is deterministic: override &gt; <code>useCookies</code> &gt; config default.</li>\n<li><code>required</code> policy can fail fast with <code>reasonCode=auth_required</code> when cookie load/import/verification cannot establish authenticated state.</li>\n<li>Workflow metrics include cookie diagnostics at <code>meta.metrics.cookie_diagnostics</code> and <code>meta.metrics.cookieDiagnostics</code>.</li>\n<li>Tier 1: coherence checks/warnings (default on)</li>\n<li>Tier 2: runtime hardening + rotation policy (default on, continuous signals)</li>\n<li>Tier 3: adaptive canary/fallback track (default on, continuous signals)</li>\n<li>Structured JSON logging/audit provides request correlation (<code>requestId</code>) and redaction-safe audit entries for write paths.</li>\n</ul>\n<h2>Configuration and state</h2>\n<ul>\n<li><strong>Plugin config</strong>: <code>~/.config/opencode/opendevbrowser.jsonc</code> (optional).</li>\n<li><strong>Daemon metadata</strong>: <code>~/.cache/opendevbrowser/daemon.json</code> (port, token, pid).</li>\n<li><strong>Daemon status</strong>: <code>/status</code> is the source of truth; cached metadata may be stale.</li>\n<li><strong>Daemon config</strong>: <code>daemonPort</code>/<code>daemonToken</code> persisted in <code>opendevbrowser.jsonc</code> for hub discovery.</li>\n<li><strong>Extension storage</strong>: <code>chrome.storage.local</code> (relay port, token, auto-connect).</li>\n<li><strong>Frontend generated content</strong>: <code>frontend/src/content/*</code> (generated docs/metrics/roadmap JSON).</li>\n</ul>\n<p>Default extension values:</p>\n<ul>\n<li><code>relayPort</code>: <code>8787</code></li>\n<li><code>autoConnect</code>: <code>true</code></li>\n<li><code>autoPair</code>: <code>true</code></li>\n<li><code>pairingEnabled</code>: <code>true</code></li>\n<li><code>pairingToken</code>: <code>null</code> (fetched via <code>/pair</code>)</li>\n<li>Background auto-retry/backoff uses <code>chrome.alarms</code> for extension auto-connect retries (<code>/config</code> + <code>/pair</code>) when the relay is unreachable.</li>\n</ul>\n<h2>Security controls</h2>\n<ul>\n<li><strong>Local-only CDP</strong> by default; non-local requires opt-in config.</li>\n<li><strong>Relay binding</strong>: <code>127.0.0.1</code> only, with token-based pairing.</li>\n<li><strong>Ops auth</strong>: <code>/ops</code> requires <code>?token=&lt;relayToken&gt;</code> when pairing is enabled.</li>\n<li><strong>CDP auth</strong>: <code>/cdp</code> requires <code>?token=&lt;relayToken&gt;</code> when pairing is enabled (legacy).</li>\n<li><strong>Annotation auth</strong>: <code>/annotation</code> requires <code>?token=&lt;relayToken&gt;</code> when pairing is enabled.</li>\n<li><strong>Origin enforcement</strong>: <code>/extension</code> requires <code>chrome-extension://</code> origin; <code>/config</code>, <code>/status</code>, <code>/pair</code> allow extension origins and loopback no-Origin (including <code>Origin: null</code>), and reject explicit non-extension origins.</li>\n<li><strong>PNA/CORS</strong>: preflights include <code>Access-Control-Allow-Private-Network: true</code> when requested.</li>\n<li><strong>HTTP rate limiting</strong>: <code>/config</code>, <code>/status</code>, <code>/pair</code> are rate-limited per IP.</li>\n<li><strong>Timing-safe compare</strong>: pairing tokens checked with <code>crypto.timingSafeEqual</code>.</li>\n<li><strong>Output redaction</strong>: DevTools output strips sensitive tokens by default.</li>\n<li><strong>Sanitized export</strong>: export pipeline removes scripts, handlers, and unsafe URLs.</li>\n</ul>\n<h2>Extension relay routing (flat sessions)</h2>\n<p>Extension relay mode uses <strong>flat CDP sessions (Chrome 125+)</strong>. The extension CDP router:</p>\n<ul>\n<li>Lists top-level tabs and child targets for discovery.</li>\n<li>Auto-attaches child targets recursively (workers/OOPIF) and surfaces them in <code>Target.getTargets</code> and <code>Target.getTargetInfo</code>.</li>\n<li>Routes all commands and events by DebuggerSession <code>sessionId</code> (no <code>Target.sendMessageToTarget</code>).</li>\n<li>Maintains root vs child mappings in <code>TargetSessionMap</code> to route each <code>sessionId</code> to the correct <code>tabId</code>.</li>\n<li>Tracks a primary tab for relay handshake/diagnostics without disconnecting other tabs.</li>\n<li>Annotation relay uses a dedicated <code>/annotation</code> websocket and <code>annotationCommand</code>/<code>annotationResponse</code> messages.</li>\n</ul>\n<p>When hub mode is enabled, the hub daemon is the <strong>sole relay owner</strong> and enforces a FIFO lease queue for multi-client safety. There is no local relay fallback in hub mode.</p>\n<h2>Testing and verification</h2>\n<ul>\n<li><strong>Unit/integration tests</strong> via Vitest (<code>npm run test</code>), coverage &gt;=97%.</li>\n<li><strong>Extension build</strong> via <code>npm run extension:build</code>.</li>\n<li><strong>CLI build</strong> via <code>npm run build</code>.</li>\n<li><strong>Frontend checks</strong> via <code>cd frontend &amp;&amp; npm run lint &amp;&amp; npm run typecheck &amp;&amp; npm run build</code>.</li>\n<li><strong>CLI inventory/help parity check</strong> via <code>npx opendevbrowser --help</code> and <code>npx opendevbrowser help</code>.</li>\n<li><strong>Parity gate</strong> via <code>tests/parity-matrix.test.ts</code> (CLI/tool/runtime surface checks + mode coverage).</li>\n<li><strong>Provider performance gate</strong> via <code>tests/providers-performance-gate.test.ts</code> (deterministic fixture SLO checks).</li>\n<li><strong>Release checklist</strong> in <code>docs/RELEASE_PARITY_CHECKLIST.md</code>.</li>\n<li><strong>Benchmark fixture manifest</strong> in <code>docs/benchmarks/provider-fixtures.md</code>.</li>\n<li><strong>First-run onboarding checklist</strong> in <code>docs/FIRST_RUN_ONBOARDING.md</code>.</li>\n</ul>\n<h2>Skill artifacts and operational gates</h2>\n<p><code>opendevbrowser-best-practices</code> includes codified operational artifacts under</p>\n<p><code>skills/opendevbrowser-best-practices/artifacts/</code>:</p>\n<ul>\n<li><code>provider-workflows.md</code></li>\n<li><code>parity-gates.md</code></li>\n<li><code>debug-trace-playbook.md</code></li>\n<li><code>fingerprint-tiers.md</code></li>\n<li><code>macro-workflows.md</code></li>\n<li><code>command-channel-reference.md</code></li>\n</ul>\n<p>Template assets for parity and channel checks live under</p>\n<p><code>skills/opendevbrowser-best-practices/assets/templates/</code>.</p>\n<p>Skill install/discovery sync covers <code>opencode</code>, <code>codex</code>, <code>claudecode</code>, and <code>ampcli</code></p>\n<p>ecosystems (with legacy <code>claude</code>/<code>amp</code> aliases preserved), and path discovery is documented</p>\n<p>in <code>README.md</code> and <code>docs/CLI.md</code>.</p>\n<p>Validation script:</p>\n<pre><code>\n./skills/opendevbrowser-best-practices/scripts/validate-skill-assets.sh\n\n</code></pre>\n<h2>Key directories</h2>\n<ul>\n<li><code>src/core/</code>: shared runtime bootstrap.</li>\n<li><code>src/browser/</code>: <code>BrowserManager</code>, <code>TargetManager</code>, session lifecycle.</li>\n<li><code>src/browser/fingerprint/</code>: Tier 1/2/3 fingerprint policy + adaptive controls.</li>\n<li><code>src/providers/</code>: provider contracts, registry, runtime policy, and first-party adapters.</li>\n<li><code>src/providers/workflows.ts</code>: research/shopping/product-video orchestrators and compliance/alert gates.</li>\n<li><code>src/providers/timebox.ts</code>: strict timebox resolver and filtering primitives.</li>\n<li><code>src/providers/{renderer.ts,artifacts.ts,enrichment.ts}</code>: render modes, artifact lifecycle, and enrichment scores.</li>\n<li><code>src/macros/</code>: macro parser/registry and pack definitions.</li>\n<li><code>src/devtools/</code>: console/network/exception trackers and debug bundle channels.</li>\n<li><code>src/tools/</code>: tool definitions and response shaping.</li>\n<li><code>src/relay/</code>: relay server and protocol types.</li>\n<li><code>src/cli/</code>: CLI commands, daemon, and installers.</li>\n<li><code>src/cli/commands/artifacts.ts</code>: artifact lifecycle cleanup (<code>artifacts cleanup --expired-only</code>).</li>\n<li><code>extension/</code>: Chrome extension UI and background logic.</li>\n<li><code>frontend/</code>: marketing/docs website and generated content pipeline.</li>\n<li><code>docs/</code>: plans, architecture, and operational guidance.</li>\n</ul>",
      "codeSample": "npx opendevbrowser status"
    },
    "concepts/snapshot-refs": {
      "category": "concepts",
      "slug": "snapshot-refs",
      "title": "Snapshot and Refs",
      "summary": "OpenDevBrowser Architecture This document describes the architecture of OpenDevBrowser across plugin, CLI, and extension distributions, with a security-first focus. Status: active Last updated: 2026-02-24 System overview",
      "sourcePath": "docs/ARCHITECTURE.md",
      "editUrl": "https://github.com/freshtechbro/opendevbrowser/edit/main/docs/ARCHITECTURE.md",
      "contentHtml": "<h1>OpenDevBrowser Architecture</h1>\n<p>This document describes the architecture of OpenDevBrowser across plugin, CLI, and extension distributions, with a security-first focus.</p>\n<p>Status: active</p>\n<p>Last updated: 2026-02-24</p>\n<h2>System overview</h2>\n<p>OpenDevBrowser provides four primary entry points:</p>\n<ul>\n<li><strong>Plugin</strong>: OpenCode runtime entry that exposes <code>opendevbrowser_*</code> tools.</li>\n<li><strong>CLI</strong>: Installer + automation commands (daemon or single-shot <code>run</code>), plus guarded internal <code>rpc</code> passthrough for power users (unsafe, use with caution).</li>\n<li><strong>Extension</strong>: Relay mode for attaching to existing logged-in tabs.</li>\n<li><strong>Frontend</strong>: Next.js website and generated docs viewer (<code>frontend/</code>).</li>\n<li><strong>Hub daemon</strong>: <code>opendevbrowser serve</code> process that owns the relay and enforces FIFO leases when hub mode is enabled.</li>\n<li><strong>Automation platform layer</strong>: provider runtime, macro resolver, tiered fingerprint controls, and combined debug trace workflows shared across tool/CLI/daemon surfaces.</li>\n</ul>\n<p>Current automation surface sizes:</p>\n<ul>\n<li>CLI commands: <code>55</code></li>\n<li>Plugin tools: <code>48</code></li>\n<li><code>/ops</code> command names: <code>38</code></li>\n</ul>\n<p>The shared runtime core is in <code>src/core/</code> and wires <code>BrowserManager</code>, <code>AnnotationManager</code>, <code>ScriptRunner</code>, <code>SkillLoader</code>, and <code>RelayServer</code>.</p>\n<p>Canonical inventory and channel contracts: <code>docs/SURFACE_REFERENCE.md</code>.</p>\n<p>Frontend architecture and generation flow are documented in <code>docs/FRONTEND.md</code>.</p>\n<p>The CLI installer attempts to set up daemon auto-start on first successful install</p>\n<p>(macOS LaunchAgent, Windows Task Scheduler). Unsupported platforms are skipped and continue without auto-start.</p>\n<h2>Component map</h2>\n<h3>Canonical ASCII map</h3>\n<pre><code>\n┌─────────────────────────────────────────────────────────────────┐\n\n│                      Distribution Layer                         │\n\n├──────────────────┬──────────────────┬──────────────────┬──────────────────────────┤\n\n│  OpenCode Plugin │       CLI        │    Hub Daemon    │    Chrome Extension       │\n\n│  (src/index.ts)  │ (src/cli/index)  │ (opendevbrowser  │   (extension/src/)        │\n\n│                  │                  │      serve)     │                           │\n\n└────────┬─────────┴────────┬─────────┴─────────┬────────┴──────────────┬────────────┘\n\n         │                  │                  │                       │\n\n         ▼                  ▼                  ▼                       ▼\n\n┌─────────────────────────────────────────────────────────────────┐\n\n│                    Core Runtime (src/core/)                    │\n\n│  bootstrap.ts → wires managers, injects ToolDeps              │\n\n└────────┬────────────────────────────────────────────────────────┘\n\n         │\n\n    ┌────┴────┬─────────────┬──────────────┬──────────────┬──────────────┐\n\n    ▼         ▼             ▼              ▼              ▼              ▼\n\n┌────────┐ ┌────────┐ ┌──────────┐ ┌────────────┐ ┌────────────┐ ┌────────────┐\n\n│Browser │ │Script  │ │Snapshot  │ │ Annotation │ │  Relay     │ │  Skills    │\n\n│Manager │ │Runner  │ │Pipeline  │ │  Manager   │ │  Server    │ │  Loader    │\n\n└───┬────┘ └────────┘ └──────────┘ └────────────┘ └─────┬──────┘ └────────────┘\n\n    │                                                  │\n\n    ▼                                                  ▼\n\n┌────────┐                                        ┌────────────┐\n\n│Target  │                                        │ Extension  │\n\n│Manager │                                        │ (WS relay) │\n\n└────────┘                                        └────────────┘\n\n</code></pre>\n<h3>Data flow</h3>\n<pre><code>\nTool Call → Zod Validation → Manager/Runner → CDP/Playwright → Response\n\n                                   ↓\n\n                            Snapshot (AX-tree → refs)\n\n                                   ↓\n\n                            Action (ref → backendNodeId → DOM)\n\n</code></pre>\n<h3>Detailed dependency map (Mermaid)</h3>\n<pre><code>\nflowchart LR\n\n  subgraph Distribution\n\n    Plugin[OpenCode Plugin]\n\n    CLI[CLI]\n\n    Hub[Hub Daemon]\n\n    Extension[Chrome Extension]\n\n    Frontend[Next.js Frontend]\n\n  end\n\n\n\n  subgraph Core\n\n    CoreBootstrap[Core Bootstrap]\n\n    BrowserManager[BrowserManager]\n\n    TargetManager[TargetManager]\n\n    ProviderRuntime[Provider Runtime]\n\n    MacroRegistry[Macro Registry]\n\n    Fingerprint[Fingerprint Tiers]\n\n    AnnotationManager[AnnotationManager]\n\n    ScriptRunner[ScriptRunner]\n\n    Snapshotter[Snapshot Pipeline]\n\n    Devtools[DevTools Trackers]\n\n    Exporter[Export Pipeline]\n\n    Relay[RelayServer]\n\n  end\n\n\n\n  Plugin --&gt; CoreBootstrap\n\n  CLI --&gt; CoreBootstrap\n\n  Hub --&gt; CoreBootstrap\n\n  Extension --&gt; Relay\n\n  Frontend --&gt; CLI\n\n  Frontend --&gt; Docs[docs/* + CHANGELOG + skills/*/SKILL.md]\n\n\n\n  CoreBootstrap --&gt; BrowserManager\n\n  BrowserManager --&gt; TargetManager\n\n  CoreBootstrap --&gt; ProviderRuntime\n\n  CoreBootstrap --&gt; MacroRegistry\n\n  BrowserManager --&gt; Fingerprint\n\n  CoreBootstrap --&gt; AnnotationManager\n\n  AnnotationManager --&gt; BrowserManager\n\n  AnnotationManager --&gt; Relay\n\n  CoreBootstrap --&gt; ScriptRunner\n\n  CoreBootstrap --&gt; Snapshotter\n\n  CoreBootstrap --&gt; Devtools\n\n  CoreBootstrap --&gt; Exporter\n\n  CoreBootstrap --&gt; Relay\n\n</code></pre>\n<h2>Runtime flows</h2>\n<h3>1) Plugin tool invocation</h3>\n<ol>\n<li>OpenCode calls a tool like <code>opendevbrowser_launch</code>.</li>\n<li>Tool validates inputs with Zod and delegates to <code>BrowserManager</code>.</li>\n<li><code>BrowserManager</code> launches or connects to a Chrome instance.</li>\n<li>Optional automation flows route through provider runtime (<code>search</code>/<code>fetch</code>/<code>crawl</code>/<code>post</code>) and macro resolution.</li>\n<li>Tool returns structured response with session id, trace-aware diagnostics, and warnings.</li>\n</ol>\n<h3>2) CLI automation (daemon mode)</h3>\n<pre><code>\nsequenceDiagram\n\n  actor User\n\n  participant CLI\n\n  participant Daemon\n\n  participant Core\n\n  participant Relay\n\n  participant Browser\n\n\n\n  User-&gt;&gt;CLI: opendevbrowser serve\n\n  CLI-&gt;&gt;Daemon: start local server (127.0.0.1) and relay\n\n  Note over Daemon,Relay: Hub daemon owns relay + FIFO leases\n\n  Daemon-&gt;&gt;Core: create core runtime\n\n  Core-&gt;&gt;Relay: start relay server\n\n  User-&gt;&gt;CLI: opendevbrowser launch\n\n  CLI-&gt;&gt;Daemon: POST /command (Bearer token)\n\n  Daemon-&gt;&gt;Core: session.launch\n\n  Core-&gt;&gt;Browser: launch or connect\n\n  Core--&gt;&gt;Daemon: session id\n\n  Daemon--&gt;&gt;CLI: result\n\n  User-&gt;&gt;CLI: opendevbrowser rpc --unsafe-internal --name &lt;command&gt;\n\n  CLI-&gt;&gt;Daemon: POST /command (raw internal command name + params, bypasses stable CLI surface)\n\n  Daemon--&gt;&gt;CLI: raw command result\n\n</code></pre>\n<p><code>rpc</code> is intentionally CLI-only and internal. It can invoke unstable daemon command paths and should be treated as a last-resort power-user interface.</p>\n<h3>3) Extension relay mode</h3>\n<pre><code>\nsequenceDiagram\n\n  actor User\n\n  participant Extension\n\n  participant Hub\n\n  participant Relay\n\n  participant Browser\n\n  participant Tools\n\n\n\n  User-&gt;&gt;Extension: Enable auto-connect\n\n  Extension-&gt;&gt;Relay: GET /config (extension origin or loopback no-Origin)\n\n  Extension-&gt;&gt;Relay: GET /pair (extension origin or loopback no-Origin)\n\n  Extension-&gt;&gt;Relay: WS /extension\n\n  Tools-&gt;&gt;Relay: GET /config (loopback)\n\n  Tools-&gt;&gt;Relay: GET /pair (when pairing required, loopback)\n\n  Tools-&gt;&gt;Hub: acquire binding/lease when required\n\n  Tools-&gt;&gt;Relay: WS /ops?token=...\n\n  Tools-&gt;&gt;Relay: WS /annotation?token=... (annotate relay)\n\n  Relay-&gt;&gt;Extension: forward ops envelopes\n\n  Extension-&gt;&gt;Browser: execute CDP/debugger commands\n\n  Browser--&gt;&gt;Extension: CDP events/results\n\n  Extension--&gt;&gt;Relay: relay events/results\n\n  Relay--&gt;&gt;Tools: forward events/results\n\n</code></pre>\n<h3>4) Frontend docs/content generation</h3>\n<pre><code>\nsequenceDiagram\n\n  participant Sources as docs/* + CHANGELOG + skills/*/SKILL.md\n\n  participant Generator as frontend/scripts/generate-docs.mjs\n\n  participant Content as frontend/src/content/*\n\n  participant Next as frontend/src/app/docs/*\n\n\n\n  Sources-&gt;&gt;Generator: markdown and metadata inputs\n\n  Generator-&gt;&gt;Content: pages.json + docs-manifest.json + metrics.json + roadmap.json\n\n  Next-&gt;&gt;Content: render docs gateway and reference routes\n\n</code></pre>\n<h3>Session modes</h3>\n<ul>\n<li><code>extension</code>: attach to an existing tab via the Chrome extension relay.</li>\n<li><code>managed</code>: launch and manage a Chrome instance via Playwright (headed by default).</li>\n<li><code>cdpConnect</code>: attach to an existing Chrome via CDP (<code>/json/version</code>).</li>\n<li><code>connect</code> routing: local relay WS endpoints (for example <code>ws://127.0.0.1:&lt;relayPort&gt;</code> or <code>/ops</code>) are normalized to <code>/ops</code> and routed via the relay (<code>extension</code> mode). Legacy <code>/cdp</code> requires <code>--extension-legacy</code>.</li>\n<li>Launch defaults to <code>extension</code> when available; managed/CDPConnect require explicit user choice.</li>\n<li>Extension relay requires <strong>Chrome 125+</strong> and uses flat-session routing with DebuggerSession <code>sessionId</code>.</li>\n<li>Hub mode supports multi-client access. <code>/ops</code> accepts multiple clients, while FIFO binding/lease coordination applies to legacy <code>/cdp</code> and protected extension-session command paths.</li>\n</ul>\n<h3>Relay channel contracts</h3>\n<ul>\n<li><code>/ops</code> is the default high-level extension channel with explicit commands (<code>session.*</code>, <code>targets.*</code>, <code>page.*</code>, <code>nav.*</code>, <code>interact.*</code>, <code>dom.*</code>, <code>export.*</code>, <code>devtools.*</code>).</li>\n<li><code>/ops</code> envelopes: <code>ops_hello</code>, <code>ops_request</code>, <code>ops_response</code>, <code>ops_error</code>, <code>ops_event</code>, <code>ops_chunk</code>, <code>ops_ping</code>, <code>ops_pong</code>.</li>\n<li><code>/cdp</code> is legacy and forwards raw CDP commands via <code>forwardCDPCommand</code> envelopes (<code>id</code>, <code>method</code>, <code>params</code>, optional <code>sessionId</code>) and relays events/responses back.</li>\n<li><code>/annotation</code> remains a dedicated channel for annotation command/event/response flow.</li>\n<li>Full command names and payload examples are documented in <code>docs/SURFACE_REFERENCE.md</code>.</li>\n</ul>\n<h3>Multi-tab concurrency contract</h3>\n<ul>\n<li>Canonical spec: <code>docs/MULTITAB_PARALLEL_OPERATIONS_SPEC.md</code>.</li>\n<li>Execution key: <code>ExecutionKey = (sessionId, targetId)</code>.</li>\n<li>Command taxonomy:</li>\n<li><code>TargetScoped</code>: <code>goto</code>, <code>wait</code>, <code>snapshot</code>, interaction commands, DOM commands, <code>page.screenshot</code>, export/devtools target-bound commands.</li>\n<li><code>SessionStructural</code>: connect/disconnect, target/page create/close/select/list.</li>\n<li>Scheduler guarantees:</li>\n<li>Same target: strict FIFO.</li>\n<li>Different targets in one session: parallel up to governor <code>effectiveParallelCap</code>.</li>\n<li>Governor policy source of truth: <code>src/config.ts</code> (<code>parallelism</code> block), passed to extension <code>/ops</code> at <code>session.connect</code>.</li>\n<li>Legacy <code>/cdp</code> remains compatibility-only (<code>effectiveParallelCap=1</code>).</li>\n<li>Extension headless is unsupported by contract; headless extension launch/connect intent fails with <code>unsupported_mode</code>.</li>\n<li>Declared intentional mismatches are registry-bound in <code>docs/PARITY_DECLARED_DIVERGENCES.md</code>; undeclared parity mismatches fail gates.</li>\n</ul>\n<h3>Automation platform surfaces</h3>\n<ul>\n<li>Provider runtime supports source policy routing (<code>auto|web|community|social|shopping|all</code>) with per-provider timeouts, retries, circuit-breaker state, and partial-success envelopes.</li>\n<li>Workflow wrappers expose finalized skill-aligned entrypoints:</li>\n<li><code>research.run</code> / <code>opendevbrowser_research_run</code> / <code>opendevbrowser research run</code></li>\n<li><code>shopping.run</code> / <code>opendevbrowser_shopping_run</code> / <code>opendevbrowser shopping run</code></li>\n<li><code>product.video.run</code> / <code>opendevbrowser_product_video_run</code> / <code>opendevbrowser product-video run</code></li>\n<li>Workflow runtime primitives are layered as:</li>\n<li><code>timebox</code> (strict <code>days|from|to</code> resolution)</li>\n<li><code>orchestrator</code> (source/provider fanout + partial-failure accumulation)</li>\n<li><code>enrichment</code> (engagement/recency/date-confidence)</li>\n<li><code>renderer</code> (<code>compact|json|md|context|path</code>)</li>\n<li><code>artifact writer</code> (owner-only paths, TTL metadata, cleanup support)</li>\n<li>Macro engine resolves <code>@macro(...)</code> expressions into provider operations (<code>src/macros/*</code>) and is exposed through tool/CLI/daemon (<code>macro_resolve</code>, <code>macro-resolve</code>, <code>macro.resolve</code>) with resolve-only and execute modes.</li>\n<li>Execute-mode macro responses keep existing shapes and add metadata fields: <code>meta.tier.selected</code>, <code>meta.tier.reasonCode</code>, <code>meta.provenance.provider</code>, <code>meta.provenance.retrievalPath</code>, and <code>meta.provenance.retrievedAt</code>.</li>\n<li>Diagnostics include console/network/exception trackers and a combined debug bundle endpoint (<code>debug_trace_snapshot</code>, <code>debug-trace-snapshot</code>, <code>devtools.debugTraceSnapshot</code>).</li>\n<li>Legal/compliance gating for scrape-first adapters is enforced with per-provider review checklists (review date, allowed surfaces, prohibited flows, reviewer, expiry, signed-off status) and blocks expired/invalid enablement.</li>\n<li>Session coherence includes cookie import validation and tiered fingerprint controls:</li>\n<li>Provider cookie policy defaults are configurable via <code>providers.cookiePolicy</code> (<code>off|auto|required</code>) and <code>providers.cookieSource</code> (<code>file|env|inline</code>).</li>\n<li>Workflow wrappers expose per-run overrides: <code>useCookies</code> and <code>cookiePolicyOverride</code>.</li>\n<li>Effective policy is deterministic: override &gt; <code>useCookies</code> &gt; config default.</li>\n<li><code>required</code> policy can fail fast with <code>reasonCode=auth_required</code> when cookie load/import/verification cannot establish authenticated state.</li>\n<li>Workflow metrics include cookie diagnostics at <code>meta.metrics.cookie_diagnostics</code> and <code>meta.metrics.cookieDiagnostics</code>.</li>\n<li>Tier 1: coherence checks/warnings (default on)</li>\n<li>Tier 2: runtime hardening + rotation policy (default on, continuous signals)</li>\n<li>Tier 3: adaptive canary/fallback track (default on, continuous signals)</li>\n<li>Structured JSON logging/audit provides request correlation (<code>requestId</code>) and redaction-safe audit entries for write paths.</li>\n</ul>\n<h2>Configuration and state</h2>\n<ul>\n<li><strong>Plugin config</strong>: <code>~/.config/opencode/opendevbrowser.jsonc</code> (optional).</li>\n<li><strong>Daemon metadata</strong>: <code>~/.cache/opendevbrowser/daemon.json</code> (port, token, pid).</li>\n<li><strong>Daemon status</strong>: <code>/status</code> is the source of truth; cached metadata may be stale.</li>\n<li><strong>Daemon config</strong>: <code>daemonPort</code>/<code>daemonToken</code> persisted in <code>opendevbrowser.jsonc</code> for hub discovery.</li>\n<li><strong>Extension storage</strong>: <code>chrome.storage.local</code> (relay port, token, auto-connect).</li>\n<li><strong>Frontend generated content</strong>: <code>frontend/src/content/*</code> (generated docs/metrics/roadmap JSON).</li>\n</ul>\n<p>Default extension values:</p>\n<ul>\n<li><code>relayPort</code>: <code>8787</code></li>\n<li><code>autoConnect</code>: <code>true</code></li>\n<li><code>autoPair</code>: <code>true</code></li>\n<li><code>pairingEnabled</code>: <code>true</code></li>\n<li><code>pairingToken</code>: <code>null</code> (fetched via <code>/pair</code>)</li>\n<li>Background auto-retry/backoff uses <code>chrome.alarms</code> for extension auto-connect retries (<code>/config</code> + <code>/pair</code>) when the relay is unreachable.</li>\n</ul>\n<h2>Security controls</h2>\n<ul>\n<li><strong>Local-only CDP</strong> by default; non-local requires opt-in config.</li>\n<li><strong>Relay binding</strong>: <code>127.0.0.1</code> only, with token-based pairing.</li>\n<li><strong>Ops auth</strong>: <code>/ops</code> requires <code>?token=&lt;relayToken&gt;</code> when pairing is enabled.</li>\n<li><strong>CDP auth</strong>: <code>/cdp</code> requires <code>?token=&lt;relayToken&gt;</code> when pairing is enabled (legacy).</li>\n<li><strong>Annotation auth</strong>: <code>/annotation</code> requires <code>?token=&lt;relayToken&gt;</code> when pairing is enabled.</li>\n<li><strong>Origin enforcement</strong>: <code>/extension</code> requires <code>chrome-extension://</code> origin; <code>/config</code>, <code>/status</code>, <code>/pair</code> allow extension origins and loopback no-Origin (including <code>Origin: null</code>), and reject explicit non-extension origins.</li>\n<li><strong>PNA/CORS</strong>: preflights include <code>Access-Control-Allow-Private-Network: true</code> when requested.</li>\n<li><strong>HTTP rate limiting</strong>: <code>/config</code>, <code>/status</code>, <code>/pair</code> are rate-limited per IP.</li>\n<li><strong>Timing-safe compare</strong>: pairing tokens checked with <code>crypto.timingSafeEqual</code>.</li>\n<li><strong>Output redaction</strong>: DevTools output strips sensitive tokens by default.</li>\n<li><strong>Sanitized export</strong>: export pipeline removes scripts, handlers, and unsafe URLs.</li>\n</ul>\n<h2>Extension relay routing (flat sessions)</h2>\n<p>Extension relay mode uses <strong>flat CDP sessions (Chrome 125+)</strong>. The extension CDP router:</p>\n<ul>\n<li>Lists top-level tabs and child targets for discovery.</li>\n<li>Auto-attaches child targets recursively (workers/OOPIF) and surfaces them in <code>Target.getTargets</code> and <code>Target.getTargetInfo</code>.</li>\n<li>Routes all commands and events by DebuggerSession <code>sessionId</code> (no <code>Target.sendMessageToTarget</code>).</li>\n<li>Maintains root vs child mappings in <code>TargetSessionMap</code> to route each <code>sessionId</code> to the correct <code>tabId</code>.</li>\n<li>Tracks a primary tab for relay handshake/diagnostics without disconnecting other tabs.</li>\n<li>Annotation relay uses a dedicated <code>/annotation</code> websocket and <code>annotationCommand</code>/<code>annotationResponse</code> messages.</li>\n</ul>\n<p>When hub mode is enabled, the hub daemon is the <strong>sole relay owner</strong> and enforces a FIFO lease queue for multi-client safety. There is no local relay fallback in hub mode.</p>\n<h2>Testing and verification</h2>\n<ul>\n<li><strong>Unit/integration tests</strong> via Vitest (<code>npm run test</code>), coverage &gt;=97%.</li>\n<li><strong>Extension build</strong> via <code>npm run extension:build</code>.</li>\n<li><strong>CLI build</strong> via <code>npm run build</code>.</li>\n<li><strong>Frontend checks</strong> via <code>cd frontend &amp;&amp; npm run lint &amp;&amp; npm run typecheck &amp;&amp; npm run build</code>.</li>\n<li><strong>CLI inventory/help parity check</strong> via <code>npx opendevbrowser --help</code> and <code>npx opendevbrowser help</code>.</li>\n<li><strong>Parity gate</strong> via <code>tests/parity-matrix.test.ts</code> (CLI/tool/runtime surface checks + mode coverage).</li>\n<li><strong>Provider performance gate</strong> via <code>tests/providers-performance-gate.test.ts</code> (deterministic fixture SLO checks).</li>\n<li><strong>Release checklist</strong> in <code>docs/RELEASE_PARITY_CHECKLIST.md</code>.</li>\n<li><strong>Benchmark fixture manifest</strong> in <code>docs/benchmarks/provider-fixtures.md</code>.</li>\n<li><strong>First-run onboarding checklist</strong> in <code>docs/FIRST_RUN_ONBOARDING.md</code>.</li>\n</ul>\n<h2>Skill artifacts and operational gates</h2>\n<p><code>opendevbrowser-best-practices</code> includes codified operational artifacts under</p>\n<p><code>skills/opendevbrowser-best-practices/artifacts/</code>:</p>\n<ul>\n<li><code>provider-workflows.md</code></li>\n<li><code>parity-gates.md</code></li>\n<li><code>debug-trace-playbook.md</code></li>\n<li><code>fingerprint-tiers.md</code></li>\n<li><code>macro-workflows.md</code></li>\n<li><code>command-channel-reference.md</code></li>\n</ul>\n<p>Template assets for parity and channel checks live under</p>\n<p><code>skills/opendevbrowser-best-practices/assets/templates/</code>.</p>\n<p>Skill install/discovery sync covers <code>opencode</code>, <code>codex</code>, <code>claudecode</code>, and <code>ampcli</code></p>\n<p>ecosystems (with legacy <code>claude</code>/<code>amp</code> aliases preserved), and path discovery is documented</p>\n<p>in <code>README.md</code> and <code>docs/CLI.md</code>.</p>\n<p>Validation script:</p>\n<pre><code>\n./skills/opendevbrowser-best-practices/scripts/validate-skill-assets.sh\n\n</code></pre>\n<h2>Key directories</h2>\n<ul>\n<li><code>src/core/</code>: shared runtime bootstrap.</li>\n<li><code>src/browser/</code>: <code>BrowserManager</code>, <code>TargetManager</code>, session lifecycle.</li>\n<li><code>src/browser/fingerprint/</code>: Tier 1/2/3 fingerprint policy + adaptive controls.</li>\n<li><code>src/providers/</code>: provider contracts, registry, runtime policy, and first-party adapters.</li>\n<li><code>src/providers/workflows.ts</code>: research/shopping/product-video orchestrators and compliance/alert gates.</li>\n<li><code>src/providers/timebox.ts</code>: strict timebox resolver and filtering primitives.</li>\n<li><code>src/providers/{renderer.ts,artifacts.ts,enrichment.ts}</code>: render modes, artifact lifecycle, and enrichment scores.</li>\n<li><code>src/macros/</code>: macro parser/registry and pack definitions.</li>\n<li><code>src/devtools/</code>: console/network/exception trackers and debug bundle channels.</li>\n<li><code>src/tools/</code>: tool definitions and response shaping.</li>\n<li><code>src/relay/</code>: relay server and protocol types.</li>\n<li><code>src/cli/</code>: CLI commands, daemon, and installers.</li>\n<li><code>src/cli/commands/artifacts.ts</code>: artifact lifecycle cleanup (<code>artifacts cleanup --expired-only</code>).</li>\n<li><code>extension/</code>: Chrome extension UI and background logic.</li>\n<li><code>frontend/</code>: marketing/docs website and generated content pipeline.</li>\n<li><code>docs/</code>: plans, architecture, and operational guidance.</li>\n</ul>",
      "codeSample": "npx opendevbrowser status"
    },
    "concepts/security-model": {
      "category": "concepts",
      "slug": "security-model",
      "title": "Security Model",
      "summary": "OpenDevBrowser Architecture This document describes the architecture of OpenDevBrowser across plugin, CLI, and extension distributions, with a security-first focus. Status: active Last updated: 2026-02-24 System overview",
      "sourcePath": "docs/ARCHITECTURE.md",
      "editUrl": "https://github.com/freshtechbro/opendevbrowser/edit/main/docs/ARCHITECTURE.md",
      "contentHtml": "<h1>OpenDevBrowser Architecture</h1>\n<p>This document describes the architecture of OpenDevBrowser across plugin, CLI, and extension distributions, with a security-first focus.</p>\n<p>Status: active</p>\n<p>Last updated: 2026-02-24</p>\n<h2>System overview</h2>\n<p>OpenDevBrowser provides four primary entry points:</p>\n<ul>\n<li><strong>Plugin</strong>: OpenCode runtime entry that exposes <code>opendevbrowser_*</code> tools.</li>\n<li><strong>CLI</strong>: Installer + automation commands (daemon or single-shot <code>run</code>), plus guarded internal <code>rpc</code> passthrough for power users (unsafe, use with caution).</li>\n<li><strong>Extension</strong>: Relay mode for attaching to existing logged-in tabs.</li>\n<li><strong>Frontend</strong>: Next.js website and generated docs viewer (<code>frontend/</code>).</li>\n<li><strong>Hub daemon</strong>: <code>opendevbrowser serve</code> process that owns the relay and enforces FIFO leases when hub mode is enabled.</li>\n<li><strong>Automation platform layer</strong>: provider runtime, macro resolver, tiered fingerprint controls, and combined debug trace workflows shared across tool/CLI/daemon surfaces.</li>\n</ul>\n<p>Current automation surface sizes:</p>\n<ul>\n<li>CLI commands: <code>55</code></li>\n<li>Plugin tools: <code>48</code></li>\n<li><code>/ops</code> command names: <code>38</code></li>\n</ul>\n<p>The shared runtime core is in <code>src/core/</code> and wires <code>BrowserManager</code>, <code>AnnotationManager</code>, <code>ScriptRunner</code>, <code>SkillLoader</code>, and <code>RelayServer</code>.</p>\n<p>Canonical inventory and channel contracts: <code>docs/SURFACE_REFERENCE.md</code>.</p>\n<p>Frontend architecture and generation flow are documented in <code>docs/FRONTEND.md</code>.</p>\n<p>The CLI installer attempts to set up daemon auto-start on first successful install</p>\n<p>(macOS LaunchAgent, Windows Task Scheduler). Unsupported platforms are skipped and continue without auto-start.</p>\n<h2>Component map</h2>\n<h3>Canonical ASCII map</h3>\n<pre><code>\n┌─────────────────────────────────────────────────────────────────┐\n\n│                      Distribution Layer                         │\n\n├──────────────────┬──────────────────┬──────────────────┬──────────────────────────┤\n\n│  OpenCode Plugin │       CLI        │    Hub Daemon    │    Chrome Extension       │\n\n│  (src/index.ts)  │ (src/cli/index)  │ (opendevbrowser  │   (extension/src/)        │\n\n│                  │                  │      serve)     │                           │\n\n└────────┬─────────┴────────┬─────────┴─────────┬────────┴──────────────┬────────────┘\n\n         │                  │                  │                       │\n\n         ▼                  ▼                  ▼                       ▼\n\n┌─────────────────────────────────────────────────────────────────┐\n\n│                    Core Runtime (src/core/)                    │\n\n│  bootstrap.ts → wires managers, injects ToolDeps              │\n\n└────────┬────────────────────────────────────────────────────────┘\n\n         │\n\n    ┌────┴────┬─────────────┬──────────────┬──────────────┬──────────────┐\n\n    ▼         ▼             ▼              ▼              ▼              ▼\n\n┌────────┐ ┌────────┐ ┌──────────┐ ┌────────────┐ ┌────────────┐ ┌────────────┐\n\n│Browser │ │Script  │ │Snapshot  │ │ Annotation │ │  Relay     │ │  Skills    │\n\n│Manager │ │Runner  │ │Pipeline  │ │  Manager   │ │  Server    │ │  Loader    │\n\n└───┬────┘ └────────┘ └──────────┘ └────────────┘ └─────┬──────┘ └────────────┘\n\n    │                                                  │\n\n    ▼                                                  ▼\n\n┌────────┐                                        ┌────────────┐\n\n│Target  │                                        │ Extension  │\n\n│Manager │                                        │ (WS relay) │\n\n└────────┘                                        └────────────┘\n\n</code></pre>\n<h3>Data flow</h3>\n<pre><code>\nTool Call → Zod Validation → Manager/Runner → CDP/Playwright → Response\n\n                                   ↓\n\n                            Snapshot (AX-tree → refs)\n\n                                   ↓\n\n                            Action (ref → backendNodeId → DOM)\n\n</code></pre>\n<h3>Detailed dependency map (Mermaid)</h3>\n<pre><code>\nflowchart LR\n\n  subgraph Distribution\n\n    Plugin[OpenCode Plugin]\n\n    CLI[CLI]\n\n    Hub[Hub Daemon]\n\n    Extension[Chrome Extension]\n\n    Frontend[Next.js Frontend]\n\n  end\n\n\n\n  subgraph Core\n\n    CoreBootstrap[Core Bootstrap]\n\n    BrowserManager[BrowserManager]\n\n    TargetManager[TargetManager]\n\n    ProviderRuntime[Provider Runtime]\n\n    MacroRegistry[Macro Registry]\n\n    Fingerprint[Fingerprint Tiers]\n\n    AnnotationManager[AnnotationManager]\n\n    ScriptRunner[ScriptRunner]\n\n    Snapshotter[Snapshot Pipeline]\n\n    Devtools[DevTools Trackers]\n\n    Exporter[Export Pipeline]\n\n    Relay[RelayServer]\n\n  end\n\n\n\n  Plugin --&gt; CoreBootstrap\n\n  CLI --&gt; CoreBootstrap\n\n  Hub --&gt; CoreBootstrap\n\n  Extension --&gt; Relay\n\n  Frontend --&gt; CLI\n\n  Frontend --&gt; Docs[docs/* + CHANGELOG + skills/*/SKILL.md]\n\n\n\n  CoreBootstrap --&gt; BrowserManager\n\n  BrowserManager --&gt; TargetManager\n\n  CoreBootstrap --&gt; ProviderRuntime\n\n  CoreBootstrap --&gt; MacroRegistry\n\n  BrowserManager --&gt; Fingerprint\n\n  CoreBootstrap --&gt; AnnotationManager\n\n  AnnotationManager --&gt; BrowserManager\n\n  AnnotationManager --&gt; Relay\n\n  CoreBootstrap --&gt; ScriptRunner\n\n  CoreBootstrap --&gt; Snapshotter\n\n  CoreBootstrap --&gt; Devtools\n\n  CoreBootstrap --&gt; Exporter\n\n  CoreBootstrap --&gt; Relay\n\n</code></pre>\n<h2>Runtime flows</h2>\n<h3>1) Plugin tool invocation</h3>\n<ol>\n<li>OpenCode calls a tool like <code>opendevbrowser_launch</code>.</li>\n<li>Tool validates inputs with Zod and delegates to <code>BrowserManager</code>.</li>\n<li><code>BrowserManager</code> launches or connects to a Chrome instance.</li>\n<li>Optional automation flows route through provider runtime (<code>search</code>/<code>fetch</code>/<code>crawl</code>/<code>post</code>) and macro resolution.</li>\n<li>Tool returns structured response with session id, trace-aware diagnostics, and warnings.</li>\n</ol>\n<h3>2) CLI automation (daemon mode)</h3>\n<pre><code>\nsequenceDiagram\n\n  actor User\n\n  participant CLI\n\n  participant Daemon\n\n  participant Core\n\n  participant Relay\n\n  participant Browser\n\n\n\n  User-&gt;&gt;CLI: opendevbrowser serve\n\n  CLI-&gt;&gt;Daemon: start local server (127.0.0.1) and relay\n\n  Note over Daemon,Relay: Hub daemon owns relay + FIFO leases\n\n  Daemon-&gt;&gt;Core: create core runtime\n\n  Core-&gt;&gt;Relay: start relay server\n\n  User-&gt;&gt;CLI: opendevbrowser launch\n\n  CLI-&gt;&gt;Daemon: POST /command (Bearer token)\n\n  Daemon-&gt;&gt;Core: session.launch\n\n  Core-&gt;&gt;Browser: launch or connect\n\n  Core--&gt;&gt;Daemon: session id\n\n  Daemon--&gt;&gt;CLI: result\n\n  User-&gt;&gt;CLI: opendevbrowser rpc --unsafe-internal --name &lt;command&gt;\n\n  CLI-&gt;&gt;Daemon: POST /command (raw internal command name + params, bypasses stable CLI surface)\n\n  Daemon--&gt;&gt;CLI: raw command result\n\n</code></pre>\n<p><code>rpc</code> is intentionally CLI-only and internal. It can invoke unstable daemon command paths and should be treated as a last-resort power-user interface.</p>\n<h3>3) Extension relay mode</h3>\n<pre><code>\nsequenceDiagram\n\n  actor User\n\n  participant Extension\n\n  participant Hub\n\n  participant Relay\n\n  participant Browser\n\n  participant Tools\n\n\n\n  User-&gt;&gt;Extension: Enable auto-connect\n\n  Extension-&gt;&gt;Relay: GET /config (extension origin or loopback no-Origin)\n\n  Extension-&gt;&gt;Relay: GET /pair (extension origin or loopback no-Origin)\n\n  Extension-&gt;&gt;Relay: WS /extension\n\n  Tools-&gt;&gt;Relay: GET /config (loopback)\n\n  Tools-&gt;&gt;Relay: GET /pair (when pairing required, loopback)\n\n  Tools-&gt;&gt;Hub: acquire binding/lease when required\n\n  Tools-&gt;&gt;Relay: WS /ops?token=...\n\n  Tools-&gt;&gt;Relay: WS /annotation?token=... (annotate relay)\n\n  Relay-&gt;&gt;Extension: forward ops envelopes\n\n  Extension-&gt;&gt;Browser: execute CDP/debugger commands\n\n  Browser--&gt;&gt;Extension: CDP events/results\n\n  Extension--&gt;&gt;Relay: relay events/results\n\n  Relay--&gt;&gt;Tools: forward events/results\n\n</code></pre>\n<h3>4) Frontend docs/content generation</h3>\n<pre><code>\nsequenceDiagram\n\n  participant Sources as docs/* + CHANGELOG + skills/*/SKILL.md\n\n  participant Generator as frontend/scripts/generate-docs.mjs\n\n  participant Content as frontend/src/content/*\n\n  participant Next as frontend/src/app/docs/*\n\n\n\n  Sources-&gt;&gt;Generator: markdown and metadata inputs\n\n  Generator-&gt;&gt;Content: pages.json + docs-manifest.json + metrics.json + roadmap.json\n\n  Next-&gt;&gt;Content: render docs gateway and reference routes\n\n</code></pre>\n<h3>Session modes</h3>\n<ul>\n<li><code>extension</code>: attach to an existing tab via the Chrome extension relay.</li>\n<li><code>managed</code>: launch and manage a Chrome instance via Playwright (headed by default).</li>\n<li><code>cdpConnect</code>: attach to an existing Chrome via CDP (<code>/json/version</code>).</li>\n<li><code>connect</code> routing: local relay WS endpoints (for example <code>ws://127.0.0.1:&lt;relayPort&gt;</code> or <code>/ops</code>) are normalized to <code>/ops</code> and routed via the relay (<code>extension</code> mode). Legacy <code>/cdp</code> requires <code>--extension-legacy</code>.</li>\n<li>Launch defaults to <code>extension</code> when available; managed/CDPConnect require explicit user choice.</li>\n<li>Extension relay requires <strong>Chrome 125+</strong> and uses flat-session routing with DebuggerSession <code>sessionId</code>.</li>\n<li>Hub mode supports multi-client access. <code>/ops</code> accepts multiple clients, while FIFO binding/lease coordination applies to legacy <code>/cdp</code> and protected extension-session command paths.</li>\n</ul>\n<h3>Relay channel contracts</h3>\n<ul>\n<li><code>/ops</code> is the default high-level extension channel with explicit commands (<code>session.*</code>, <code>targets.*</code>, <code>page.*</code>, <code>nav.*</code>, <code>interact.*</code>, <code>dom.*</code>, <code>export.*</code>, <code>devtools.*</code>).</li>\n<li><code>/ops</code> envelopes: <code>ops_hello</code>, <code>ops_request</code>, <code>ops_response</code>, <code>ops_error</code>, <code>ops_event</code>, <code>ops_chunk</code>, <code>ops_ping</code>, <code>ops_pong</code>.</li>\n<li><code>/cdp</code> is legacy and forwards raw CDP commands via <code>forwardCDPCommand</code> envelopes (<code>id</code>, <code>method</code>, <code>params</code>, optional <code>sessionId</code>) and relays events/responses back.</li>\n<li><code>/annotation</code> remains a dedicated channel for annotation command/event/response flow.</li>\n<li>Full command names and payload examples are documented in <code>docs/SURFACE_REFERENCE.md</code>.</li>\n</ul>\n<h3>Multi-tab concurrency contract</h3>\n<ul>\n<li>Canonical spec: <code>docs/MULTITAB_PARALLEL_OPERATIONS_SPEC.md</code>.</li>\n<li>Execution key: <code>ExecutionKey = (sessionId, targetId)</code>.</li>\n<li>Command taxonomy:</li>\n<li><code>TargetScoped</code>: <code>goto</code>, <code>wait</code>, <code>snapshot</code>, interaction commands, DOM commands, <code>page.screenshot</code>, export/devtools target-bound commands.</li>\n<li><code>SessionStructural</code>: connect/disconnect, target/page create/close/select/list.</li>\n<li>Scheduler guarantees:</li>\n<li>Same target: strict FIFO.</li>\n<li>Different targets in one session: parallel up to governor <code>effectiveParallelCap</code>.</li>\n<li>Governor policy source of truth: <code>src/config.ts</code> (<code>parallelism</code> block), passed to extension <code>/ops</code> at <code>session.connect</code>.</li>\n<li>Legacy <code>/cdp</code> remains compatibility-only (<code>effectiveParallelCap=1</code>).</li>\n<li>Extension headless is unsupported by contract; headless extension launch/connect intent fails with <code>unsupported_mode</code>.</li>\n<li>Declared intentional mismatches are registry-bound in <code>docs/PARITY_DECLARED_DIVERGENCES.md</code>; undeclared parity mismatches fail gates.</li>\n</ul>\n<h3>Automation platform surfaces</h3>\n<ul>\n<li>Provider runtime supports source policy routing (<code>auto|web|community|social|shopping|all</code>) with per-provider timeouts, retries, circuit-breaker state, and partial-success envelopes.</li>\n<li>Workflow wrappers expose finalized skill-aligned entrypoints:</li>\n<li><code>research.run</code> / <code>opendevbrowser_research_run</code> / <code>opendevbrowser research run</code></li>\n<li><code>shopping.run</code> / <code>opendevbrowser_shopping_run</code> / <code>opendevbrowser shopping run</code></li>\n<li><code>product.video.run</code> / <code>opendevbrowser_product_video_run</code> / <code>opendevbrowser product-video run</code></li>\n<li>Workflow runtime primitives are layered as:</li>\n<li><code>timebox</code> (strict <code>days|from|to</code> resolution)</li>\n<li><code>orchestrator</code> (source/provider fanout + partial-failure accumulation)</li>\n<li><code>enrichment</code> (engagement/recency/date-confidence)</li>\n<li><code>renderer</code> (<code>compact|json|md|context|path</code>)</li>\n<li><code>artifact writer</code> (owner-only paths, TTL metadata, cleanup support)</li>\n<li>Macro engine resolves <code>@macro(...)</code> expressions into provider operations (<code>src/macros/*</code>) and is exposed through tool/CLI/daemon (<code>macro_resolve</code>, <code>macro-resolve</code>, <code>macro.resolve</code>) with resolve-only and execute modes.</li>\n<li>Execute-mode macro responses keep existing shapes and add metadata fields: <code>meta.tier.selected</code>, <code>meta.tier.reasonCode</code>, <code>meta.provenance.provider</code>, <code>meta.provenance.retrievalPath</code>, and <code>meta.provenance.retrievedAt</code>.</li>\n<li>Diagnostics include console/network/exception trackers and a combined debug bundle endpoint (<code>debug_trace_snapshot</code>, <code>debug-trace-snapshot</code>, <code>devtools.debugTraceSnapshot</code>).</li>\n<li>Legal/compliance gating for scrape-first adapters is enforced with per-provider review checklists (review date, allowed surfaces, prohibited flows, reviewer, expiry, signed-off status) and blocks expired/invalid enablement.</li>\n<li>Session coherence includes cookie import validation and tiered fingerprint controls:</li>\n<li>Provider cookie policy defaults are configurable via <code>providers.cookiePolicy</code> (<code>off|auto|required</code>) and <code>providers.cookieSource</code> (<code>file|env|inline</code>).</li>\n<li>Workflow wrappers expose per-run overrides: <code>useCookies</code> and <code>cookiePolicyOverride</code>.</li>\n<li>Effective policy is deterministic: override &gt; <code>useCookies</code> &gt; config default.</li>\n<li><code>required</code> policy can fail fast with <code>reasonCode=auth_required</code> when cookie load/import/verification cannot establish authenticated state.</li>\n<li>Workflow metrics include cookie diagnostics at <code>meta.metrics.cookie_diagnostics</code> and <code>meta.metrics.cookieDiagnostics</code>.</li>\n<li>Tier 1: coherence checks/warnings (default on)</li>\n<li>Tier 2: runtime hardening + rotation policy (default on, continuous signals)</li>\n<li>Tier 3: adaptive canary/fallback track (default on, continuous signals)</li>\n<li>Structured JSON logging/audit provides request correlation (<code>requestId</code>) and redaction-safe audit entries for write paths.</li>\n</ul>\n<h2>Configuration and state</h2>\n<ul>\n<li><strong>Plugin config</strong>: <code>~/.config/opencode/opendevbrowser.jsonc</code> (optional).</li>\n<li><strong>Daemon metadata</strong>: <code>~/.cache/opendevbrowser/daemon.json</code> (port, token, pid).</li>\n<li><strong>Daemon status</strong>: <code>/status</code> is the source of truth; cached metadata may be stale.</li>\n<li><strong>Daemon config</strong>: <code>daemonPort</code>/<code>daemonToken</code> persisted in <code>opendevbrowser.jsonc</code> for hub discovery.</li>\n<li><strong>Extension storage</strong>: <code>chrome.storage.local</code> (relay port, token, auto-connect).</li>\n<li><strong>Frontend generated content</strong>: <code>frontend/src/content/*</code> (generated docs/metrics/roadmap JSON).</li>\n</ul>\n<p>Default extension values:</p>\n<ul>\n<li><code>relayPort</code>: <code>8787</code></li>\n<li><code>autoConnect</code>: <code>true</code></li>\n<li><code>autoPair</code>: <code>true</code></li>\n<li><code>pairingEnabled</code>: <code>true</code></li>\n<li><code>pairingToken</code>: <code>null</code> (fetched via <code>/pair</code>)</li>\n<li>Background auto-retry/backoff uses <code>chrome.alarms</code> for extension auto-connect retries (<code>/config</code> + <code>/pair</code>) when the relay is unreachable.</li>\n</ul>\n<h2>Security controls</h2>\n<ul>\n<li><strong>Local-only CDP</strong> by default; non-local requires opt-in config.</li>\n<li><strong>Relay binding</strong>: <code>127.0.0.1</code> only, with token-based pairing.</li>\n<li><strong>Ops auth</strong>: <code>/ops</code> requires <code>?token=&lt;relayToken&gt;</code> when pairing is enabled.</li>\n<li><strong>CDP auth</strong>: <code>/cdp</code> requires <code>?token=&lt;relayToken&gt;</code> when pairing is enabled (legacy).</li>\n<li><strong>Annotation auth</strong>: <code>/annotation</code> requires <code>?token=&lt;relayToken&gt;</code> when pairing is enabled.</li>\n<li><strong>Origin enforcement</strong>: <code>/extension</code> requires <code>chrome-extension://</code> origin; <code>/config</code>, <code>/status</code>, <code>/pair</code> allow extension origins and loopback no-Origin (including <code>Origin: null</code>), and reject explicit non-extension origins.</li>\n<li><strong>PNA/CORS</strong>: preflights include <code>Access-Control-Allow-Private-Network: true</code> when requested.</li>\n<li><strong>HTTP rate limiting</strong>: <code>/config</code>, <code>/status</code>, <code>/pair</code> are rate-limited per IP.</li>\n<li><strong>Timing-safe compare</strong>: pairing tokens checked with <code>crypto.timingSafeEqual</code>.</li>\n<li><strong>Output redaction</strong>: DevTools output strips sensitive tokens by default.</li>\n<li><strong>Sanitized export</strong>: export pipeline removes scripts, handlers, and unsafe URLs.</li>\n</ul>\n<h2>Extension relay routing (flat sessions)</h2>\n<p>Extension relay mode uses <strong>flat CDP sessions (Chrome 125+)</strong>. The extension CDP router:</p>\n<ul>\n<li>Lists top-level tabs and child targets for discovery.</li>\n<li>Auto-attaches child targets recursively (workers/OOPIF) and surfaces them in <code>Target.getTargets</code> and <code>Target.getTargetInfo</code>.</li>\n<li>Routes all commands and events by DebuggerSession <code>sessionId</code> (no <code>Target.sendMessageToTarget</code>).</li>\n<li>Maintains root vs child mappings in <code>TargetSessionMap</code> to route each <code>sessionId</code> to the correct <code>tabId</code>.</li>\n<li>Tracks a primary tab for relay handshake/diagnostics without disconnecting other tabs.</li>\n<li>Annotation relay uses a dedicated <code>/annotation</code> websocket and <code>annotationCommand</code>/<code>annotationResponse</code> messages.</li>\n</ul>\n<p>When hub mode is enabled, the hub daemon is the <strong>sole relay owner</strong> and enforces a FIFO lease queue for multi-client safety. There is no local relay fallback in hub mode.</p>\n<h2>Testing and verification</h2>\n<ul>\n<li><strong>Unit/integration tests</strong> via Vitest (<code>npm run test</code>), coverage &gt;=97%.</li>\n<li><strong>Extension build</strong> via <code>npm run extension:build</code>.</li>\n<li><strong>CLI build</strong> via <code>npm run build</code>.</li>\n<li><strong>Frontend checks</strong> via <code>cd frontend &amp;&amp; npm run lint &amp;&amp; npm run typecheck &amp;&amp; npm run build</code>.</li>\n<li><strong>CLI inventory/help parity check</strong> via <code>npx opendevbrowser --help</code> and <code>npx opendevbrowser help</code>.</li>\n<li><strong>Parity gate</strong> via <code>tests/parity-matrix.test.ts</code> (CLI/tool/runtime surface checks + mode coverage).</li>\n<li><strong>Provider performance gate</strong> via <code>tests/providers-performance-gate.test.ts</code> (deterministic fixture SLO checks).</li>\n<li><strong>Release checklist</strong> in <code>docs/RELEASE_PARITY_CHECKLIST.md</code>.</li>\n<li><strong>Benchmark fixture manifest</strong> in <code>docs/benchmarks/provider-fixtures.md</code>.</li>\n<li><strong>First-run onboarding checklist</strong> in <code>docs/FIRST_RUN_ONBOARDING.md</code>.</li>\n</ul>\n<h2>Skill artifacts and operational gates</h2>\n<p><code>opendevbrowser-best-practices</code> includes codified operational artifacts under</p>\n<p><code>skills/opendevbrowser-best-practices/artifacts/</code>:</p>\n<ul>\n<li><code>provider-workflows.md</code></li>\n<li><code>parity-gates.md</code></li>\n<li><code>debug-trace-playbook.md</code></li>\n<li><code>fingerprint-tiers.md</code></li>\n<li><code>macro-workflows.md</code></li>\n<li><code>command-channel-reference.md</code></li>\n</ul>\n<p>Template assets for parity and channel checks live under</p>\n<p><code>skills/opendevbrowser-best-practices/assets/templates/</code>.</p>\n<p>Skill install/discovery sync covers <code>opencode</code>, <code>codex</code>, <code>claudecode</code>, and <code>ampcli</code></p>\n<p>ecosystems (with legacy <code>claude</code>/<code>amp</code> aliases preserved), and path discovery is documented</p>\n<p>in <code>README.md</code> and <code>docs/CLI.md</code>.</p>\n<p>Validation script:</p>\n<pre><code>\n./skills/opendevbrowser-best-practices/scripts/validate-skill-assets.sh\n\n</code></pre>\n<h2>Key directories</h2>\n<ul>\n<li><code>src/core/</code>: shared runtime bootstrap.</li>\n<li><code>src/browser/</code>: <code>BrowserManager</code>, <code>TargetManager</code>, session lifecycle.</li>\n<li><code>src/browser/fingerprint/</code>: Tier 1/2/3 fingerprint policy + adaptive controls.</li>\n<li><code>src/providers/</code>: provider contracts, registry, runtime policy, and first-party adapters.</li>\n<li><code>src/providers/workflows.ts</code>: research/shopping/product-video orchestrators and compliance/alert gates.</li>\n<li><code>src/providers/timebox.ts</code>: strict timebox resolver and filtering primitives.</li>\n<li><code>src/providers/{renderer.ts,artifacts.ts,enrichment.ts}</code>: render modes, artifact lifecycle, and enrichment scores.</li>\n<li><code>src/macros/</code>: macro parser/registry and pack definitions.</li>\n<li><code>src/devtools/</code>: console/network/exception trackers and debug bundle channels.</li>\n<li><code>src/tools/</code>: tool definitions and response shaping.</li>\n<li><code>src/relay/</code>: relay server and protocol types.</li>\n<li><code>src/cli/</code>: CLI commands, daemon, and installers.</li>\n<li><code>src/cli/commands/artifacts.ts</code>: artifact lifecycle cleanup (<code>artifacts cleanup --expired-only</code>).</li>\n<li><code>extension/</code>: Chrome extension UI and background logic.</li>\n<li><code>frontend/</code>: marketing/docs website and generated content pipeline.</li>\n<li><code>docs/</code>: plans, architecture, and operational guidance.</li>\n</ul>",
      "codeSample": "npx opendevbrowser status"
    },
    "tools/opendevbrowser_launch": {
      "category": "tools",
      "slug": "opendevbrowser_launch",
      "title": "opendevbrowser_launch",
      "summary": "Launch a browser session (extension relay first) and return a sessionId.",
      "sourcePath": "src/tools/launch.ts",
      "editUrl": "https://github.com/freshtechbro/opendevbrowser/edit/main/src/tools/launch.ts",
      "contentHtml": "<h2>Overview</h2>\n<p>Launch a browser session (extension relay first) and return a sessionId.</p>\n<h2>Runtime mapping</h2>\n<ul>\n<li>Tool id: opendevbrowser_launch</li>\n<li>Source: src/tools/launch.ts</li>\n<li>Suggested CLI surface: launch</li>\n</ul>\n<h2>Example</h2>\n<pre><code>\n\n\nnpx opendevbrowser launch --help\n\n\n\n</code></pre>",
      "codeSample": "npx opendevbrowser launch --help"
    },
    "tools/opendevbrowser_connect": {
      "category": "tools",
      "slug": "opendevbrowser_connect",
      "title": "opendevbrowser_connect",
      "summary": "Connect to an existing Chrome CDP endpoint or extension relay.",
      "sourcePath": "src/tools/connect.ts",
      "editUrl": "https://github.com/freshtechbro/opendevbrowser/edit/main/src/tools/connect.ts",
      "contentHtml": "<h2>Overview</h2>\n<p>Connect to an existing Chrome CDP endpoint or extension relay.</p>\n<h2>Runtime mapping</h2>\n<ul>\n<li>Tool id: opendevbrowser_connect</li>\n<li>Source: src/tools/connect.ts</li>\n<li>Suggested CLI surface: connect</li>\n</ul>\n<h2>Example</h2>\n<pre><code>\n\n\nnpx opendevbrowser connect --help\n\n\n\n</code></pre>",
      "codeSample": "npx opendevbrowser connect --help"
    },
    "tools/opendevbrowser_disconnect": {
      "category": "tools",
      "slug": "opendevbrowser_disconnect",
      "title": "opendevbrowser_disconnect",
      "summary": "Disconnect a browser session.",
      "sourcePath": "src/tools/disconnect.ts",
      "editUrl": "https://github.com/freshtechbro/opendevbrowser/edit/main/src/tools/disconnect.ts",
      "contentHtml": "<h2>Overview</h2>\n<p>Disconnect a browser session.</p>\n<h2>Runtime mapping</h2>\n<ul>\n<li>Tool id: opendevbrowser_disconnect</li>\n<li>Source: src/tools/disconnect.ts</li>\n<li>Suggested CLI surface: disconnect</li>\n</ul>\n<h2>Example</h2>\n<pre><code>\n\n\nnpx opendevbrowser disconnect --help\n\n\n\n</code></pre>",
      "codeSample": "npx opendevbrowser disconnect --help"
    },
    "tools/opendevbrowser_status": {
      "category": "tools",
      "slug": "opendevbrowser_status",
      "title": "opendevbrowser_status",
      "summary": "Get daemon or session status.",
      "sourcePath": "src/tools/status.ts",
      "editUrl": "https://github.com/freshtechbro/opendevbrowser/edit/main/src/tools/status.ts",
      "contentHtml": "<h2>Overview</h2>\n<p>Get daemon or session status.</p>\n<h2>Runtime mapping</h2>\n<ul>\n<li>Tool id: opendevbrowser_status</li>\n<li>Source: src/tools/status.ts</li>\n<li>Suggested CLI surface: status</li>\n</ul>\n<h2>Example</h2>\n<pre><code>\n\n\nnpx opendevbrowser status --help\n\n\n\n</code></pre>",
      "codeSample": "npx opendevbrowser status --help"
    },
    "tools/opendevbrowser_targets_list": {
      "category": "tools",
      "slug": "opendevbrowser_targets_list",
      "title": "opendevbrowser_targets_list",
      "summary": "List targets (tabs) in the current session.",
      "sourcePath": "src/tools/targets_list.ts",
      "editUrl": "https://github.com/freshtechbro/opendevbrowser/edit/main/src/tools/targets_list.ts",
      "contentHtml": "<h2>Overview</h2>\n<p>List targets (tabs) in the current session.</p>\n<h2>Runtime mapping</h2>\n<ul>\n<li>Tool id: opendevbrowser_targets_list</li>\n<li>Source: src/tools/targets_list.ts</li>\n<li>Suggested CLI surface: targets-list</li>\n</ul>\n<h2>Example</h2>\n<pre><code>\n\n\nnpx opendevbrowser targets-list --help\n\n\n\n</code></pre>",
      "codeSample": "npx opendevbrowser targets-list --help"
    },
    "tools/opendevbrowser_target_use": {
      "category": "tools",
      "slug": "opendevbrowser_target_use",
      "title": "opendevbrowser_target_use",
      "summary": "Set the active target (tab).",
      "sourcePath": "src/tools/target_use.ts",
      "editUrl": "https://github.com/freshtechbro/opendevbrowser/edit/main/src/tools/target_use.ts",
      "contentHtml": "<h2>Overview</h2>\n<p>Set the active target (tab).</p>\n<h2>Runtime mapping</h2>\n<ul>\n<li>Tool id: opendevbrowser_target_use</li>\n<li>Source: src/tools/target_use.ts</li>\n<li>Suggested CLI surface: target-use</li>\n</ul>\n<h2>Example</h2>\n<pre><code>\n\n\nnpx opendevbrowser target-use --help\n\n\n\n</code></pre>",
      "codeSample": "npx opendevbrowser target-use --help"
    },
    "tools/opendevbrowser_target_new": {
      "category": "tools",
      "slug": "opendevbrowser_target_new",
      "title": "opendevbrowser_target_new",
      "summary": "Open a new target (tab).",
      "sourcePath": "src/tools/target_new.ts",
      "editUrl": "https://github.com/freshtechbro/opendevbrowser/edit/main/src/tools/target_new.ts",
      "contentHtml": "<h2>Overview</h2>\n<p>Open a new target (tab).</p>\n<h2>Runtime mapping</h2>\n<ul>\n<li>Tool id: opendevbrowser_target_new</li>\n<li>Source: src/tools/target_new.ts</li>\n<li>Suggested CLI surface: target-new</li>\n</ul>\n<h2>Example</h2>\n<pre><code>\n\n\nnpx opendevbrowser target-new --help\n\n\n\n</code></pre>",
      "codeSample": "npx opendevbrowser target-new --help"
    },
    "tools/opendevbrowser_target_close": {
      "category": "tools",
      "slug": "opendevbrowser_target_close",
      "title": "opendevbrowser_target_close",
      "summary": "Close a target (tab).",
      "sourcePath": "src/tools/target_close.ts",
      "editUrl": "https://github.com/freshtechbro/opendevbrowser/edit/main/src/tools/target_close.ts",
      "contentHtml": "<h2>Overview</h2>\n<p>Close a target (tab).</p>\n<h2>Runtime mapping</h2>\n<ul>\n<li>Tool id: opendevbrowser_target_close</li>\n<li>Source: src/tools/target_close.ts</li>\n<li>Suggested CLI surface: target-close</li>\n</ul>\n<h2>Example</h2>\n<pre><code>\n\n\nnpx opendevbrowser target-close --help\n\n\n\n</code></pre>",
      "codeSample": "npx opendevbrowser target-close --help"
    },
    "tools/opendevbrowser_page": {
      "category": "tools",
      "slug": "opendevbrowser_page",
      "title": "opendevbrowser_page",
      "summary": "Open or focus a named page, optionally navigating to a URL.",
      "sourcePath": "src/tools/page.ts",
      "editUrl": "https://github.com/freshtechbro/opendevbrowser/edit/main/src/tools/page.ts",
      "contentHtml": "<h2>Overview</h2>\n<p>Open or focus a named page, optionally navigating to a URL.</p>\n<h2>Runtime mapping</h2>\n<ul>\n<li>Tool id: opendevbrowser_page</li>\n<li>Source: src/tools/page.ts</li>\n<li>Suggested CLI surface: page</li>\n</ul>\n<h2>Example</h2>\n<pre><code>\n\n\nnpx opendevbrowser page --help\n\n\n\n</code></pre>",
      "codeSample": "npx opendevbrowser page --help"
    },
    "tools/opendevbrowser_list": {
      "category": "tools",
      "slug": "opendevbrowser_list",
      "title": "opendevbrowser_list",
      "summary": "List named pages in the current session.",
      "sourcePath": "src/tools/list.ts",
      "editUrl": "https://github.com/freshtechbro/opendevbrowser/edit/main/src/tools/list.ts",
      "contentHtml": "<h2>Overview</h2>\n<p>List named pages in the current session.</p>\n<h2>Runtime mapping</h2>\n<ul>\n<li>Tool id: opendevbrowser_list</li>\n<li>Source: src/tools/list.ts</li>\n<li>Suggested CLI surface: list</li>\n</ul>\n<h2>Example</h2>\n<pre><code>\n\n\nnpx opendevbrowser list --help\n\n\n\n</code></pre>",
      "codeSample": "npx opendevbrowser list --help"
    },
    "tools/opendevbrowser_close": {
      "category": "tools",
      "slug": "opendevbrowser_close",
      "title": "opendevbrowser_close",
      "summary": "Close a named page within the current session.",
      "sourcePath": "src/tools/close.ts",
      "editUrl": "https://github.com/freshtechbro/opendevbrowser/edit/main/src/tools/close.ts",
      "contentHtml": "<h2>Overview</h2>\n<p>Close a named page within the current session.</p>\n<h2>Runtime mapping</h2>\n<ul>\n<li>Tool id: opendevbrowser_close</li>\n<li>Source: src/tools/close.ts</li>\n<li>Suggested CLI surface: close</li>\n</ul>\n<h2>Example</h2>\n<pre><code>\n\n\nnpx opendevbrowser close --help\n\n\n\n</code></pre>",
      "codeSample": "npx opendevbrowser close --help"
    },
    "tools/opendevbrowser_goto": {
      "category": "tools",
      "slug": "opendevbrowser_goto",
      "title": "opendevbrowser_goto",
      "summary": "Navigate the active target to a URL.",
      "sourcePath": "src/tools/goto.ts",
      "editUrl": "https://github.com/freshtechbro/opendevbrowser/edit/main/src/tools/goto.ts",
      "contentHtml": "<h2>Overview</h2>\n<p>Navigate the active target to a URL.</p>\n<h2>Runtime mapping</h2>\n<ul>\n<li>Tool id: opendevbrowser_goto</li>\n<li>Source: src/tools/goto.ts</li>\n<li>Suggested CLI surface: goto</li>\n</ul>\n<h2>Example</h2>\n<pre><code>\n\n\nnpx opendevbrowser goto --help\n\n\n\n</code></pre>",
      "codeSample": "npx opendevbrowser goto --help"
    },
    "tools/opendevbrowser_wait": {
      "category": "tools",
      "slug": "opendevbrowser_wait",
      "title": "opendevbrowser_wait",
      "summary": "Wait for a load state or a ref state.",
      "sourcePath": "src/tools/wait.ts",
      "editUrl": "https://github.com/freshtechbro/opendevbrowser/edit/main/src/tools/wait.ts",
      "contentHtml": "<h2>Overview</h2>\n<p>Wait for a load state or a ref state.</p>\n<h2>Runtime mapping</h2>\n<ul>\n<li>Tool id: opendevbrowser_wait</li>\n<li>Source: src/tools/wait.ts</li>\n<li>Suggested CLI surface: wait</li>\n</ul>\n<h2>Example</h2>\n<pre><code>\n\n\nnpx opendevbrowser wait --help\n\n\n\n</code></pre>",
      "codeSample": "npx opendevbrowser wait --help"
    },
    "tools/opendevbrowser_snapshot": {
      "category": "tools",
      "slug": "opendevbrowser_snapshot",
      "title": "opendevbrowser_snapshot",
      "summary": "Capture a snapshot of the current page and return refs.",
      "sourcePath": "src/tools/snapshot.ts",
      "editUrl": "https://github.com/freshtechbro/opendevbrowser/edit/main/src/tools/snapshot.ts",
      "contentHtml": "<h2>Overview</h2>\n<p>Capture a snapshot of the current page and return refs.</p>\n<h2>Runtime mapping</h2>\n<ul>\n<li>Tool id: opendevbrowser_snapshot</li>\n<li>Source: src/tools/snapshot.ts</li>\n<li>Suggested CLI surface: snapshot</li>\n</ul>\n<h2>Example</h2>\n<pre><code>\n\n\nnpx opendevbrowser snapshot --help\n\n\n\n</code></pre>",
      "codeSample": "npx opendevbrowser snapshot --help"
    },
    "tools/opendevbrowser_click": {
      "category": "tools",
      "slug": "opendevbrowser_click",
      "title": "opendevbrowser_click",
      "summary": "Click a referenced element.",
      "sourcePath": "src/tools/click.ts",
      "editUrl": "https://github.com/freshtechbro/opendevbrowser/edit/main/src/tools/click.ts",
      "contentHtml": "<h2>Overview</h2>\n<p>Click a referenced element.</p>\n<h2>Runtime mapping</h2>\n<ul>\n<li>Tool id: opendevbrowser_click</li>\n<li>Source: src/tools/click.ts</li>\n<li>Suggested CLI surface: click</li>\n</ul>\n<h2>Example</h2>\n<pre><code>\n\n\nnpx opendevbrowser click --help\n\n\n\n</code></pre>",
      "codeSample": "npx opendevbrowser click --help"
    },
    "tools/opendevbrowser_hover": {
      "category": "tools",
      "slug": "opendevbrowser_hover",
      "title": "opendevbrowser_hover",
      "summary": "Hover over an element by ref.",
      "sourcePath": "src/tools/hover.ts",
      "editUrl": "https://github.com/freshtechbro/opendevbrowser/edit/main/src/tools/hover.ts",
      "contentHtml": "<h2>Overview</h2>\n<p>Hover over an element by ref.</p>\n<h2>Runtime mapping</h2>\n<ul>\n<li>Tool id: opendevbrowser_hover</li>\n<li>Source: src/tools/hover.ts</li>\n<li>Suggested CLI surface: hover</li>\n</ul>\n<h2>Example</h2>\n<pre><code>\n\n\nnpx opendevbrowser hover --help\n\n\n\n</code></pre>",
      "codeSample": "npx opendevbrowser hover --help"
    },
    "tools/opendevbrowser_press": {
      "category": "tools",
      "slug": "opendevbrowser_press",
      "title": "opendevbrowser_press",
      "summary": "Press a keyboard key, optionally focusing a ref first.",
      "sourcePath": "src/tools/press.ts",
      "editUrl": "https://github.com/freshtechbro/opendevbrowser/edit/main/src/tools/press.ts",
      "contentHtml": "<h2>Overview</h2>\n<p>Press a keyboard key, optionally focusing a ref first.</p>\n<h2>Runtime mapping</h2>\n<ul>\n<li>Tool id: opendevbrowser_press</li>\n<li>Source: src/tools/press.ts</li>\n<li>Suggested CLI surface: press</li>\n</ul>\n<h2>Example</h2>\n<pre><code>\n\n\nnpx opendevbrowser press --help\n\n\n\n</code></pre>",
      "codeSample": "npx opendevbrowser press --help"
    },
    "tools/opendevbrowser_check": {
      "category": "tools",
      "slug": "opendevbrowser_check",
      "title": "opendevbrowser_check",
      "summary": "Check a checkbox or toggle by ref.",
      "sourcePath": "src/tools/check.ts",
      "editUrl": "https://github.com/freshtechbro/opendevbrowser/edit/main/src/tools/check.ts",
      "contentHtml": "<h2>Overview</h2>\n<p>Check a checkbox or toggle by ref.</p>\n<h2>Runtime mapping</h2>\n<ul>\n<li>Tool id: opendevbrowser_check</li>\n<li>Source: src/tools/check.ts</li>\n<li>Suggested CLI surface: check</li>\n</ul>\n<h2>Example</h2>\n<pre><code>\n\n\nnpx opendevbrowser check --help\n\n\n\n</code></pre>",
      "codeSample": "npx opendevbrowser check --help"
    },
    "tools/opendevbrowser_uncheck": {
      "category": "tools",
      "slug": "opendevbrowser_uncheck",
      "title": "opendevbrowser_uncheck",
      "summary": "Uncheck a checkbox or toggle by ref.",
      "sourcePath": "src/tools/uncheck.ts",
      "editUrl": "https://github.com/freshtechbro/opendevbrowser/edit/main/src/tools/uncheck.ts",
      "contentHtml": "<h2>Overview</h2>\n<p>Uncheck a checkbox or toggle by ref.</p>\n<h2>Runtime mapping</h2>\n<ul>\n<li>Tool id: opendevbrowser_uncheck</li>\n<li>Source: src/tools/uncheck.ts</li>\n<li>Suggested CLI surface: uncheck</li>\n</ul>\n<h2>Example</h2>\n<pre><code>\n\n\nnpx opendevbrowser uncheck --help\n\n\n\n</code></pre>",
      "codeSample": "npx opendevbrowser uncheck --help"
    },
    "tools/opendevbrowser_type": {
      "category": "tools",
      "slug": "opendevbrowser_type",
      "title": "opendevbrowser_type",
      "summary": "Type text into a referenced input.",
      "sourcePath": "src/tools/type.ts",
      "editUrl": "https://github.com/freshtechbro/opendevbrowser/edit/main/src/tools/type.ts",
      "contentHtml": "<h2>Overview</h2>\n<p>Type text into a referenced input.</p>\n<h2>Runtime mapping</h2>\n<ul>\n<li>Tool id: opendevbrowser_type</li>\n<li>Source: src/tools/type.ts</li>\n<li>Suggested CLI surface: type</li>\n</ul>\n<h2>Example</h2>\n<pre><code>\n\n\nnpx opendevbrowser type --help\n\n\n\n</code></pre>",
      "codeSample": "npx opendevbrowser type --help"
    },
    "tools/opendevbrowser_select": {
      "category": "tools",
      "slug": "opendevbrowser_select",
      "title": "opendevbrowser_select",
      "summary": "Select options in a referenced select element.",
      "sourcePath": "src/tools/select.ts",
      "editUrl": "https://github.com/freshtechbro/opendevbrowser/edit/main/src/tools/select.ts",
      "contentHtml": "<h2>Overview</h2>\n<p>Select options in a referenced select element.</p>\n<h2>Runtime mapping</h2>\n<ul>\n<li>Tool id: opendevbrowser_select</li>\n<li>Source: src/tools/select.ts</li>\n<li>Suggested CLI surface: select</li>\n</ul>\n<h2>Example</h2>\n<pre><code>\n\n\nnpx opendevbrowser select --help\n\n\n\n</code></pre>",
      "codeSample": "npx opendevbrowser select --help"
    },
    "tools/opendevbrowser_scroll": {
      "category": "tools",
      "slug": "opendevbrowser_scroll",
      "title": "opendevbrowser_scroll",
      "summary": "Scroll the page or a referenced element.",
      "sourcePath": "src/tools/scroll.ts",
      "editUrl": "https://github.com/freshtechbro/opendevbrowser/edit/main/src/tools/scroll.ts",
      "contentHtml": "<h2>Overview</h2>\n<p>Scroll the page or a referenced element.</p>\n<h2>Runtime mapping</h2>\n<ul>\n<li>Tool id: opendevbrowser_scroll</li>\n<li>Source: src/tools/scroll.ts</li>\n<li>Suggested CLI surface: scroll</li>\n</ul>\n<h2>Example</h2>\n<pre><code>\n\n\nnpx opendevbrowser scroll --help\n\n\n\n</code></pre>",
      "codeSample": "npx opendevbrowser scroll --help"
    },
    "tools/opendevbrowser_scroll_into_view": {
      "category": "tools",
      "slug": "opendevbrowser_scroll_into_view",
      "title": "opendevbrowser_scroll_into_view",
      "summary": "Scroll an element into view by ref.",
      "sourcePath": "src/tools/scroll_into_view.ts",
      "editUrl": "https://github.com/freshtechbro/opendevbrowser/edit/main/src/tools/scroll_into_view.ts",
      "contentHtml": "<h2>Overview</h2>\n<p>Scroll an element into view by ref.</p>\n<h2>Runtime mapping</h2>\n<ul>\n<li>Tool id: opendevbrowser_scroll_into_view</li>\n<li>Source: src/tools/scroll_into_view.ts</li>\n<li>Suggested CLI surface: scroll-into-view</li>\n</ul>\n<h2>Example</h2>\n<pre><code>\n\n\nnpx opendevbrowser scroll-into-view --help\n\n\n\n</code></pre>",
      "codeSample": "npx opendevbrowser scroll-into-view --help"
    },
    "tools/opendevbrowser_dom_get_html": {
      "category": "tools",
      "slug": "opendevbrowser_dom_get_html",
      "title": "opendevbrowser_dom_get_html",
      "summary": "Get outerHTML for a referenced element.",
      "sourcePath": "src/tools/dom_get_html.ts",
      "editUrl": "https://github.com/freshtechbro/opendevbrowser/edit/main/src/tools/dom_get_html.ts",
      "contentHtml": "<h2>Overview</h2>\n<p>Get outerHTML for a referenced element.</p>\n<h2>Runtime mapping</h2>\n<ul>\n<li>Tool id: opendevbrowser_dom_get_html</li>\n<li>Source: src/tools/dom_get_html.ts</li>\n<li>Suggested CLI surface: dom-get-html</li>\n</ul>\n<h2>Example</h2>\n<pre><code>\n\n\nnpx opendevbrowser dom-get-html --help\n\n\n\n</code></pre>",
      "codeSample": "npx opendevbrowser dom-get-html --help"
    },
    "tools/opendevbrowser_dom_get_text": {
      "category": "tools",
      "slug": "opendevbrowser_dom_get_text",
      "title": "opendevbrowser_dom_get_text",
      "summary": "Get inner text for a referenced element.",
      "sourcePath": "src/tools/dom_get_text.ts",
      "editUrl": "https://github.com/freshtechbro/opendevbrowser/edit/main/src/tools/dom_get_text.ts",
      "contentHtml": "<h2>Overview</h2>\n<p>Get inner text for a referenced element.</p>\n<h2>Runtime mapping</h2>\n<ul>\n<li>Tool id: opendevbrowser_dom_get_text</li>\n<li>Source: src/tools/dom_get_text.ts</li>\n<li>Suggested CLI surface: dom-get-text</li>\n</ul>\n<h2>Example</h2>\n<pre><code>\n\n\nnpx opendevbrowser dom-get-text --help\n\n\n\n</code></pre>",
      "codeSample": "npx opendevbrowser dom-get-text --help"
    },
    "tools/opendevbrowser_get_attr": {
      "category": "tools",
      "slug": "opendevbrowser_get_attr",
      "title": "opendevbrowser_get_attr",
      "summary": "Get a DOM attribute value by ref.",
      "sourcePath": "src/tools/get_attr.ts",
      "editUrl": "https://github.com/freshtechbro/opendevbrowser/edit/main/src/tools/get_attr.ts",
      "contentHtml": "<h2>Overview</h2>\n<p>Get a DOM attribute value by ref.</p>\n<h2>How to run</h2>\n<ol>\n<li>Start a session and navigate to the target page.</li>\n<li>Capture a snapshot and pick the element <code>ref</code>.</li>\n<li>Read the attribute with either tool or CLI command.</li>\n</ol>\n<h2>Runtime mapping</h2>\n<ul>\n<li>Tool id: opendevbrowser_get_attr</li>\n<li>Source: src/tools/get_attr.ts</li>\n<li>CLI command: <code>dom-attr</code></li>\n</ul>\n<h2>Common attributes</h2>\n<div class=\"docs-table-wrap\"><table>\n<thead><tr>\n<th>Attribute</th>\n<th>Why it is useful</th>\n</tr></thead>\n<tbody>\n<tr>\n<td><code>href</code></td>\n<td>Verify destination URLs before clicking.</td>\n</tr>\n<tr>\n<td><code>aria-label</code></td>\n<td>Confirm accessibility labels and screen-reader semantics.</td>\n</tr>\n<tr>\n<td><code>aria-invalid</code></td>\n<td>Validate form error state after submit.</td>\n</tr>\n<tr>\n<td><code>data-*</code></td>\n<td>Inspect app-specific state markers.</td>\n</tr>\n</tbody>\n</table></div>\n<h2>Tool example</h2>\n<pre><code>\n\n\nopendevbrowser_get_attr sessionId=&quot;&lt;session-id&gt;&quot; ref=&quot;r12&quot; name=&quot;aria-label&quot;\n\n\n\n</code></pre>\n<h2>CLI example</h2>\n<pre><code>\n\n\nnpx opendevbrowser launch --no-extension\n\n\n\nnpx opendevbrowser goto --session-id &lt;session-id&gt; --url https://example.com/form\n\n\n\nnpx opendevbrowser snapshot --session-id &lt;session-id&gt;\n\n\n\nnpx opendevbrowser dom-attr --session-id &lt;session-id&gt; --ref r12 --attr aria-invalid\n\n\n\n</code></pre>",
      "codeSample": "npx opendevbrowser dom-attr --session-id <session-id> --ref r12 --attr aria-label"
    },
    "tools/opendevbrowser_get_value": {
      "category": "tools",
      "slug": "opendevbrowser_get_value",
      "title": "opendevbrowser_get_value",
      "summary": "Get the input value for an element by ref.",
      "sourcePath": "src/tools/get_value.ts",
      "editUrl": "https://github.com/freshtechbro/opendevbrowser/edit/main/src/tools/get_value.ts",
      "contentHtml": "<h2>Overview</h2>\n<p>Get the input value for an element by ref.</p>\n<h2>Runtime mapping</h2>\n<ul>\n<li>Tool id: opendevbrowser_get_value</li>\n<li>Source: src/tools/get_value.ts</li>\n<li>Suggested CLI surface: get-value</li>\n</ul>\n<h2>Example</h2>\n<pre><code>\n\n\nnpx opendevbrowser get-value --help\n\n\n\n</code></pre>",
      "codeSample": "npx opendevbrowser get-value --help"
    },
    "tools/opendevbrowser_is_visible": {
      "category": "tools",
      "slug": "opendevbrowser_is_visible",
      "title": "opendevbrowser_is_visible",
      "summary": "Check if an element is visible by ref.",
      "sourcePath": "src/tools/is_visible.ts",
      "editUrl": "https://github.com/freshtechbro/opendevbrowser/edit/main/src/tools/is_visible.ts",
      "contentHtml": "<h2>Overview</h2>\n<p>Check if an element is visible by ref.</p>\n<h2>Runtime mapping</h2>\n<ul>\n<li>Tool id: opendevbrowser_is_visible</li>\n<li>Source: src/tools/is_visible.ts</li>\n<li>Suggested CLI surface: is-visible</li>\n</ul>\n<h2>Example</h2>\n<pre><code>\n\n\nnpx opendevbrowser is-visible --help\n\n\n\n</code></pre>",
      "codeSample": "npx opendevbrowser is-visible --help"
    },
    "tools/opendevbrowser_is_enabled": {
      "category": "tools",
      "slug": "opendevbrowser_is_enabled",
      "title": "opendevbrowser_is_enabled",
      "summary": "Check if an element is enabled by ref.",
      "sourcePath": "src/tools/is_enabled.ts",
      "editUrl": "https://github.com/freshtechbro/opendevbrowser/edit/main/src/tools/is_enabled.ts",
      "contentHtml": "<h2>Overview</h2>\n<p>Check if an element is enabled by ref.</p>\n<h2>Runtime mapping</h2>\n<ul>\n<li>Tool id: opendevbrowser_is_enabled</li>\n<li>Source: src/tools/is_enabled.ts</li>\n<li>Suggested CLI surface: is-enabled</li>\n</ul>\n<h2>Example</h2>\n<pre><code>\n\n\nnpx opendevbrowser is-enabled --help\n\n\n\n</code></pre>",
      "codeSample": "npx opendevbrowser is-enabled --help"
    },
    "tools/opendevbrowser_is_checked": {
      "category": "tools",
      "slug": "opendevbrowser_is_checked",
      "title": "opendevbrowser_is_checked",
      "summary": "Check if an element is checked by ref.",
      "sourcePath": "src/tools/is_checked.ts",
      "editUrl": "https://github.com/freshtechbro/opendevbrowser/edit/main/src/tools/is_checked.ts",
      "contentHtml": "<h2>Overview</h2>\n<p>Check if an element is checked by ref.</p>\n<h2>Runtime mapping</h2>\n<ul>\n<li>Tool id: opendevbrowser_is_checked</li>\n<li>Source: src/tools/is_checked.ts</li>\n<li>Suggested CLI surface: is-checked</li>\n</ul>\n<h2>Example</h2>\n<pre><code>\n\n\nnpx opendevbrowser is-checked --help\n\n\n\n</code></pre>",
      "codeSample": "npx opendevbrowser is-checked --help"
    },
    "tools/opendevbrowser_run": {
      "category": "tools",
      "slug": "opendevbrowser_run",
      "title": "opendevbrowser_run",
      "summary": "Run multiple actions in a single tool call.",
      "sourcePath": "src/tools/run.ts",
      "editUrl": "https://github.com/freshtechbro/opendevbrowser/edit/main/src/tools/run.ts",
      "contentHtml": "<h2>Overview</h2>\n<p>Run multiple actions in a single tool call.</p>\n<h2>Runtime mapping</h2>\n<ul>\n<li>Tool id: opendevbrowser_run</li>\n<li>Source: src/tools/run.ts</li>\n<li>Suggested CLI surface: run</li>\n</ul>\n<h2>Example</h2>\n<pre><code>\n\n\nnpx opendevbrowser run --help\n\n\n\n</code></pre>",
      "codeSample": "npx opendevbrowser run --help"
    },
    "tools/opendevbrowser_prompting_guide": {
      "category": "tools",
      "slug": "opendevbrowser_prompting_guide",
      "title": "opendevbrowser_prompting_guide",
      "summary": "Return best-practice prompting guidance for OpenDevBrowser.",
      "sourcePath": "src/tools/prompting_guide.ts",
      "editUrl": "https://github.com/freshtechbro/opendevbrowser/edit/main/src/tools/prompting_guide.ts",
      "contentHtml": "<h2>Overview</h2>\n<p>Return best-practice prompting guidance for OpenDevBrowser.</p>\n<h2>Runtime mapping</h2>\n<ul>\n<li>Tool id: opendevbrowser_prompting_guide</li>\n<li>Source: src/tools/prompting_guide.ts</li>\n<li>Suggested CLI surface: prompting-guide</li>\n</ul>\n<h2>Example</h2>\n<pre><code>\n\n\nnpx opendevbrowser prompting-guide --help\n\n\n\n</code></pre>",
      "codeSample": "npx opendevbrowser prompting-guide --help"
    },
    "tools/opendevbrowser_console_poll": {
      "category": "tools",
      "slug": "opendevbrowser_console_poll",
      "title": "opendevbrowser_console_poll",
      "summary": "Poll console events for the active target.",
      "sourcePath": "src/tools/console_poll.ts",
      "editUrl": "https://github.com/freshtechbro/opendevbrowser/edit/main/src/tools/console_poll.ts",
      "contentHtml": "<h2>Overview</h2>\n<p>Poll console events for the active target.</p>\n<h2>Runtime mapping</h2>\n<ul>\n<li>Tool id: opendevbrowser_console_poll</li>\n<li>Source: src/tools/console_poll.ts</li>\n<li>Suggested CLI surface: console-poll</li>\n</ul>\n<h2>Example</h2>\n<pre><code>\n\n\nnpx opendevbrowser console-poll --help\n\n\n\n</code></pre>",
      "codeSample": "npx opendevbrowser console-poll --help"
    },
    "tools/opendevbrowser_network_poll": {
      "category": "tools",
      "slug": "opendevbrowser_network_poll",
      "title": "opendevbrowser_network_poll",
      "summary": "Poll network events for the active target.",
      "sourcePath": "src/tools/network_poll.ts",
      "editUrl": "https://github.com/freshtechbro/opendevbrowser/edit/main/src/tools/network_poll.ts",
      "contentHtml": "<h2>Overview</h2>\n<p>Poll network events for the active target.</p>\n<h2>Runtime mapping</h2>\n<ul>\n<li>Tool id: opendevbrowser_network_poll</li>\n<li>Source: src/tools/network_poll.ts</li>\n<li>Suggested CLI surface: network-poll</li>\n</ul>\n<h2>Example</h2>\n<pre><code>\n\n\nnpx opendevbrowser network-poll --help\n\n\n\n</code></pre>",
      "codeSample": "npx opendevbrowser network-poll --help"
    },
    "tools/opendevbrowser_debug_trace_snapshot": {
      "category": "tools",
      "slug": "opendevbrowser_debug_trace_snapshot",
      "title": "opendevbrowser_debug_trace_snapshot",
      "summary": "Capture a combined debug trace snapshot (page + console + network + exceptions).",
      "sourcePath": "src/tools/debug_trace_snapshot.ts",
      "editUrl": "https://github.com/freshtechbro/opendevbrowser/edit/main/src/tools/debug_trace_snapshot.ts",
      "contentHtml": "<h2>Overview</h2>\n<p>Capture a combined debug trace snapshot (page + console + network + exceptions).</p>\n<h2>Runtime mapping</h2>\n<ul>\n<li>Tool id: opendevbrowser_debug_trace_snapshot</li>\n<li>Source: src/tools/debug_trace_snapshot.ts</li>\n<li>Suggested CLI surface: debug-trace-snapshot</li>\n</ul>\n<h2>Example</h2>\n<pre><code>\n\n\nnpx opendevbrowser debug-trace-snapshot --help\n\n\n\n</code></pre>",
      "codeSample": "npx opendevbrowser debug-trace-snapshot --help"
    },
    "tools/opendevbrowser_cookie_import": {
      "category": "tools",
      "slug": "opendevbrowser_cookie_import",
      "title": "opendevbrowser_cookie_import",
      "summary": "Import validated cookies into the current session context.",
      "sourcePath": "src/tools/cookie_import.ts",
      "editUrl": "https://github.com/freshtechbro/opendevbrowser/edit/main/src/tools/cookie_import.ts",
      "contentHtml": "<h2>Overview</h2>\n<p>Import validated cookies into the current session context.</p>\n<h2>Runtime mapping</h2>\n<ul>\n<li>Tool id: opendevbrowser_cookie_import</li>\n<li>Source: src/tools/cookie_import.ts</li>\n<li>Suggested CLI surface: cookie-import</li>\n</ul>\n<h2>Example</h2>\n<pre><code>\n\n\nnpx opendevbrowser cookie-import --help\n\n\n\n</code></pre>",
      "codeSample": "npx opendevbrowser cookie-import --help"
    },
    "tools/opendevbrowser_cookie_list": {
      "category": "tools",
      "slug": "opendevbrowser_cookie_list",
      "title": "opendevbrowser_cookie_list",
      "summary": "List cookies in the current session context with optional URL filtering.",
      "sourcePath": "src/tools/cookie_list.ts",
      "editUrl": "https://github.com/freshtechbro/opendevbrowser/edit/main/src/tools/cookie_list.ts",
      "contentHtml": "<h2>Overview</h2>\n<p>List cookies in the current session context with optional URL filtering.</p>\n<h2>Runtime mapping</h2>\n<ul>\n<li>Tool id: opendevbrowser_cookie_list</li>\n<li>Source: src/tools/cookie_list.ts</li>\n<li>Suggested CLI surface: cookie-list</li>\n</ul>\n<h2>Example</h2>\n<pre><code>\n\n\nnpx opendevbrowser cookie-list --help\n\n\n\n</code></pre>",
      "codeSample": "npx opendevbrowser cookie-list --help"
    },
    "tools/opendevbrowser_macro_resolve": {
      "category": "tools",
      "slug": "opendevbrowser_macro_resolve",
      "title": "opendevbrowser_macro_resolve",
      "summary": "Resolve a macro expression to a provider action with provenance metadata.",
      "sourcePath": "src/tools/macro_resolve.ts",
      "editUrl": "https://github.com/freshtechbro/opendevbrowser/edit/main/src/tools/macro_resolve.ts",
      "contentHtml": "<h2>Overview</h2>\n<p>Resolve a macro expression to a provider action with provenance metadata.</p>\n<h2>Runtime mapping</h2>\n<ul>\n<li>Tool id: opendevbrowser_macro_resolve</li>\n<li>Source: src/tools/macro_resolve.ts</li>\n<li>Suggested CLI surface: macro-resolve</li>\n</ul>\n<h2>Example</h2>\n<pre><code>\n\n\nnpx opendevbrowser macro-resolve --help\n\n\n\n</code></pre>",
      "codeSample": "npx opendevbrowser macro-resolve --help"
    },
    "tools/opendevbrowser_research_run": {
      "category": "tools",
      "slug": "opendevbrowser_research_run",
      "title": "opendevbrowser_research_run",
      "summary": "Run cross-source research with strict timebox and artifact outputs.",
      "sourcePath": "src/tools/research_run.ts",
      "editUrl": "https://github.com/freshtechbro/opendevbrowser/edit/main/src/tools/research_run.ts",
      "contentHtml": "<h2>Overview</h2>\n<p>Run cross-source research with strict timebox and artifact outputs.</p>\n<h2>Runtime mapping</h2>\n<ul>\n<li>Tool id: opendevbrowser_research_run</li>\n<li>Source: src/tools/research_run.ts</li>\n<li>Suggested CLI surface: research-run</li>\n</ul>\n<h2>Example</h2>\n<pre><code>\n\n\nnpx opendevbrowser research-run --help\n\n\n\n</code></pre>",
      "codeSample": "npx opendevbrowser research-run --help"
    },
    "tools/opendevbrowser_shopping_run": {
      "category": "tools",
      "slug": "opendevbrowser_shopping_run",
      "title": "opendevbrowser_shopping_run",
      "summary": "Run shopping/deal intelligence across shopping providers.",
      "sourcePath": "src/tools/shopping_run.ts",
      "editUrl": "https://github.com/freshtechbro/opendevbrowser/edit/main/src/tools/shopping_run.ts",
      "contentHtml": "<h2>Overview</h2>\n<p>Run shopping/deal intelligence across shopping providers.</p>\n<h2>Runtime mapping</h2>\n<ul>\n<li>Tool id: opendevbrowser_shopping_run</li>\n<li>Source: src/tools/shopping_run.ts</li>\n<li>Suggested CLI surface: shopping-run</li>\n</ul>\n<h2>Example</h2>\n<pre><code>\n\n\nnpx opendevbrowser shopping-run --help\n\n\n\n</code></pre>",
      "codeSample": "npx opendevbrowser shopping-run --help"
    },
    "tools/opendevbrowser_product_video_run": {
      "category": "tools",
      "slug": "opendevbrowser_product_video_run",
      "title": "opendevbrowser_product_video_run",
      "summary": "Collect a product presentation asset pack for video/UGC workflows.",
      "sourcePath": "src/tools/product_video_run.ts",
      "editUrl": "https://github.com/freshtechbro/opendevbrowser/edit/main/src/tools/product_video_run.ts",
      "contentHtml": "<h2>Overview</h2>\n<p>Collect a product presentation asset pack for video/UGC workflows.</p>\n<h2>Runtime mapping</h2>\n<ul>\n<li>Tool id: opendevbrowser_product_video_run</li>\n<li>Source: src/tools/product_video_run.ts</li>\n<li>Suggested CLI surface: product-video-run</li>\n</ul>\n<h2>Example</h2>\n<pre><code>\n\n\nnpx opendevbrowser product-video-run --help\n\n\n\n</code></pre>",
      "codeSample": "npx opendevbrowser product-video-run --help"
    },
    "tools/opendevbrowser_clone_page": {
      "category": "tools",
      "slug": "opendevbrowser_clone_page",
      "title": "opendevbrowser_clone_page",
      "summary": "Export the active page as a React component and CSS bundle.",
      "sourcePath": "src/tools/clone_page.ts",
      "editUrl": "https://github.com/freshtechbro/opendevbrowser/edit/main/src/tools/clone_page.ts",
      "contentHtml": "<h2>Overview</h2>\n<p>Export the active page as a React component and CSS bundle.</p>\n<h2>Runtime mapping</h2>\n<ul>\n<li>Tool id: opendevbrowser_clone_page</li>\n<li>Source: src/tools/clone_page.ts</li>\n<li>Suggested CLI surface: clone-page</li>\n</ul>\n<h2>Example</h2>\n<pre><code>\n\n\nnpx opendevbrowser clone-page --help\n\n\n\n</code></pre>",
      "codeSample": "npx opendevbrowser clone-page --help"
    },
    "tools/opendevbrowser_clone_component": {
      "category": "tools",
      "slug": "opendevbrowser_clone_component",
      "title": "opendevbrowser_clone_component",
      "summary": "Export a selected element subtree as a React component and CSS bundle.",
      "sourcePath": "src/tools/clone_component.ts",
      "editUrl": "https://github.com/freshtechbro/opendevbrowser/edit/main/src/tools/clone_component.ts",
      "contentHtml": "<h2>Overview</h2>\n<p>Export a selected element subtree as a React component and CSS bundle.</p>\n<h2>Runtime mapping</h2>\n<ul>\n<li>Tool id: opendevbrowser_clone_component</li>\n<li>Source: src/tools/clone_component.ts</li>\n<li>Suggested CLI surface: clone-component</li>\n</ul>\n<h2>Example</h2>\n<pre><code>\n\n\nnpx opendevbrowser clone-component --help\n\n\n\n</code></pre>",
      "codeSample": "npx opendevbrowser clone-component --help"
    },
    "tools/opendevbrowser_perf": {
      "category": "tools",
      "slug": "opendevbrowser_perf",
      "title": "opendevbrowser_perf",
      "summary": "Fetch lightweight performance metrics from the active page.",
      "sourcePath": "src/tools/perf.ts",
      "editUrl": "https://github.com/freshtechbro/opendevbrowser/edit/main/src/tools/perf.ts",
      "contentHtml": "<h2>Overview</h2>\n<p>Fetch lightweight performance metrics from the active page.</p>\n<h2>Runtime mapping</h2>\n<ul>\n<li>Tool id: opendevbrowser_perf</li>\n<li>Source: src/tools/perf.ts</li>\n<li>Suggested CLI surface: perf</li>\n</ul>\n<h2>Example</h2>\n<pre><code>\n\n\nnpx opendevbrowser perf --help\n\n\n\n</code></pre>",
      "codeSample": "npx opendevbrowser perf --help"
    },
    "tools/opendevbrowser_screenshot": {
      "category": "tools",
      "slug": "opendevbrowser_screenshot",
      "title": "opendevbrowser_screenshot",
      "summary": "Capture a screenshot of the active page.",
      "sourcePath": "src/tools/screenshot.ts",
      "editUrl": "https://github.com/freshtechbro/opendevbrowser/edit/main/src/tools/screenshot.ts",
      "contentHtml": "<h2>Overview</h2>\n<p>Capture a screenshot of the active page.</p>\n<h2>Runtime mapping</h2>\n<ul>\n<li>Tool id: opendevbrowser_screenshot</li>\n<li>Source: src/tools/screenshot.ts</li>\n<li>Suggested CLI surface: screenshot</li>\n</ul>\n<h2>Example</h2>\n<pre><code>\n\n\nnpx opendevbrowser screenshot --help\n\n\n\n</code></pre>",
      "codeSample": "npx opendevbrowser screenshot --help"
    },
    "tools/opendevbrowser_annotate": {
      "category": "tools",
      "slug": "opendevbrowser_annotate",
      "title": "opendevbrowser_annotate",
      "summary": "Request interactive annotations via direct (CDP) or relay transport.",
      "sourcePath": "src/tools/annotate.ts",
      "editUrl": "https://github.com/freshtechbro/opendevbrowser/edit/main/src/tools/annotate.ts",
      "contentHtml": "<h2>Overview</h2>\n<p>Request interactive annotations via direct (CDP) or relay transport.</p>\n<h2>Runtime mapping</h2>\n<ul>\n<li>Tool id: opendevbrowser_annotate</li>\n<li>Source: src/tools/annotate.ts</li>\n<li>Suggested CLI surface: annotate</li>\n</ul>\n<h2>Example</h2>\n<pre><code>\n\n\nnpx opendevbrowser annotate --help\n\n\n\n</code></pre>",
      "codeSample": "npx opendevbrowser annotate --help"
    },
    "tools/opendevbrowser_skill_list": {
      "category": "tools",
      "slug": "opendevbrowser_skill_list",
      "title": "opendevbrowser_skill_list",
      "summary": "List available skills from OpenCode skill directories (compatibility wrapper)",
      "sourcePath": "src/tools/skill_list.ts",
      "editUrl": "https://github.com/freshtechbro/opendevbrowser/edit/main/src/tools/skill_list.ts",
      "contentHtml": "<h2>Overview</h2>\n<p>List available skills from OpenCode skill directories (compatibility wrapper)</p>\n<h2>Runtime mapping</h2>\n<ul>\n<li>Tool id: opendevbrowser_skill_list</li>\n<li>Source: src/tools/skill_list.ts</li>\n<li>Suggested CLI surface: skill-list</li>\n</ul>\n<h2>Example</h2>\n<pre><code>\n\n\nnpx opendevbrowser skill-list --help\n\n\n\n</code></pre>",
      "codeSample": "npx opendevbrowser skill-list --help"
    },
    "tools/opendevbrowser_skill_load": {
      "category": "tools",
      "slug": "opendevbrowser_skill_load",
      "title": "opendevbrowser_skill_load",
      "summary": "Load a specific skill by name from OpenCode skill directories (compatibility wrapper)",
      "sourcePath": "src/tools/skill_load.ts",
      "editUrl": "https://github.com/freshtechbro/opendevbrowser/edit/main/src/tools/skill_load.ts",
      "contentHtml": "<h2>Overview</h2>\n<p>Load a specific skill by name from OpenCode skill directories (compatibility wrapper)</p>\n<h2>Runtime mapping</h2>\n<ul>\n<li>Tool id: opendevbrowser_skill_load</li>\n<li>Source: src/tools/skill_load.ts</li>\n<li>Suggested CLI surface: skill-load</li>\n</ul>\n<h2>Example</h2>\n<pre><code>\n\n\nnpx opendevbrowser skill-load --help\n\n\n\n</code></pre>",
      "codeSample": "npx opendevbrowser skill-load --help"
    },
    "cli/install": {
      "category": "cli",
      "slug": "install",
      "title": "install",
      "summary": "Command reference for install.",
      "sourcePath": "docs/CLI.md",
      "editUrl": "https://github.com/freshtechbro/opendevbrowser/edit/main/docs/CLI.md",
      "contentHtml": "<h2>Overview</h2>\n<p>Command reference for install.</p>\n<h2>Command</h2>\n<ul>\n<li>Name: install</li>\n<li>Source: docs/CLI.md</li>\n</ul>\n<h2>Example</h2>\n<pre><code>\n\n\nnpx opendevbrowser install --help\n\n\n\n</code></pre>",
      "codeSample": "npx opendevbrowser install --help"
    },
    "cli/update": {
      "category": "cli",
      "slug": "update",
      "title": "update",
      "summary": "Command reference for update.",
      "sourcePath": "docs/CLI.md",
      "editUrl": "https://github.com/freshtechbro/opendevbrowser/edit/main/docs/CLI.md",
      "contentHtml": "<h2>Overview</h2>\n<p>Command reference for update.</p>\n<h2>Command</h2>\n<ul>\n<li>Name: update</li>\n<li>Source: docs/CLI.md</li>\n</ul>\n<h2>Example</h2>\n<pre><code>\n\n\nnpx opendevbrowser update --help\n\n\n\n</code></pre>",
      "codeSample": "npx opendevbrowser update --help"
    },
    "cli/uninstall": {
      "category": "cli",
      "slug": "uninstall",
      "title": "uninstall",
      "summary": "Command reference for uninstall.",
      "sourcePath": "docs/CLI.md",
      "editUrl": "https://github.com/freshtechbro/opendevbrowser/edit/main/docs/CLI.md",
      "contentHtml": "<h2>Overview</h2>\n<p>Command reference for uninstall.</p>\n<h2>Command</h2>\n<ul>\n<li>Name: uninstall</li>\n<li>Source: docs/CLI.md</li>\n</ul>\n<h2>Example</h2>\n<pre><code>\n\n\nnpx opendevbrowser uninstall --help\n\n\n\n</code></pre>",
      "codeSample": "npx opendevbrowser uninstall --help"
    },
    "cli/help": {
      "category": "cli",
      "slug": "help",
      "title": "help",
      "summary": "Command reference for help.",
      "sourcePath": "docs/CLI.md",
      "editUrl": "https://github.com/freshtechbro/opendevbrowser/edit/main/docs/CLI.md",
      "contentHtml": "<h2>Overview</h2>\n<p>Command reference for help.</p>\n<h2>Command</h2>\n<ul>\n<li>Name: help</li>\n<li>Source: docs/CLI.md</li>\n</ul>\n<h2>Example</h2>\n<pre><code>\n\n\nnpx opendevbrowser help --help\n\n\n\n</code></pre>",
      "codeSample": "npx opendevbrowser help --help"
    },
    "cli/version": {
      "category": "cli",
      "slug": "version",
      "title": "version",
      "summary": "Command reference for version.",
      "sourcePath": "docs/CLI.md",
      "editUrl": "https://github.com/freshtechbro/opendevbrowser/edit/main/docs/CLI.md",
      "contentHtml": "<h2>Overview</h2>\n<p>Command reference for version.</p>\n<h2>Command</h2>\n<ul>\n<li>Name: version</li>\n<li>Source: docs/CLI.md</li>\n</ul>\n<h2>Example</h2>\n<pre><code>\n\n\nnpx opendevbrowser version --help\n\n\n\n</code></pre>",
      "codeSample": "npx opendevbrowser version --help"
    },
    "cli/serve": {
      "category": "cli",
      "slug": "serve",
      "title": "serve",
      "summary": "Command reference for serve.",
      "sourcePath": "docs/CLI.md",
      "editUrl": "https://github.com/freshtechbro/opendevbrowser/edit/main/docs/CLI.md",
      "contentHtml": "<h2>Overview</h2>\n<p>Command reference for serve.</p>\n<h2>Command</h2>\n<ul>\n<li>Name: serve</li>\n<li>Source: docs/CLI.md</li>\n</ul>\n<h2>Example</h2>\n<pre><code>\n\n\nnpx opendevbrowser serve --help\n\n\n\n</code></pre>",
      "codeSample": "npx opendevbrowser serve --help"
    },
    "cli/daemon": {
      "category": "cli",
      "slug": "daemon",
      "title": "daemon",
      "summary": "Command reference for daemon.",
      "sourcePath": "docs/CLI.md",
      "editUrl": "https://github.com/freshtechbro/opendevbrowser/edit/main/docs/CLI.md",
      "contentHtml": "<h2>Overview</h2>\n<p>Command reference for daemon.</p>\n<h2>Command</h2>\n<ul>\n<li>Name: daemon</li>\n<li>Source: docs/CLI.md</li>\n</ul>\n<h2>Example</h2>\n<pre><code>\n\n\nnpx opendevbrowser daemon --help\n\n\n\n</code></pre>",
      "codeSample": "npx opendevbrowser daemon --help"
    },
    "cli/native": {
      "category": "cli",
      "slug": "native",
      "title": "native",
      "summary": "Command reference for native.",
      "sourcePath": "docs/CLI.md",
      "editUrl": "https://github.com/freshtechbro/opendevbrowser/edit/main/docs/CLI.md",
      "contentHtml": "<h2>Overview</h2>\n<p>Command reference for native.</p>\n<h2>Command</h2>\n<ul>\n<li>Name: native</li>\n<li>Source: docs/CLI.md</li>\n</ul>\n<h2>Example</h2>\n<pre><code>\n\n\nnpx opendevbrowser native --help\n\n\n\n</code></pre>",
      "codeSample": "npx opendevbrowser native --help"
    },
    "cli/run": {
      "category": "cli",
      "slug": "run",
      "title": "run",
      "summary": "Command reference for run.",
      "sourcePath": "docs/CLI.md",
      "editUrl": "https://github.com/freshtechbro/opendevbrowser/edit/main/docs/CLI.md",
      "contentHtml": "<h2>Overview</h2>\n<p>Command reference for run.</p>\n<h2>Command</h2>\n<ul>\n<li>Name: run</li>\n<li>Source: docs/CLI.md</li>\n</ul>\n<h2>Example</h2>\n<pre><code>\n\n\nnpx opendevbrowser run --help\n\n\n\n</code></pre>",
      "codeSample": "npx opendevbrowser run --help"
    },
    "cli/artifacts": {
      "category": "cli",
      "slug": "artifacts",
      "title": "artifacts",
      "summary": "Command reference for artifacts.",
      "sourcePath": "docs/CLI.md",
      "editUrl": "https://github.com/freshtechbro/opendevbrowser/edit/main/docs/CLI.md",
      "contentHtml": "<h2>Overview</h2>\n<p>Command reference for artifacts.</p>\n<h2>Command</h2>\n<ul>\n<li>Name: artifacts</li>\n<li>Source: docs/CLI.md</li>\n</ul>\n<h2>Example</h2>\n<pre><code>\n\n\nnpx opendevbrowser artifacts --help\n\n\n\n</code></pre>",
      "codeSample": "npx opendevbrowser artifacts --help"
    },
    "cli/launch": {
      "category": "cli",
      "slug": "launch",
      "title": "launch",
      "summary": "Command reference for launch.",
      "sourcePath": "docs/CLI.md",
      "editUrl": "https://github.com/freshtechbro/opendevbrowser/edit/main/docs/CLI.md",
      "contentHtml": "<h2>Overview</h2>\n<p>Command reference for launch.</p>\n<h2>Command</h2>\n<ul>\n<li>Name: launch</li>\n<li>Source: docs/CLI.md</li>\n</ul>\n<h2>Example</h2>\n<pre><code>\n\n\nnpx opendevbrowser launch --help\n\n\n\n</code></pre>",
      "codeSample": "npx opendevbrowser launch --help"
    },
    "cli/connect": {
      "category": "cli",
      "slug": "connect",
      "title": "connect",
      "summary": "Command reference for connect.",
      "sourcePath": "docs/CLI.md",
      "editUrl": "https://github.com/freshtechbro/opendevbrowser/edit/main/docs/CLI.md",
      "contentHtml": "<h2>Overview</h2>\n<p>Command reference for connect.</p>\n<h2>Command</h2>\n<ul>\n<li>Name: connect</li>\n<li>Source: docs/CLI.md</li>\n</ul>\n<h2>Example</h2>\n<pre><code>\n\n\nnpx opendevbrowser connect --help\n\n\n\n</code></pre>",
      "codeSample": "npx opendevbrowser connect --help"
    },
    "cli/disconnect": {
      "category": "cli",
      "slug": "disconnect",
      "title": "disconnect",
      "summary": "Command reference for disconnect.",
      "sourcePath": "docs/CLI.md",
      "editUrl": "https://github.com/freshtechbro/opendevbrowser/edit/main/docs/CLI.md",
      "contentHtml": "<h2>Overview</h2>\n<p>Command reference for disconnect.</p>\n<h2>Command</h2>\n<ul>\n<li>Name: disconnect</li>\n<li>Source: docs/CLI.md</li>\n</ul>\n<h2>Example</h2>\n<pre><code>\n\n\nnpx opendevbrowser disconnect --help\n\n\n\n</code></pre>",
      "codeSample": "npx opendevbrowser disconnect --help"
    },
    "cli/status": {
      "category": "cli",
      "slug": "status",
      "title": "status",
      "summary": "Command reference for status.",
      "sourcePath": "docs/CLI.md",
      "editUrl": "https://github.com/freshtechbro/opendevbrowser/edit/main/docs/CLI.md",
      "contentHtml": "<h2>Overview</h2>\n<p>Command reference for status.</p>\n<h2>Command</h2>\n<ul>\n<li>Name: status</li>\n<li>Source: docs/CLI.md</li>\n</ul>\n<h2>Example</h2>\n<pre><code>\n\n\nnpx opendevbrowser status --help\n\n\n\n</code></pre>",
      "codeSample": "npx opendevbrowser status --help"
    },
    "cli/cookie-import": {
      "category": "cli",
      "slug": "cookie-import",
      "title": "cookie-import",
      "summary": "Command reference for cookie-import.",
      "sourcePath": "docs/CLI.md",
      "editUrl": "https://github.com/freshtechbro/opendevbrowser/edit/main/docs/CLI.md",
      "contentHtml": "<h2>Overview</h2>\n<p>Command reference for cookie-import.</p>\n<h2>Command</h2>\n<ul>\n<li>Name: cookie-import</li>\n<li>Source: docs/CLI.md</li>\n</ul>\n<h2>Example</h2>\n<pre><code>\n\n\nnpx opendevbrowser cookie-import --help\n\n\n\n</code></pre>",
      "codeSample": "npx opendevbrowser cookie-import --help"
    },
    "cli/cookie-list": {
      "category": "cli",
      "slug": "cookie-list",
      "title": "cookie-list",
      "summary": "Command reference for cookie-list.",
      "sourcePath": "docs/CLI.md",
      "editUrl": "https://github.com/freshtechbro/opendevbrowser/edit/main/docs/CLI.md",
      "contentHtml": "<h2>Overview</h2>\n<p>Command reference for cookie-list.</p>\n<h2>Command</h2>\n<ul>\n<li>Name: cookie-list</li>\n<li>Source: docs/CLI.md</li>\n</ul>\n<h2>Example</h2>\n<pre><code>\n\n\nnpx opendevbrowser cookie-list --help\n\n\n\n</code></pre>",
      "codeSample": "npx opendevbrowser cookie-list --help"
    },
    "cli/research": {
      "category": "cli",
      "slug": "research",
      "title": "research",
      "summary": "Command reference for research.",
      "sourcePath": "docs/CLI.md",
      "editUrl": "https://github.com/freshtechbro/opendevbrowser/edit/main/docs/CLI.md",
      "contentHtml": "<h2>Overview</h2>\n<p>Command reference for research.</p>\n<h2>Command</h2>\n<ul>\n<li>Name: research</li>\n<li>Source: docs/CLI.md</li>\n</ul>\n<h2>Example</h2>\n<pre><code>\n\n\nnpx opendevbrowser research --help\n\n\n\n</code></pre>",
      "codeSample": "npx opendevbrowser research --help"
    },
    "cli/shopping": {
      "category": "cli",
      "slug": "shopping",
      "title": "shopping",
      "summary": "Command reference for shopping.",
      "sourcePath": "docs/CLI.md",
      "editUrl": "https://github.com/freshtechbro/opendevbrowser/edit/main/docs/CLI.md",
      "contentHtml": "<h2>Overview</h2>\n<p>Command reference for shopping.</p>\n<h2>Command</h2>\n<ul>\n<li>Name: shopping</li>\n<li>Source: docs/CLI.md</li>\n</ul>\n<h2>Example</h2>\n<pre><code>\n\n\nnpx opendevbrowser shopping --help\n\n\n\n</code></pre>",
      "codeSample": "npx opendevbrowser shopping --help"
    },
    "cli/product-video": {
      "category": "cli",
      "slug": "product-video",
      "title": "product-video",
      "summary": "Command reference for product-video.",
      "sourcePath": "docs/CLI.md",
      "editUrl": "https://github.com/freshtechbro/opendevbrowser/edit/main/docs/CLI.md",
      "contentHtml": "<h2>Overview</h2>\n<p>Command reference for product-video.</p>\n<h2>Command</h2>\n<ul>\n<li>Name: product-video</li>\n<li>Source: docs/CLI.md</li>\n</ul>\n<h2>Example</h2>\n<pre><code>\n\n\nnpx opendevbrowser product-video --help\n\n\n\n</code></pre>",
      "codeSample": "npx opendevbrowser product-video --help"
    },
    "cli/goto": {
      "category": "cli",
      "slug": "goto",
      "title": "goto",
      "summary": "Command reference for goto.",
      "sourcePath": "docs/CLI.md",
      "editUrl": "https://github.com/freshtechbro/opendevbrowser/edit/main/docs/CLI.md",
      "contentHtml": "<h2>Overview</h2>\n<p>Command reference for goto.</p>\n<h2>Command</h2>\n<ul>\n<li>Name: goto</li>\n<li>Source: docs/CLI.md</li>\n</ul>\n<h2>Example</h2>\n<pre><code>\n\n\nnpx opendevbrowser goto --help\n\n\n\n</code></pre>",
      "codeSample": "npx opendevbrowser goto --help"
    },
    "cli/wait": {
      "category": "cli",
      "slug": "wait",
      "title": "wait",
      "summary": "Command reference for wait.",
      "sourcePath": "docs/CLI.md",
      "editUrl": "https://github.com/freshtechbro/opendevbrowser/edit/main/docs/CLI.md",
      "contentHtml": "<h2>Overview</h2>\n<p>Command reference for wait.</p>\n<h2>Command</h2>\n<ul>\n<li>Name: wait</li>\n<li>Source: docs/CLI.md</li>\n</ul>\n<h2>Example</h2>\n<pre><code>\n\n\nnpx opendevbrowser wait --help\n\n\n\n</code></pre>",
      "codeSample": "npx opendevbrowser wait --help"
    },
    "cli/snapshot": {
      "category": "cli",
      "slug": "snapshot",
      "title": "snapshot",
      "summary": "Command reference for snapshot.",
      "sourcePath": "docs/CLI.md",
      "editUrl": "https://github.com/freshtechbro/opendevbrowser/edit/main/docs/CLI.md",
      "contentHtml": "<h2>Overview</h2>\n<p>Command reference for snapshot.</p>\n<h2>Command</h2>\n<ul>\n<li>Name: snapshot</li>\n<li>Source: docs/CLI.md</li>\n</ul>\n<h2>Example</h2>\n<pre><code>\n\n\nnpx opendevbrowser snapshot --help\n\n\n\n</code></pre>",
      "codeSample": "npx opendevbrowser snapshot --help"
    },
    "cli/click": {
      "category": "cli",
      "slug": "click",
      "title": "click",
      "summary": "Command reference for click.",
      "sourcePath": "docs/CLI.md",
      "editUrl": "https://github.com/freshtechbro/opendevbrowser/edit/main/docs/CLI.md",
      "contentHtml": "<h2>Overview</h2>\n<p>Command reference for click.</p>\n<h2>Command</h2>\n<ul>\n<li>Name: click</li>\n<li>Source: docs/CLI.md</li>\n</ul>\n<h2>Example</h2>\n<pre><code>\n\n\nnpx opendevbrowser click --help\n\n\n\n</code></pre>",
      "codeSample": "npx opendevbrowser click --help"
    },
    "cli/hover": {
      "category": "cli",
      "slug": "hover",
      "title": "hover",
      "summary": "Command reference for hover.",
      "sourcePath": "docs/CLI.md",
      "editUrl": "https://github.com/freshtechbro/opendevbrowser/edit/main/docs/CLI.md",
      "contentHtml": "<h2>Overview</h2>\n<p>Command reference for hover.</p>\n<h2>Command</h2>\n<ul>\n<li>Name: hover</li>\n<li>Source: docs/CLI.md</li>\n</ul>\n<h2>Example</h2>\n<pre><code>\n\n\nnpx opendevbrowser hover --help\n\n\n\n</code></pre>",
      "codeSample": "npx opendevbrowser hover --help"
    },
    "cli/press": {
      "category": "cli",
      "slug": "press",
      "title": "press",
      "summary": "Command reference for press.",
      "sourcePath": "docs/CLI.md",
      "editUrl": "https://github.com/freshtechbro/opendevbrowser/edit/main/docs/CLI.md",
      "contentHtml": "<h2>Overview</h2>\n<p>Command reference for press.</p>\n<h2>Command</h2>\n<ul>\n<li>Name: press</li>\n<li>Source: docs/CLI.md</li>\n</ul>\n<h2>Example</h2>\n<pre><code>\n\n\nnpx opendevbrowser press --help\n\n\n\n</code></pre>",
      "codeSample": "npx opendevbrowser press --help"
    },
    "cli/check": {
      "category": "cli",
      "slug": "check",
      "title": "check",
      "summary": "Command reference for check.",
      "sourcePath": "docs/CLI.md",
      "editUrl": "https://github.com/freshtechbro/opendevbrowser/edit/main/docs/CLI.md",
      "contentHtml": "<h2>Overview</h2>\n<p>Command reference for check.</p>\n<h2>Command</h2>\n<ul>\n<li>Name: check</li>\n<li>Source: docs/CLI.md</li>\n</ul>\n<h2>Example</h2>\n<pre><code>\n\n\nnpx opendevbrowser check --help\n\n\n\n</code></pre>",
      "codeSample": "npx opendevbrowser check --help"
    },
    "cli/uncheck": {
      "category": "cli",
      "slug": "uncheck",
      "title": "uncheck",
      "summary": "Command reference for uncheck.",
      "sourcePath": "docs/CLI.md",
      "editUrl": "https://github.com/freshtechbro/opendevbrowser/edit/main/docs/CLI.md",
      "contentHtml": "<h2>Overview</h2>\n<p>Command reference for uncheck.</p>\n<h2>Command</h2>\n<ul>\n<li>Name: uncheck</li>\n<li>Source: docs/CLI.md</li>\n</ul>\n<h2>Example</h2>\n<pre><code>\n\n\nnpx opendevbrowser uncheck --help\n\n\n\n</code></pre>",
      "codeSample": "npx opendevbrowser uncheck --help"
    },
    "cli/type": {
      "category": "cli",
      "slug": "type",
      "title": "type",
      "summary": "Command reference for type.",
      "sourcePath": "docs/CLI.md",
      "editUrl": "https://github.com/freshtechbro/opendevbrowser/edit/main/docs/CLI.md",
      "contentHtml": "<h2>Overview</h2>\n<p>Command reference for type.</p>\n<h2>Command</h2>\n<ul>\n<li>Name: type</li>\n<li>Source: docs/CLI.md</li>\n</ul>\n<h2>Example</h2>\n<pre><code>\n\n\nnpx opendevbrowser type --help\n\n\n\n</code></pre>",
      "codeSample": "npx opendevbrowser type --help"
    },
    "cli/select": {
      "category": "cli",
      "slug": "select",
      "title": "select",
      "summary": "Command reference for select.",
      "sourcePath": "docs/CLI.md",
      "editUrl": "https://github.com/freshtechbro/opendevbrowser/edit/main/docs/CLI.md",
      "contentHtml": "<h2>Overview</h2>\n<p>Command reference for select.</p>\n<h2>Command</h2>\n<ul>\n<li>Name: select</li>\n<li>Source: docs/CLI.md</li>\n</ul>\n<h2>Example</h2>\n<pre><code>\n\n\nnpx opendevbrowser select --help\n\n\n\n</code></pre>",
      "codeSample": "npx opendevbrowser select --help"
    },
    "cli/scroll": {
      "category": "cli",
      "slug": "scroll",
      "title": "scroll",
      "summary": "Command reference for scroll.",
      "sourcePath": "docs/CLI.md",
      "editUrl": "https://github.com/freshtechbro/opendevbrowser/edit/main/docs/CLI.md",
      "contentHtml": "<h2>Overview</h2>\n<p>Command reference for scroll.</p>\n<h2>Command</h2>\n<ul>\n<li>Name: scroll</li>\n<li>Source: docs/CLI.md</li>\n</ul>\n<h2>Example</h2>\n<pre><code>\n\n\nnpx opendevbrowser scroll --help\n\n\n\n</code></pre>",
      "codeSample": "npx opendevbrowser scroll --help"
    },
    "cli/scroll-into-view": {
      "category": "cli",
      "slug": "scroll-into-view",
      "title": "scroll-into-view",
      "summary": "Command reference for scroll-into-view.",
      "sourcePath": "docs/CLI.md",
      "editUrl": "https://github.com/freshtechbro/opendevbrowser/edit/main/docs/CLI.md",
      "contentHtml": "<h2>Overview</h2>\n<p>Command reference for scroll-into-view.</p>\n<h2>Command</h2>\n<ul>\n<li>Name: scroll-into-view</li>\n<li>Source: docs/CLI.md</li>\n</ul>\n<h2>Example</h2>\n<pre><code>\n\n\nnpx opendevbrowser scroll-into-view --help\n\n\n\n</code></pre>",
      "codeSample": "npx opendevbrowser scroll-into-view --help"
    },
    "cli/targets-list": {
      "category": "cli",
      "slug": "targets-list",
      "title": "targets-list",
      "summary": "Command reference for targets-list.",
      "sourcePath": "docs/CLI.md",
      "editUrl": "https://github.com/freshtechbro/opendevbrowser/edit/main/docs/CLI.md",
      "contentHtml": "<h2>Overview</h2>\n<p>Command reference for targets-list.</p>\n<h2>Command</h2>\n<ul>\n<li>Name: targets-list</li>\n<li>Source: docs/CLI.md</li>\n</ul>\n<h2>Example</h2>\n<pre><code>\n\n\nnpx opendevbrowser targets-list --help\n\n\n\n</code></pre>",
      "codeSample": "npx opendevbrowser targets-list --help"
    },
    "cli/target-use": {
      "category": "cli",
      "slug": "target-use",
      "title": "target-use",
      "summary": "Command reference for target-use.",
      "sourcePath": "docs/CLI.md",
      "editUrl": "https://github.com/freshtechbro/opendevbrowser/edit/main/docs/CLI.md",
      "contentHtml": "<h2>Overview</h2>\n<p>Command reference for target-use.</p>\n<h2>Command</h2>\n<ul>\n<li>Name: target-use</li>\n<li>Source: docs/CLI.md</li>\n</ul>\n<h2>Example</h2>\n<pre><code>\n\n\nnpx opendevbrowser target-use --help\n\n\n\n</code></pre>",
      "codeSample": "npx opendevbrowser target-use --help"
    },
    "cli/target-new": {
      "category": "cli",
      "slug": "target-new",
      "title": "target-new",
      "summary": "Command reference for target-new.",
      "sourcePath": "docs/CLI.md",
      "editUrl": "https://github.com/freshtechbro/opendevbrowser/edit/main/docs/CLI.md",
      "contentHtml": "<h2>Overview</h2>\n<p>Command reference for target-new.</p>\n<h2>Command</h2>\n<ul>\n<li>Name: target-new</li>\n<li>Source: docs/CLI.md</li>\n</ul>\n<h2>Example</h2>\n<pre><code>\n\n\nnpx opendevbrowser target-new --help\n\n\n\n</code></pre>",
      "codeSample": "npx opendevbrowser target-new --help"
    },
    "cli/target-close": {
      "category": "cli",
      "slug": "target-close",
      "title": "target-close",
      "summary": "Command reference for target-close.",
      "sourcePath": "docs/CLI.md",
      "editUrl": "https://github.com/freshtechbro/opendevbrowser/edit/main/docs/CLI.md",
      "contentHtml": "<h2>Overview</h2>\n<p>Command reference for target-close.</p>\n<h2>Command</h2>\n<ul>\n<li>Name: target-close</li>\n<li>Source: docs/CLI.md</li>\n</ul>\n<h2>Example</h2>\n<pre><code>\n\n\nnpx opendevbrowser target-close --help\n\n\n\n</code></pre>",
      "codeSample": "npx opendevbrowser target-close --help"
    },
    "cli/page": {
      "category": "cli",
      "slug": "page",
      "title": "page",
      "summary": "Command reference for page.",
      "sourcePath": "docs/CLI.md",
      "editUrl": "https://github.com/freshtechbro/opendevbrowser/edit/main/docs/CLI.md",
      "contentHtml": "<h2>Overview</h2>\n<p>Command reference for page.</p>\n<h2>Command</h2>\n<ul>\n<li>Name: page</li>\n<li>Source: docs/CLI.md</li>\n</ul>\n<h2>Example</h2>\n<pre><code>\n\n\nnpx opendevbrowser page --help\n\n\n\n</code></pre>",
      "codeSample": "npx opendevbrowser page --help"
    },
    "cli/pages": {
      "category": "cli",
      "slug": "pages",
      "title": "pages",
      "summary": "Command reference for pages.",
      "sourcePath": "docs/CLI.md",
      "editUrl": "https://github.com/freshtechbro/opendevbrowser/edit/main/docs/CLI.md",
      "contentHtml": "<h2>Overview</h2>\n<p>Command reference for pages.</p>\n<h2>Command</h2>\n<ul>\n<li>Name: pages</li>\n<li>Source: docs/CLI.md</li>\n</ul>\n<h2>Example</h2>\n<pre><code>\n\n\nnpx opendevbrowser pages --help\n\n\n\n</code></pre>",
      "codeSample": "npx opendevbrowser pages --help"
    },
    "cli/page-close": {
      "category": "cli",
      "slug": "page-close",
      "title": "page-close",
      "summary": "Command reference for page-close.",
      "sourcePath": "docs/CLI.md",
      "editUrl": "https://github.com/freshtechbro/opendevbrowser/edit/main/docs/CLI.md",
      "contentHtml": "<h2>Overview</h2>\n<p>Command reference for page-close.</p>\n<h2>Command</h2>\n<ul>\n<li>Name: page-close</li>\n<li>Source: docs/CLI.md</li>\n</ul>\n<h2>Example</h2>\n<pre><code>\n\n\nnpx opendevbrowser page-close --help\n\n\n\n</code></pre>",
      "codeSample": "npx opendevbrowser page-close --help"
    },
    "cli/dom-html": {
      "category": "cli",
      "slug": "dom-html",
      "title": "dom-html",
      "summary": "Command reference for dom-html.",
      "sourcePath": "docs/CLI.md",
      "editUrl": "https://github.com/freshtechbro/opendevbrowser/edit/main/docs/CLI.md",
      "contentHtml": "<h2>Overview</h2>\n<p>Command reference for dom-html.</p>\n<h2>Command</h2>\n<ul>\n<li>Name: dom-html</li>\n<li>Source: docs/CLI.md</li>\n</ul>\n<h2>Example</h2>\n<pre><code>\n\n\nnpx opendevbrowser dom-html --help\n\n\n\n</code></pre>",
      "codeSample": "npx opendevbrowser dom-html --help"
    },
    "cli/dom-text": {
      "category": "cli",
      "slug": "dom-text",
      "title": "dom-text",
      "summary": "Command reference for dom-text.",
      "sourcePath": "docs/CLI.md",
      "editUrl": "https://github.com/freshtechbro/opendevbrowser/edit/main/docs/CLI.md",
      "contentHtml": "<h2>Overview</h2>\n<p>Command reference for dom-text.</p>\n<h2>Command</h2>\n<ul>\n<li>Name: dom-text</li>\n<li>Source: docs/CLI.md</li>\n</ul>\n<h2>Example</h2>\n<pre><code>\n\n\nnpx opendevbrowser dom-text --help\n\n\n\n</code></pre>",
      "codeSample": "npx opendevbrowser dom-text --help"
    },
    "cli/dom-attr": {
      "category": "cli",
      "slug": "dom-attr",
      "title": "dom-attr",
      "summary": "Command reference for dom-attr.",
      "sourcePath": "docs/CLI.md",
      "editUrl": "https://github.com/freshtechbro/opendevbrowser/edit/main/docs/CLI.md",
      "contentHtml": "<h2>Overview</h2>\n<p>Command reference for dom-attr.</p>\n<h2>Command</h2>\n<ul>\n<li>Name: dom-attr</li>\n<li>Source: docs/CLI.md</li>\n</ul>\n<h2>Example</h2>\n<pre><code>\n\n\nnpx opendevbrowser dom-attr --help\n\n\n\n</code></pre>",
      "codeSample": "npx opendevbrowser dom-attr --help"
    },
    "cli/dom-value": {
      "category": "cli",
      "slug": "dom-value",
      "title": "dom-value",
      "summary": "Command reference for dom-value.",
      "sourcePath": "docs/CLI.md",
      "editUrl": "https://github.com/freshtechbro/opendevbrowser/edit/main/docs/CLI.md",
      "contentHtml": "<h2>Overview</h2>\n<p>Command reference for dom-value.</p>\n<h2>Command</h2>\n<ul>\n<li>Name: dom-value</li>\n<li>Source: docs/CLI.md</li>\n</ul>\n<h2>Example</h2>\n<pre><code>\n\n\nnpx opendevbrowser dom-value --help\n\n\n\n</code></pre>",
      "codeSample": "npx opendevbrowser dom-value --help"
    },
    "cli/dom-visible": {
      "category": "cli",
      "slug": "dom-visible",
      "title": "dom-visible",
      "summary": "Command reference for dom-visible.",
      "sourcePath": "docs/CLI.md",
      "editUrl": "https://github.com/freshtechbro/opendevbrowser/edit/main/docs/CLI.md",
      "contentHtml": "<h2>Overview</h2>\n<p>Command reference for dom-visible.</p>\n<h2>Command</h2>\n<ul>\n<li>Name: dom-visible</li>\n<li>Source: docs/CLI.md</li>\n</ul>\n<h2>Example</h2>\n<pre><code>\n\n\nnpx opendevbrowser dom-visible --help\n\n\n\n</code></pre>",
      "codeSample": "npx opendevbrowser dom-visible --help"
    },
    "cli/dom-enabled": {
      "category": "cli",
      "slug": "dom-enabled",
      "title": "dom-enabled",
      "summary": "Command reference for dom-enabled.",
      "sourcePath": "docs/CLI.md",
      "editUrl": "https://github.com/freshtechbro/opendevbrowser/edit/main/docs/CLI.md",
      "contentHtml": "<h2>Overview</h2>\n<p>Command reference for dom-enabled.</p>\n<h2>Command</h2>\n<ul>\n<li>Name: dom-enabled</li>\n<li>Source: docs/CLI.md</li>\n</ul>\n<h2>Example</h2>\n<pre><code>\n\n\nnpx opendevbrowser dom-enabled --help\n\n\n\n</code></pre>",
      "codeSample": "npx opendevbrowser dom-enabled --help"
    },
    "cli/dom-checked": {
      "category": "cli",
      "slug": "dom-checked",
      "title": "dom-checked",
      "summary": "Command reference for dom-checked.",
      "sourcePath": "docs/CLI.md",
      "editUrl": "https://github.com/freshtechbro/opendevbrowser/edit/main/docs/CLI.md",
      "contentHtml": "<h2>Overview</h2>\n<p>Command reference for dom-checked.</p>\n<h2>Command</h2>\n<ul>\n<li>Name: dom-checked</li>\n<li>Source: docs/CLI.md</li>\n</ul>\n<h2>Example</h2>\n<pre><code>\n\n\nnpx opendevbrowser dom-checked --help\n\n\n\n</code></pre>",
      "codeSample": "npx opendevbrowser dom-checked --help"
    },
    "cli/clone-page": {
      "category": "cli",
      "slug": "clone-page",
      "title": "clone-page",
      "summary": "Command reference for clone-page.",
      "sourcePath": "docs/CLI.md",
      "editUrl": "https://github.com/freshtechbro/opendevbrowser/edit/main/docs/CLI.md",
      "contentHtml": "<h2>Overview</h2>\n<p>Command reference for clone-page.</p>\n<h2>Command</h2>\n<ul>\n<li>Name: clone-page</li>\n<li>Source: docs/CLI.md</li>\n</ul>\n<h2>Example</h2>\n<pre><code>\n\n\nnpx opendevbrowser clone-page --help\n\n\n\n</code></pre>",
      "codeSample": "npx opendevbrowser clone-page --help"
    },
    "cli/clone-component": {
      "category": "cli",
      "slug": "clone-component",
      "title": "clone-component",
      "summary": "Command reference for clone-component.",
      "sourcePath": "docs/CLI.md",
      "editUrl": "https://github.com/freshtechbro/opendevbrowser/edit/main/docs/CLI.md",
      "contentHtml": "<h2>Overview</h2>\n<p>Command reference for clone-component.</p>\n<h2>Command</h2>\n<ul>\n<li>Name: clone-component</li>\n<li>Source: docs/CLI.md</li>\n</ul>\n<h2>Example</h2>\n<pre><code>\n\n\nnpx opendevbrowser clone-component --help\n\n\n\n</code></pre>",
      "codeSample": "npx opendevbrowser clone-component --help"
    },
    "cli/perf": {
      "category": "cli",
      "slug": "perf",
      "title": "perf",
      "summary": "Command reference for perf.",
      "sourcePath": "docs/CLI.md",
      "editUrl": "https://github.com/freshtechbro/opendevbrowser/edit/main/docs/CLI.md",
      "contentHtml": "<h2>Overview</h2>\n<p>Command reference for perf.</p>\n<h2>Command</h2>\n<ul>\n<li>Name: perf</li>\n<li>Source: docs/CLI.md</li>\n</ul>\n<h2>Example</h2>\n<pre><code>\n\n\nnpx opendevbrowser perf --help\n\n\n\n</code></pre>",
      "codeSample": "npx opendevbrowser perf --help"
    },
    "cli/screenshot": {
      "category": "cli",
      "slug": "screenshot",
      "title": "screenshot",
      "summary": "Command reference for screenshot.",
      "sourcePath": "docs/CLI.md",
      "editUrl": "https://github.com/freshtechbro/opendevbrowser/edit/main/docs/CLI.md",
      "contentHtml": "<h2>Overview</h2>\n<p>Command reference for screenshot.</p>\n<h2>Command</h2>\n<ul>\n<li>Name: screenshot</li>\n<li>Source: docs/CLI.md</li>\n</ul>\n<h2>Example</h2>\n<pre><code>\n\n\nnpx opendevbrowser screenshot --help\n\n\n\n</code></pre>",
      "codeSample": "npx opendevbrowser screenshot --help"
    },
    "cli/console-poll": {
      "category": "cli",
      "slug": "console-poll",
      "title": "console-poll",
      "summary": "Command reference for console-poll.",
      "sourcePath": "docs/CLI.md",
      "editUrl": "https://github.com/freshtechbro/opendevbrowser/edit/main/docs/CLI.md",
      "contentHtml": "<h2>Overview</h2>\n<p>Command reference for console-poll.</p>\n<h2>Command</h2>\n<ul>\n<li>Name: console-poll</li>\n<li>Source: docs/CLI.md</li>\n</ul>\n<h2>Example</h2>\n<pre><code>\n\n\nnpx opendevbrowser console-poll --help\n\n\n\n</code></pre>",
      "codeSample": "npx opendevbrowser console-poll --help"
    },
    "cli/network-poll": {
      "category": "cli",
      "slug": "network-poll",
      "title": "network-poll",
      "summary": "Command reference for network-poll.",
      "sourcePath": "docs/CLI.md",
      "editUrl": "https://github.com/freshtechbro/opendevbrowser/edit/main/docs/CLI.md",
      "contentHtml": "<h2>Overview</h2>\n<p>Command reference for network-poll.</p>\n<h2>Command</h2>\n<ul>\n<li>Name: network-poll</li>\n<li>Source: docs/CLI.md</li>\n</ul>\n<h2>Example</h2>\n<pre><code>\n\n\nnpx opendevbrowser network-poll --help\n\n\n\n</code></pre>",
      "codeSample": "npx opendevbrowser network-poll --help"
    },
    "cli/debug-trace-snapshot": {
      "category": "cli",
      "slug": "debug-trace-snapshot",
      "title": "debug-trace-snapshot",
      "summary": "Command reference for debug-trace-snapshot.",
      "sourcePath": "docs/CLI.md",
      "editUrl": "https://github.com/freshtechbro/opendevbrowser/edit/main/docs/CLI.md",
      "contentHtml": "<h2>Overview</h2>\n<p>Command reference for debug-trace-snapshot.</p>\n<h2>Command</h2>\n<ul>\n<li>Name: debug-trace-snapshot</li>\n<li>Source: docs/CLI.md</li>\n</ul>\n<h2>Example</h2>\n<pre><code>\n\n\nnpx opendevbrowser debug-trace-snapshot --help\n\n\n\n</code></pre>",
      "codeSample": "npx opendevbrowser debug-trace-snapshot --help"
    },
    "cli/macro-resolve": {
      "category": "cli",
      "slug": "macro-resolve",
      "title": "macro-resolve",
      "summary": "Command reference for macro-resolve.",
      "sourcePath": "docs/CLI.md",
      "editUrl": "https://github.com/freshtechbro/opendevbrowser/edit/main/docs/CLI.md",
      "contentHtml": "<h2>Overview</h2>\n<p>Command reference for macro-resolve.</p>\n<h2>Command</h2>\n<ul>\n<li>Name: macro-resolve</li>\n<li>Source: docs/CLI.md</li>\n</ul>\n<h2>Example</h2>\n<pre><code>\n\n\nnpx opendevbrowser macro-resolve --help\n\n\n\n</code></pre>",
      "codeSample": "npx opendevbrowser macro-resolve --help"
    },
    "cli/annotate": {
      "category": "cli",
      "slug": "annotate",
      "title": "annotate",
      "summary": "Command reference for annotate.",
      "sourcePath": "docs/CLI.md",
      "editUrl": "https://github.com/freshtechbro/opendevbrowser/edit/main/docs/CLI.md",
      "contentHtml": "<h2>Overview</h2>\n<p>Command reference for annotate.</p>\n<h2>Command</h2>\n<ul>\n<li>Name: annotate</li>\n<li>Source: docs/CLI.md</li>\n</ul>\n<h2>Example</h2>\n<pre><code>\n\n\nnpx opendevbrowser annotate --help\n\n\n\n</code></pre>",
      "codeSample": "npx opendevbrowser annotate --help"
    },
    "cli/rpc": {
      "category": "cli",
      "slug": "rpc",
      "title": "rpc",
      "summary": "Command reference for rpc.",
      "sourcePath": "docs/CLI.md",
      "editUrl": "https://github.com/freshtechbro/opendevbrowser/edit/main/docs/CLI.md",
      "contentHtml": "<h2>Overview</h2>\n<p>Command reference for rpc.</p>\n<h2>Command</h2>\n<ul>\n<li>Name: rpc</li>\n<li>Source: docs/CLI.md</li>\n</ul>\n<h2>Example</h2>\n<pre><code>\n\n\nnpx opendevbrowser rpc --help\n\n\n\n</code></pre>",
      "codeSample": "npx opendevbrowser rpc --help"
    },
    "extension/setup": {
      "category": "extension",
      "slug": "setup",
      "title": "Extension Setup",
      "summary": "- Connects to the local relay server (ws://127.0.0.1:<port>/extension). - Uses the Chrome Debugger API to forward CDP commands across attached tabs/targets (with a primary tab used for handshake/status). - Allows OpenDev",
      "sourcePath": "docs/EXTENSION.md",
      "editUrl": "https://github.com/freshtechbro/opendevbrowser/edit/main/docs/EXTENSION.md",
      "contentHtml": "<ul>\n<li>Connects to the local relay server (<code>ws://127.0.0.1:&lt;port&gt;/extension</code>).</li>\n<li>Uses the Chrome Debugger API to forward CDP commands across attached tabs/targets (with a primary tab used for handshake/status).</li>\n<li>Allows OpenDevBrowser to control tabs without launching a new browser.</li>\n<li>Supports multi-tab CDP routing with flat sessions (Chrome 125+).</li>\n<li>Exposes top-level tabs and auto-attached child targets (workers/OOPIF) through <code>Target.getTargets</code>.</li>\n<li>Launch defaults to extension relay when available; managed/CDPConnect require explicit user choice.</li>\n<li>Extension mode is headed-only; extension-intent headless launch/connect is rejected with <code>unsupported_mode</code>.</li>\n<li>When hub mode is enabled, the hub daemon is the sole relay owner and enforces FIFO leases (no local relay fallback).</li>\n</ul>",
      "codeSample": "npx opendevbrowser serve"
    },
    "extension/relay-protocol": {
      "category": "extension",
      "slug": "relay-protocol",
      "title": "Relay Protocol",
      "summary": "When auto-pair is enabled: 1. The extension calls the local discovery endpoint (/config) to learn the relay port and pairing requirement. 2. If pairing is required, it fetches the token from /pair. 3. The extension conne",
      "sourcePath": "docs/EXTENSION.md",
      "editUrl": "https://github.com/freshtechbro/opendevbrowser/edit/main/docs/EXTENSION.md",
      "contentHtml": "<p>When auto-pair is enabled:</p>\n<ol>\n<li>The extension calls the local discovery endpoint (<code>/config</code>) to learn the relay port and pairing requirement.</li>\n<li>If pairing is required, it fetches the token from <code>/pair</code>.</li>\n<li>The extension connects to the relay with the pairing token.</li>\n</ol>\n<p><code>/config</code> and <code>/pair</code> reject explicit non-extension origins. Chrome extension requests may omit the <code>Origin</code> header, so the relay also accepts missing-Origin requests. CLI/tools may call <code>/config</code> and <code>/pair</code> to auto-fetch relay settings and tokens.</p>\n<p>Relay ops endpoint: <code>ws://127.0.0.1:&lt;relayPort&gt;/ops</code>. The CLI/tool <code>connect</code> command accepts base relay WS URLs</p>\n<p>(for example <code>ws://127.0.0.1:&lt;relayPort&gt;</code>) and normalizes them to <code>/ops</code>.</p>\n<p>Legacy relay <code>/cdp</code> is still available but must be explicitly opted in (CLI: <code>--extension-legacy</code>).</p>\n<p>When pairing is enabled, both <code>/ops</code> and <code>/cdp</code> require a relay token (<code>?token=&lt;relayToken&gt;</code>). Tools and the CLI auto-fetch <code>/config</code> and <code>/pair</code></p>\n<p>to obtain the token before connecting, so users should not manually pass or share tokenized URLs.</p>\n<p>Readiness checks:</p>\n<pre><code>\nnpx opendevbrowser status --daemon --output-format json\n\nnpx opendevbrowser --help\n\n</code></pre>\n<p>Expected extension-ready daemon fields:</p>\n<ul>\n<li><code>extensionConnected=true</code></li>\n<li><code>extensionHandshakeComplete=true</code></li>\n</ul>",
      "codeSample": "npx opendevbrowser status --daemon --output-format json"
    },
    "workflows/research": {
      "category": "workflows",
      "slug": "research",
      "title": "Research Workflow",
      "summary": "OpenDevBrowser CLI Command-line interface for installing and managing the OpenDevBrowser plugin, plus automation commands for agents. Status: active Last updated: 2026-02-24 OpenDevBrowser exposes 48 opendevbrowser_ tool",
      "sourcePath": "docs/CLI.md",
      "editUrl": "https://github.com/freshtechbro/opendevbrowser/edit/main/docs/CLI.md",
      "contentHtml": "<h1>OpenDevBrowser CLI</h1>\n<p>Command-line interface for installing and managing the OpenDevBrowser plugin, plus automation commands for agents.</p>\n<p>Status: active</p>\n<p>Last updated: 2026-02-24</p>\n<p>OpenDevBrowser exposes 48 <code>opendevbrowser_*</code> tools; see <code>README.md</code> and <code>docs/SURFACE_REFERENCE.md</code> for the full inventories.</p>\n<p>Agent runs should start with <code>opendevbrowser_prompting_guide</code> (or <code>opendevbrowser-best-practices</code> quickstart via <code>opendevbrowser_skill_load</code>); use continuity guidance only for long-running handoff/compaction.</p>\n<p>Tool-only commands <code>opendevbrowser_prompting_guide</code>, <code>opendevbrowser_skill_list</code>, and <code>opendevbrowser_skill_load</code> run locally via the skill loader and do not require relay endpoints. In hub-enabled configurations, the plugin may still ensure the daemon is available.</p>\n<p>CLI-only power command <code>rpc</code> intentionally has no tool equivalent; it is an internal daemon escape hatch behind an explicit safety flag and should be used with extreme caution.</p>\n<p>Dependency inventory: <code>docs/DEPENDENCIES.md</code></p>\n<p>First-run pre-release onboarding: <code>docs/FIRST_RUN_ONBOARDING.md</code></p>\n<p>Parity and skill-pack gates:</p>\n<pre><code>\nnpm run test -- tests/parity-matrix.test.ts\n\n./skills/opendevbrowser-best-practices/scripts/validate-skill-assets.sh\n\n</code></pre>\n<h2>Installation</h2>\n<p>Requires Node.js <code>&gt;=18</code>.</p>\n<pre><code>\n# Interactive installation (prompts for location)\n\nnpx opendevbrowser\n\n\n\n# Non-interactive with flags\n\nnpx opendevbrowser --global   # Install to ~/.config/opencode/opencode.json\n\nnpx opendevbrowser --local    # Install to ./opencode.json\n\n\n\n# Optional: persistent global CLI\n\nnpm install -g opendevbrowser\n\nopendevbrowser --version\n\n</code></pre>\n<h3>Pre-release local package onboarding (no npm publish)</h3>\n<pre><code>\ncd /Users/bishopdotun/Documents/DevProjects/opendevbrowser\n\nnpm pack\n\n\n\nWORKDIR=$(mktemp -d /tmp/opendevbrowser-first-run-XXXXXX)\n\ncd &quot;$WORKDIR&quot;\n\nnpm init -y\n\nnpm install /Users/bishopdotun/Documents/DevProjects/opendevbrowser/opendevbrowser-0.0.15.tgz\n\nnpx --no-install opendevbrowser --help\n\n</code></pre>\n<p>Load extension unpacked from:</p>\n<ul>\n<li><code>$WORKDIR/node_modules/opendevbrowser/extension</code></li>\n</ul>\n<p>For isolated daemon tests on machines that already run OpenDevBrowser, set:</p>\n<pre><code>\nexport OPENCODE_CONFIG_DIR=/tmp/opendevbrowser-first-run-isolated/config\n\nexport OPENCODE_CACHE_DIR=/tmp/opendevbrowser-first-run-isolated/cache\n\n</code></pre>\n<p>By default (<code>--skills-global</code>), the CLI installs bundled skills to global OpenCode/Codex/ClaudeCode/AmpCLI locations (legacy <code>claude</code>/<code>amp</code> labels are still synchronized for compatibility). Use <code>--skills-local</code> for project-local locations or <code>--no-skills</code> to skip skill installation. Use <code>--full</code> to always create <code>opendevbrowser.jsonc</code> and pre-extract extension assets.</p>\n<h3>Skill discovery order</h3>\n<p>The skill loader discovers skills in this order (first match wins):</p>\n<ol>\n<li>Project-local: <code>./.opencode/skill</code></li>\n<li>Global: <code>~/.config/opencode/skill</code> (or <code>$OPENCODE_CONFIG_DIR/skill</code>)</li>\n<li>Compatibility (project): <code>./.codex/skills</code></li>\n<li>Compatibility (global): <code>$CODEX_HOME/skills</code> (fallback <code>~/.codex/skills</code>)</li>\n<li>Compatibility (project): <code>./.claude/skills</code></li>\n<li>Compatibility (global): <code>$CLAUDECODE_HOME/skills</code> or <code>$CLAUDE_HOME/skills</code> (fallback <code>~/.claude/skills</code>)</li>\n<li>Compatibility (project): <code>./.amp/skills</code></li>\n<li>Compatibility (global): <code>$AMPCLI_HOME/skills</code> or <code>$AMP_CLI_HOME/skills</code> or <code>$AMP_HOME/skills</code> (fallback <code>~/.amp/skills</code>)</li>\n<li>Extra paths from <code>skillPaths</code> (advanced)</li>\n</ol>\n<h2>Output formats</h2>\n<p>Use <code>--output-format</code> to switch output formats for automation.</p>\n<ul>\n<li><code>text</code> (default): human-friendly output</li>\n<li><code>json</code>: single JSON object</li>\n<li><code>stream-json</code>: emit one JSON object per line for arrays; otherwise emits a single JSON object</li>\n</ul>\n<p>Use <code>--quiet</code> to suppress output. Use <code>--no-interactive</code> (alias of <code>--no-prompt</code>) to disable prompts.</p>\n<h2>Exit codes</h2>\n<ul>\n<li><code>0</code>: success</li>\n<li><code>1</code>: usage error (invalid args, missing flags)</li>\n<li><code>2</code>: execution error (runtime/daemon failures)</li>\n<li><code>10</code>: disconnected (daemon not running or unreachable)</li>\n</ul>\n<p>Fatal errors are emitted even when <code>--quiet</code> is set. For JSON output, fatal errors are emitted as:</p>\n<pre><code>\n{ &quot;success&quot;: false, &quot;error&quot;: &quot;message&quot;, &quot;exitCode&quot;: 2 }\n\n</code></pre>\n<h2>Argument validation</h2>\n<p>The CLI validates common flags early and returns a usage error (<code>exitCode: 1</code>) when inputs are invalid.</p>\n<ul>\n<li>Conflicting flags are rejected (examples: <code>--global</code> + <code>--local</code>, <code>--skills-global</code> + <code>--skills-local</code>).</li>\n<li>Numeric flags must be positive integers:</li>\n<li><code>--port</code>, <code>--cdp-port</code></li>\n<li><code>--wait-timeout-ms</code>, <code>--timeout-ms</code></li>\n</ul>\n<h2>Surface inventory (source-accurate)</h2>\n<p>Canonical inventory document: <code>docs/SURFACE_REFERENCE.md</code>.</p>\n<h3>CLI command surface</h3>\n<ul>\n<li>Total commands: <code>55</code>.</li>\n<li>Categories: install/runtime management, session/connection, navigation, interaction, targets/pages, DOM inspection, export/diagnostics/macro/annotation, and internal power (<code>rpc</code>).</li>\n</ul>\n<h3>Tool surface</h3>\n<ul>\n<li>Total tools: <code>48</code> (<code>opendevbrowser_*</code>).</li>\n<li>Tool-only surface (no CLI equivalent): <code>opendevbrowser_prompting_guide</code>, <code>opendevbrowser_skill_list</code>, <code>opendevbrowser_skill_load</code>.</li>\n<li>CLI-only surface (no tool equivalent): <code>artifacts</code>, <code>rpc</code>.</li>\n</ul>\n<h3>Relay channel surface</h3>\n<ul>\n<li><code>/ops</code> (default extension channel): high-level command protocol; see <code>docs/SURFACE_REFERENCE.md</code> for all <code>38</code> command names.</li>\n<li><code>/cdp</code> (legacy): low-level <code>forwardCDPCommand</code> relay path with explicit opt-in (<code>--extension-legacy</code>).</li>\n</ul>\n<h2>Commands</h2>\n<h3>Install (default)</h3>\n<pre><code>\n# Interactive - prompts for global or local\n\nnpx opendevbrowser\n\n\n\n# Global installation (user-wide)\n\nnpx opendevbrowser --global\n\nnpx opendevbrowser -g\n\n\n\n# Local installation (current project)\n\nnpx opendevbrowser --local\n\nnpx opendevbrowser -l\n\n\n\n# Skip prompts, use default (global)\n\nnpx opendevbrowser --no-prompt\n\nnpx opendevbrowser --no-interactive\n\n\n\n# Full install (config + extension assets)\n\nnpx opendevbrowser --full\n\n\n\n# Also create opendevbrowser.jsonc config file\n\nnpx opendevbrowser --global --with-config\n\n\n\n# Full install (plugin + config + bundled skills)\n\nnpx opendevbrowser --global --with-config --skills-global\n\n\n\n# Install skills locally (project scope)\n\nnpx opendevbrowser --skills-local\n\n\n\n# Skip installing skills\n\nnpx opendevbrowser --no-skills\n\n</code></pre>\n<p>On first successful install, the CLI attempts to install daemon auto-start on supported platforms (macOS/Windows) so the relay is</p>\n<p>available on login. You can remove it later with <code>npx opendevbrowser daemon uninstall</code>.</p>\n<h3>Update</h3>\n<p>Clear the OpenCode cache to trigger reinstallation of the latest version.</p>\n<pre><code>\nnpx opendevbrowser --update\n\nnpx opendevbrowser -u\n\n</code></pre>\n<p>This removes cached files from <code>~/.cache/opencode/node_modules/opendevbrowser/</code>. OpenCode will download the latest version on next run.</p>\n<h3>Uninstall</h3>\n<p>Remove the plugin from configuration.</p>\n<pre><code>\n# Remove from global config\n\nnpx opendevbrowser --uninstall --global\n\n\n\n# Remove from local config\n\nnpx opendevbrowser --uninstall --local\n\n\n\n# Interactive - prompts which to remove if both exist\n\nnpx opendevbrowser --uninstall\n\n</code></pre>\n<h3>Help / Version</h3>\n<pre><code>\nnpx opendevbrowser --help\n\nnpx opendevbrowser -h\n\n\n\nnpx opendevbrowser --version\n\nnpx opendevbrowser -v\n\n</code></pre>\n<p><code>--help</code> now prints a complete, agent-oriented inventory:</p>\n<ul>\n<li>All CLI commands (55) grouped by function, each with one-line descriptions.</li>\n<li>All supported CLI flags, grouped by install/session/navigation/workflow usage.</li>\n<li>All <code>opendevbrowser_*</code> tools (48), each with one-line descriptions.</li>\n<li>Macro execute timeout guidance via <code>--timeout-ms</code> for slow <code>macro-resolve --execute</code> runs.</li>\n<li>Canonical inventory pointers: <code>docs/SURFACE_REFERENCE.md</code>, <code>src/tools/index.ts</code>, and this CLI guide.</li>\n</ul>\n<p>Operational help parity check:</p>\n<pre><code>\nnpx opendevbrowser --help\n\nnpx opendevbrowser help\n\n</code></pre>\n<h2>Automation commands (daemon)</h2>\n<h3>Serve (daemon)</h3>\n<p>Start a local daemon to keep sessions alive between commands.</p>\n<pre><code>\nnpx opendevbrowser serve\n\nnpx opendevbrowser serve --port 8788 --token my-token\n\n\n\n# Stop the daemon\n\nnpx opendevbrowser serve --stop\n\n</code></pre>\n<p>The daemon listens on <code>127.0.0.1</code> and starts the relay the extension connects to. Metadata lives in</p>\n<p><code>~/.cache/opendevbrowser/daemon.json</code> (cache only);</p>\n<p><code>/status</code> is the source of truth. The daemon port/token are persisted in <code>opendevbrowser.jsonc</code> as <code>daemonPort</code>/<code>daemonToken</code>.</p>\n<p><code>serve</code> now performs a stale-daemon preflight and terminates orphan <code>opendevbrowser serve</code> processes before starting (or before</p>\n<p>returning &quot;already running&quot;), while preserving the active daemon on the requested port.</p>\n<p>If you run onboarding tests alongside an existing daemon, isolate config/cache via <code>OPENCODE_CONFIG_DIR</code> and <code>OPENCODE_CACHE_DIR</code></p>\n<p>to avoid token/port collisions between sessions.</p>\n<p>If <code>nativeExtensionId</code> is set in <code>opendevbrowser.jsonc</code>, <code>serve</code> will auto-install the native messaging host when it is missing.</p>\n<p>If it is not set, <code>serve</code> attempts to auto-detect the extension ID from Chrome, Brave, or Chromium profiles; if detection fails it continues startup.</p>\n<p>Relay HTTP endpoints (<code>/config</code>, <code>/status</code>, <code>/pair</code>) accept extension origins and loopback requests with no <code>Origin</code> (including</p>\n<p><code>Origin: null</code>) to support MV3 + PNA. Non-extension origins are rejected; preflights include</p>\n<p><code>Access-Control-Allow-Private-Network: true</code> when requested.</p>\n<p>#### Manual recovery (if the daemon is down or stuck)</p>\n<pre><code>\n# Start the daemon manually\n\nnpx opendevbrowser serve\n\n\n\n# Stop/kill an existing daemon before restarting\n\nnpx opendevbrowser serve --stop\n\n</code></pre>\n<h3>Daemon auto-start</h3>\n<p>Install or remove OS-level auto-start for the daemon. This uses a stable, absolute CLI entrypoint (no PATH reliance), and returns</p>\n<p>machine-readable output with <code>--output-format json</code>.</p>\n<pre><code>\nnpx opendevbrowser daemon install\n\nnpx opendevbrowser daemon uninstall\n\nnpx opendevbrowser daemon status\n\n</code></pre>\n<p>Behavior:</p>\n<ul>\n<li>macOS: LaunchAgent at <code>~/Library/LaunchAgents/com.opendevbrowser.daemon.plist</code> targeting an absolute CLI entrypoint.</li>\n<li>Windows: per-user Task Scheduler logon task targeting an absolute CLI entrypoint.</li>\n<li><code>daemon status</code> reports <code>{ installed, running, status? }</code> and does not throw a usage error when missing.</li>\n<li><code>daemon status</code> returns exit code <code>10</code> when the daemon is not running.</li>\n</ul>\n<p>Exit codes align with the CLI:</p>\n<ul>\n<li><code>0</code>: success</li>\n<li><code>1</code>: usage error</li>\n<li><code>2</code>: execution error (permissions, missing binary, OS service failure)</li>\n<li><code>10</code>: disconnected/not running (status only)</li>\n</ul>\n<p>#### Auto-start install + manual fallback</p>\n<pre><code>\n# Install auto-start (recommended)\n\nnpx opendevbrowser daemon install\n\n\n\n# If auto-start fails, start manually\n\nnpx opendevbrowser serve\n\n\n\n# Stop/kill before restarting\n\nnpx opendevbrowser serve --stop\n\n</code></pre>\n<h3>Native messaging host</h3>\n<p>Install the native messaging host for the extension to use as a fallback transport when the relay WebSocket is unavailable.</p>\n<pre><code>\n# Install native host (requires extension ID)\n\nnpx opendevbrowser native install &lt;extension-id&gt;\n\n\n\n# Check native host status\n\nnpx opendevbrowser native status\n\n\n\n# Remove native host\n\nnpx opendevbrowser native uninstall\n\n</code></pre>\n<p>Notes:</p>\n<ul>\n<li>Supported on macOS, Linux, and Windows.</li>\n<li>Windows install writes a registry entry under <code>HKCU\\Software\\Google\\Chrome\\NativeMessagingHosts\\com.opendevbrowser.native</code>.</li>\n<li><code>native install</code> requires the extension ID (chrome://extensions → copy ID).</li>\n<li>Set <code>nativeExtensionId</code> in <code>opendevbrowser.jsonc</code> to allow <code>serve</code> to auto-install the native host when missing (preferred).</li>\n<li><code>serve</code> also attempts auto-detection from Chrome, Brave, or Chromium profiles, but explicit config is more reliable.</li>\n<li><code>native status</code> reports installed state + extension ID from the manifest.</li>\n<li>Use <code>--transport native</code> with <code>status</code> to check native host status without requiring the daemon.</li>\n</ul>\n<h3>Workflow wrappers</h3>\n<p>The workflow wrappers expose the finalized research/shopping/product-video surfaces from</p>\n<p><code>docs/RESEARCH_SHOPPING_PRODUCT_VIDEO_FINAL_SPEC.md</code>.</p>\n<p>#### Research (<code>research run</code>)</p>\n<pre><code>\nnpx opendevbrowser research run --topic &quot;browser automation&quot; --days 30 --mode compact\n\nnpx opendevbrowser research run --topic &quot;market map&quot; --from 2026-02-01 --to 2026-02-16 --source-selection all --mode json\n\nnpx opendevbrowser research run --topic &quot;creator tools&quot; --sources web,shopping --include-engagement --limit-per-source 5 --mode context\n\n</code></pre>\n<p>Flags:</p>\n<ul>\n<li><code>--topic</code> (required)</li>\n<li><code>--days</code></li>\n<li><code>--from</code></li>\n<li><code>--to</code></li>\n<li><code>--source-selection</code> (<code>auto|web|community|social|shopping|all</code>)</li>\n<li><code>--sources</code> (comma-separated concrete sources)</li>\n<li><code>--mode</code> (<code>compact|json|md|context|path</code>)</li>\n<li><code>--include-engagement</code></li>\n<li><code>--limit-per-source</code></li>\n<li><code>--output-dir</code></li>\n<li><code>--ttl-hours</code></li>\n<li><code>--use-cookies</code> (<code>true|false</code>; bare flag means <code>true</code>)</li>\n<li><code>--cookie-policy-override</code> (<code>off|auto|required</code>)</li>\n<li><code>--cookie-policy</code> (alias of <code>--cookie-policy-override</code>)</li>\n</ul>\n<p>#### Shopping (<code>shopping run</code>)</p>\n<pre><code>\nnpx opendevbrowser shopping run --query &quot;usb microphone&quot; --mode compact\n\nnpx opendevbrowser shopping run --query &quot;portable monitor&quot; --providers shopping/amazon,shopping/newegg --sort lowest_price --mode md\n\nnpx opendevbrowser shopping run --query &quot;desk chair&quot; --budget 250 --region us --mode path\n\n</code></pre>\n<p>Flags:</p>\n<ul>\n<li><code>--query</code> (required)</li>\n<li><code>--providers</code> (comma-separated; defaults to all v1 adapters)</li>\n<li><code>--budget</code></li>\n<li><code>--region</code></li>\n<li><code>--sort</code> (<code>best_deal|lowest_price|highest_rating|fastest_shipping</code>)</li>\n<li><code>--mode</code> (<code>compact|json|md|context|path</code>)</li>\n<li><code>--output-dir</code></li>\n<li><code>--ttl-hours</code></li>\n<li><code>--use-cookies</code> (<code>true|false</code>; bare flag means <code>true</code>)</li>\n<li><code>--cookie-policy-override</code> (<code>off|auto|required</code>)</li>\n<li><code>--cookie-policy</code> (alias of <code>--cookie-policy-override</code>)</li>\n</ul>\n<p>#### Product presentation asset (<code>product-video run</code>)</p>\n<pre><code>\nnpx opendevbrowser product-video run --product-url &quot;https://example.com/p/1&quot; --include-screenshots\n\nnpx opendevbrowser product-video run --product-name &quot;Sample Product&quot; --provider-hint shopping/amazon --output-dir /tmp/product-assets\n\n</code></pre>\n<p>Flags:</p>\n<ul>\n<li><code>--product-url</code> (required unless <code>--product-name</code> is provided)</li>\n<li><code>--product-name</code> (required unless <code>--product-url</code> is provided)</li>\n<li><code>--provider-hint</code></li>\n<li><code>--include-screenshots</code> (<code>true|false</code>; bare flag means <code>true</code>)</li>\n<li><code>--include-all-images</code> (<code>true|false</code>; bare flag means <code>true</code>)</li>\n<li><code>--include-copy</code> (<code>true|false</code>; bare flag means <code>true</code>)</li>\n<li><code>--output-dir</code></li>\n<li><code>--ttl-hours</code></li>\n<li><code>--use-cookies</code> (<code>true|false</code>; bare flag means <code>true</code>)</li>\n<li><code>--cookie-policy-override</code> (<code>off|auto|required</code>)</li>\n<li><code>--cookie-policy</code> (alias of <code>--cookie-policy-override</code>)</li>\n</ul>\n<p>Wrapper behavior:</p>\n<ul>\n<li>Timebox semantics are strict (<code>--days</code> is mutually exclusive with <code>--from/--to</code>).</li>\n<li>Render modes for <code>research</code> and <code>shopping</code> are shared: <code>compact|json|md|context|path</code>.</li>\n<li><code>product-video run</code> always returns a path-based local asset pack.</li>\n<li>Path-bearing modes persist artifacts under the configured output directory (or default tmp namespace) and include TTL metadata in manifest files.</li>\n<li>Workflow cookie policy defaults to <code>providers.cookiePolicy=auto</code> and source defaults to <code>providers.cookieSource</code> (<code>file</code>, <code>env</code>, or <code>inline</code>).</li>\n<li>Effective policy precedence is <code>--cookie-policy-override</code>/<code>--cookie-policy</code> &gt; <code>--use-cookies</code> &gt; config defaults.</li>\n<li><code>auto</code> attempts injection when cookies are available and continues when cookies are missing/unusable.</li>\n<li><code>required</code> fails fast with <code>reasonCode=auth_required</code> when cookie loading/injection/verification cannot establish a session.</li>\n<li>Cookie diagnostics are exposed in workflow metrics under <code>meta.metrics.cookie_diagnostics</code> and <code>meta.metrics.cookieDiagnostics</code>.</li>\n</ul>\n<h3>Artifact lifecycle cleanup</h3>\n<p>Use the artifact cleanup command to remove expired bundles generated by workflow runs:</p>\n<pre><code>\nnpx opendevbrowser artifacts cleanup --expired-only\n\nnpx opendevbrowser artifacts cleanup --expired-only --output-dir /tmp/opendevbrowser\n\n</code></pre>\n<p>Script helper:</p>\n<pre><code>\n./scripts/artifacts-cleanup.sh\n\n./scripts/artifacts-cleanup.sh /tmp/opendevbrowser\n\n</code></pre>\n<p>Notes:</p>\n<ul>\n<li><code>--expired-only</code> is required.</li>\n<li>Default cleanup root is <code>${TMPDIR:-/tmp}/opendevbrowser</code>.</li>\n<li>Output includes <code>removed</code> and <code>skipped</code> run paths.</li>\n</ul>\n<h3>Run (single-shot script)</h3>\n<p>Run a JSON script without the daemon.</p>\n<pre><code>\nnpx opendevbrowser run --script ./script.json --output-format json\n\n\n\n# Or pipe JSON\n\ncat ./script.json | npx opendevbrowser run --output-format stream-json\n\n\n\n# Optional launch flags for run\n\nnpx opendevbrowser run --script ./script.json --headless --profile default --start-url https://example.com\n\nnpx opendevbrowser run --script ./script.json --chrome-path &quot;/Applications/Google Chrome.app/Contents/MacOS/Google Chrome&quot; --flag &quot;--disable-gpu&quot;\n\n</code></pre>\n<p>Supported <code>run</code> launch flags:</p>\n<ul>\n<li><code>--headless</code></li>\n<li><code>--profile</code></li>\n<li><code>--persist-profile</code></li>\n<li><code>--chrome-path</code></li>\n<li><code>--start-url</code></li>\n<li><code>--flag</code> (repeatable)</li>\n</ul>\n<p>Script format:</p>\n<pre><code>\n[\n\n  { &quot;action&quot;: &quot;goto&quot;, &quot;args&quot;: { &quot;url&quot;: &quot;https://example.com&quot; } },\n\n  { &quot;action&quot;: &quot;snapshot&quot; },\n\n  { &quot;action&quot;: &quot;click&quot;, &quot;args&quot;: { &quot;ref&quot;: &quot;r1&quot; } }\n\n]\n\n</code></pre>\n<h2>Session commands (daemon required)</h2>\n<h3>Launch</h3>\n<pre><code>\nnpx opendevbrowser launch --profile default --start-url https://example.com\n\n\n\n# Extension relay controls\n\nnpx opendevbrowser launch --extension-only\n\nnpx opendevbrowser launch --no-extension\n\nnpx opendevbrowser launch --extension-legacy\n\nnpx opendevbrowser launch --wait-for-extension --wait-timeout-ms 30000\n\n</code></pre>\n<p>Flags:</p>\n<ul>\n<li><code>--headless</code></li>\n<li><code>--profile</code></li>\n<li><code>--start-url</code></li>\n<li><code>--chrome-path</code></li>\n<li><code>--persist-profile</code></li>\n<li><code>--flag</code> (repeatable)</li>\n<li><code>--no-extension</code></li>\n<li><code>--extension-only</code></li>\n<li><code>--extension-legacy</code></li>\n<li><code>--wait-for-extension</code></li>\n<li><code>--wait-timeout-ms</code></li>\n</ul>\n<p>Default behavior:</p>\n<ul>\n<li>Extension relay (<code>extension</code> mode) is the default when available, using the <code>/ops</code> WebSocket.</li>\n<li>If the extension is not connected, launch fails with guidance and exact commands for the explicit alternatives.</li>\n<li>Headless is never the default.</li>\n<li>Extension headless is unsupported. <code>launch --headless</code> must be paired with <code>--no-extension</code>; extension-intent headless requests fail with <code>unsupported_mode</code>.</li>\n<li>When hub mode is enabled, there is no local relay fallback. If the hub is unavailable, commands fail with guidance.</li>\n<li>Extension relay requires Chrome 125+ (flat CDP sessions).</li>\n</ul>\n<p>Interactive vs non-interactive:</p>\n<ul>\n<li>Interactive CLI (TTY): you will be prompted to connect the extension, then explicitly choose Managed or CDPConnect if you want to proceed.</li>\n<li>Non-interactive (agents/CI): the command fails fast and prints the exact commands to run for Managed or CDPConnect.</li>\n</ul>\n<h3>Connection flags &amp; status semantics</h3>\n<div class=\"docs-table-wrap\"><table>\n<thead><tr>\n<th>Flag / Status</th>\n<th>Meaning</th>\n<th>Notes</th>\n</tr></thead>\n<tbody>\n<tr>\n<td><code>--no-extension</code></td>\n<td>Force managed mode</td>\n<td>Bypasses relay and extension entirely.</td>\n</tr>\n<tr>\n<td><code>--extension-only</code></td>\n<td>Require extension mode</td>\n<td>Fails if extension is not connected/handshaken.</td>\n</tr>\n<tr>\n<td><code>--extension-legacy</code></td>\n<td>Use legacy extension relay</td>\n<td>Routes through relay <code>/cdp</code> instead of <code>/ops</code>.</td>\n</tr>\n<tr>\n<td><code>--wait-for-extension</code></td>\n<td>Wait for extension handshake</td>\n<td>Only applies to extension mode; waits up to <code>--wait-timeout-ms</code>.</td>\n</tr>\n<tr>\n<td><code>--wait-timeout-ms</code></td>\n<td>Max wait for extension</td>\n<td>Defaults to 30s.</td>\n</tr>\n<tr>\n<td><code>extensionConnected</code></td>\n<td>Extension websocket connected</td>\n<td><code>false</code> means popup isn’t connected to relay.</td>\n</tr>\n<tr>\n<td><code>extensionHandshakeComplete</code></td>\n<td>Extension handshake done</td>\n<td><code>false</code> means reconnect/repair from popup.</td>\n</tr>\n<tr>\n<td><code>opsConnected</code></td>\n<td>Active <code>/ops</code> client attached</td>\n<td><code>false</code> means no ops client is connected.</td>\n</tr>\n<tr>\n<td><code>cdpConnected</code></td>\n<td>Active <code>/cdp</code> client attached</td>\n<td>Expected <code>false</code> until a legacy <code>/cdp</code> session connects.</td>\n</tr>\n<tr>\n<td><code>pairingRequired</code></td>\n<td>Relay token required</td>\n<td>When <code>true</code>, both <code>/ops</code> and <code>/cdp</code> require a token (auto-fetched).</td>\n</tr>\n</tbody>\n</table></div>\n<h3>Connect</h3>\n<pre><code>\nnpx opendevbrowser connect --ws-endpoint ws://127.0.0.1:9222/devtools/browser/...\n\nnpx opendevbrowser connect --host 127.0.0.1 --cdp-port 9222\n\n</code></pre>\n<p>This command starts a <code>cdpConnect</code> session (attach to an existing Chrome with remote debugging enabled).</p>\n<p>If the <code>--ws-endpoint</code> points at the local relay (for example <code>ws://127.0.0.1:8787</code> or <code>ws://127.0.0.1:8787/ops</code>),</p>\n<p>the CLI will normalize to <code>/ops</code> and route through the extension relay (<code>extension</code> mode).</p>\n<p>Use <code>--extension-legacy</code> if you need the legacy <code>/cdp</code> relay path.</p>\n<p>When routing through the relay, the CLI automatically fetches relay config and the pairing token (if required) and authenticates</p>\n<p>the <code>/ops</code> or <code>/cdp</code> connection. Direct relay websocket connections without a token are rejected when pairing is enabled.</p>\n<h3>Relay binding queue</h3>\n<p>Hub binding is exclusive only for binding/legacy paths (for example <code>/cdp</code> and commands that require a binding). Additional clients are queued FIFO and wait up to 30s by default.</p>\n<p>If you see <code>RELAY_WAIT_TIMEOUT</code>, retry after the current binding expires or stop the other bound client.</p>\n<p>Relay behavior note: extension uses a single extension websocket, while the relay can serve multiple <code>/ops</code> clients. Disconnecting the extension or restarting the relay drops active sessions, including annotation flows. Reconnect via the popup (or restart the daemon) before retrying.</p>\n<h3>Concurrency semantics</h3>\n<ul>\n<li>Transport-level concurrency: <code>/ops</code> supports multi-client access and multiple sessions.</li>\n<li>Runtime scheduling uses <code>ExecutionKey = (sessionId, targetId)</code> with target-scoped queues.</li>\n<li>Same target stays FIFO; different targets in one session run in parallel up to <code>effectiveParallelCap</code>.</li>\n<li><code>session-per-worker</code> remains the safest baseline for simple operational isolation, but in-session multi-target parallelism is supported on <code>/ops</code>, managed, and <code>cdpConnect</code>.</li>\n<li>Use explicit <code>--target-id</code> routing for concurrent flows; treat <code>target-use</code> as ergonomic fallback only.</li>\n<li>Use <code>/ops</code> as the default concurrent relay channel. Use <code>--extension-legacy</code> (<code>/cdp</code>) only for compatibility-specific paths.</li>\n<li>Legacy <code>/cdp</code> stays sequential (<code>effectiveParallelCap=1</code>) by design.</li>\n<li>For managed parallel launches with persisted profiles, use unique profile directories per session (or disable persistence) to avoid ProcessSingleton/SingletonLock collisions.</li>\n<li>Parity divergences are registry-bound in <code>docs/PARITY_DECLARED_DIVERGENCES.md</code>.</li>\n</ul>\n<h3>Disconnect</h3>\n<pre><code>\nnpx opendevbrowser disconnect --session-id &lt;session-id&gt;\n\nnpx opendevbrowser disconnect --session-id &lt;session-id&gt; --close-browser\n\n</code></pre>\n<h3>Status</h3>\n<pre><code>\nnpx opendevbrowser status               # daemon status (default)\n\nnpx opendevbrowser status --daemon      # daemon status (explicit)\n\nnpx opendevbrowser status --session-id &lt;session-id&gt;\n\nnpx opendevbrowser status --transport native\n\n</code></pre>\n<h3>Cookie import</h3>\n<pre><code>\nnpx opendevbrowser cookie-import \\\n\n  --session-id &lt;session-id&gt; \\\n\n  --cookies &#39;[{&quot;name&quot;:&quot;session&quot;,&quot;value&quot;:&quot;abc123&quot;,&quot;url&quot;:&quot;https://example.com&quot;}]&#39;\n\n\n\nnpx opendevbrowser cookie-import \\\n\n  --session-id &lt;session-id&gt; \\\n\n  --cookies-file ./cookies.json \\\n\n  --strict=false \\\n\n  --request-id req-cookie-001\n\n</code></pre>\n<p>Notes:</p>\n<ul>\n<li>Provide exactly one cookies source: <code>--cookies</code> or <code>--cookies-file</code>.</li>\n<li><code>--strict</code> defaults to <code>true</code>.</li>\n<li>Supported across <code>managed</code>, default extension <code>/ops</code>, extension legacy <code>/cdp</code>, and direct <code>cdpConnect</code> sessions.</li>\n</ul>\n<h3>Cookie list</h3>\n<pre><code>\nnpx opendevbrowser cookie-list \\\n\n  --session-id &lt;session-id&gt;\n\n\n\nnpx opendevbrowser cookie-list \\\n\n  --session-id &lt;session-id&gt; \\\n\n  --url https://example.com \\\n\n  --url https://shop.example.com \\\n\n  --request-id req-cookie-list-001\n\n</code></pre>\n<p>Notes:</p>\n<ul>\n<li><code>--url</code> is optional and repeatable; each value is normalized and deduplicated.</li>\n<li>Supports <code>managed</code>, default extension <code>/ops</code>, extension legacy <code>/cdp</code>, and direct <code>cdpConnect</code> sessions.</li>\n</ul>\n<h3>Macro resolve</h3>\n<pre><code>\nnpx opendevbrowser macro-resolve --expression &#39;@web.search(&quot;openai&quot;)&#39;\n\nnpx opendevbrowser macro-resolve --expression &#39;@social.post(&quot;x&quot;, &quot;ship it&quot;)&#39; --default-provider social/x --include-catalog\n\nnpx opendevbrowser macro-resolve --expression &#39;@web.search(&quot;opendevbrowser&quot;)&#39; --execute --output-format json\n\nnpx opendevbrowser macro-resolve --expression &#39;@media.search(&quot;youtube transcript parity&quot;, &quot;youtube&quot;, 5)&#39; --execute --timeout-ms 120000 --output-format json\n\n</code></pre>\n<p>Notes:</p>\n<ul>\n<li>Default mode is resolve-only (returns the resolved action/provenance payload).</li>\n<li><code>--execute</code> runs the resolved provider action and returns additive execution metadata (<code>meta.tier.selected</code>, <code>meta.tier.reasonCode</code>, <code>meta.provenance.provider</code>, <code>meta.provenance.retrievalPath</code>, <code>meta.provenance.retrievedAt</code>).</li>\n<li><code>--timeout-ms</code> sets client-side daemon transport timeout for slow <code>--execute</code> runs.</li>\n<li><code>opendevbrowser --help</code> includes this timeout flag in the global flag inventory.</li>\n</ul>\n<h3>Blocker contract (v2)</h3>\n<p>Compatibility rule (v2):</p>\n<ul>\n<li>Blocker fields are additive-only and live under <code>meta.blocker</code> (or <code>execution.meta.blocker</code> for <code>macro-resolve --execute</code>).</li>\n<li>Existing success/error fields and codes remain unchanged.</li>\n<li>Consumers should treat missing blocker fields as backward-compatible <code>no blocker metadata</code>.</li>\n</ul>\n<p>Canonical placement:</p>\n<ul>\n<li><code>goto</code>: <code>data.meta.blockerState</code> + optional <code>data.meta.blocker</code>.</li>\n<li><code>wait</code>: <code>data.meta.blockerState</code> + optional <code>data.meta.blocker</code>.</li>\n<li><code>debug-trace-snapshot</code>: <code>data.meta.blockerState</code> + optional <code>data.meta.blocker</code> + optional <code>data.meta.blockerArtifacts</code>.</li>\n<li><code>macro-resolve --execute</code>: <code>data.execution.meta.ok</code> + optional <code>data.execution.meta.blocker</code>.</li>\n<li><code>status</code>: <code>data.meta.blockerState</code> + optional <code>data.meta.blockerResolution</code> (<code>resolved | unresolved | deferred</code>).</li>\n</ul>\n<p>Canonical examples:</p>\n<pre><code>\n{\n\n  &quot;command&quot;: &quot;goto&quot;,\n\n  &quot;success&quot;: true,\n\n  &quot;data&quot;: {\n\n    &quot;finalUrl&quot;: &quot;https://example.com&quot;,\n\n    &quot;status&quot;: 200,\n\n    &quot;timingMs&quot;: 412,\n\n    &quot;meta&quot;: {\n\n      &quot;blockerState&quot;: &quot;clear&quot;\n\n    }\n\n  }\n\n}\n\n</code></pre>\n<pre><code>\n{\n\n  &quot;command&quot;: &quot;goto&quot;,\n\n  &quot;success&quot;: true,\n\n  &quot;data&quot;: {\n\n    &quot;finalUrl&quot;: &quot;https://x.com/i/flow/login&quot;,\n\n    &quot;status&quot;: 200,\n\n    &quot;timingMs&quot;: 588,\n\n    &quot;meta&quot;: {\n\n      &quot;blockerState&quot;: &quot;active&quot;,\n\n      &quot;blocker&quot;: {\n\n        &quot;schemaVersion&quot;: &quot;1.0&quot;,\n\n        &quot;type&quot;: &quot;auth_required&quot;,\n\n        &quot;source&quot;: &quot;navigation&quot;,\n\n        &quot;confidence&quot;: 0.97,\n\n        &quot;retryable&quot;: false\n\n      }\n\n    }\n\n  }\n\n}\n\n</code></pre>\n<pre><code>\n{\n\n  &quot;command&quot;: &quot;wait&quot;,\n\n  &quot;success&quot;: true,\n\n  &quot;data&quot;: {\n\n    &quot;timingMs&quot;: 221,\n\n    &quot;meta&quot;: {\n\n      &quot;blockerState&quot;: &quot;clear&quot;\n\n    }\n\n  }\n\n}\n\n</code></pre>\n<pre><code>\n{\n\n  &quot;command&quot;: &quot;status&quot;,\n\n  &quot;success&quot;: true,\n\n  &quot;data&quot;: {\n\n    &quot;mode&quot;: &quot;managed&quot;,\n\n    &quot;activeTargetId&quot;: &quot;target-1&quot;,\n\n    &quot;url&quot;: &quot;https://x.com/i/flow/login&quot;,\n\n    &quot;title&quot;: &quot;Log in to X / X&quot;,\n\n    &quot;meta&quot;: {\n\n      &quot;blockerState&quot;: &quot;active&quot;,\n\n      &quot;blockerResolution&quot;: {\n\n        &quot;status&quot;: &quot;unresolved&quot;,\n\n        &quot;reason&quot;: &quot;verification_timeout&quot;,\n\n        &quot;updatedAt&quot;: &quot;2026-02-15T14:18:28.000Z&quot;\n\n      }\n\n    }\n\n  }\n\n}\n\n</code></pre>\n<pre><code>\n{\n\n  &quot;command&quot;: &quot;wait&quot;,\n\n  &quot;success&quot;: true,\n\n  &quot;data&quot;: {\n\n    &quot;timingMs&quot;: 1470,\n\n    &quot;meta&quot;: {\n\n      &quot;blockerState&quot;: &quot;active&quot;,\n\n      &quot;blocker&quot;: {\n\n        &quot;schemaVersion&quot;: &quot;1.0&quot;,\n\n        &quot;type&quot;: &quot;anti_bot_challenge&quot;,\n\n        &quot;source&quot;: &quot;navigation&quot;,\n\n        &quot;confidence&quot;: 0.96,\n\n        &quot;retryable&quot;: false\n\n      }\n\n    }\n\n  }\n\n}\n\n</code></pre>\n<pre><code>\n{\n\n  &quot;command&quot;: &quot;debug-trace-snapshot&quot;,\n\n  &quot;success&quot;: true,\n\n  &quot;data&quot;: {\n\n    &quot;requestId&quot;: &quot;req-debug-001&quot;,\n\n    &quot;meta&quot;: {\n\n      &quot;blockerState&quot;: &quot;clear&quot;\n\n    }\n\n  }\n\n}\n\n</code></pre>\n<pre><code>\n{\n\n  &quot;command&quot;: &quot;debug-trace-snapshot&quot;,\n\n  &quot;success&quot;: true,\n\n  &quot;data&quot;: {\n\n    &quot;requestId&quot;: &quot;req-debug-002&quot;,\n\n    &quot;meta&quot;: {\n\n      &quot;blockerState&quot;: &quot;active&quot;,\n\n      &quot;blocker&quot;: {\n\n        &quot;schemaVersion&quot;: &quot;1.0&quot;,\n\n        &quot;type&quot;: &quot;anti_bot_challenge&quot;,\n\n        &quot;source&quot;: &quot;network&quot;,\n\n        &quot;confidence&quot;: 0.96,\n\n        &quot;retryable&quot;: false\n\n      },\n\n      &quot;blockerArtifacts&quot;: {\n\n        &quot;schemaVersion&quot;: &quot;1.0&quot;,\n\n        &quot;hosts&quot;: [&quot;www.recaptcha.net&quot;, &quot;challenges.cloudflare.com&quot;]\n\n      }\n\n    }\n\n  }\n\n}\n\n</code></pre>\n<pre><code>\n{\n\n  &quot;command&quot;: &quot;macro-resolve --execute&quot;,\n\n  &quot;success&quot;: true,\n\n  &quot;data&quot;: {\n\n    &quot;runtime&quot;: &quot;macros&quot;,\n\n    &quot;execution&quot;: {\n\n      &quot;meta&quot;: {\n\n        &quot;ok&quot;: true,\n\n        &quot;partial&quot;: false\n\n      }\n\n    }\n\n  }\n\n}\n\n</code></pre>\n<pre><code>\n{\n\n  &quot;command&quot;: &quot;macro-resolve --execute&quot;,\n\n  &quot;success&quot;: true,\n\n  &quot;data&quot;: {\n\n    &quot;runtime&quot;: &quot;macros&quot;,\n\n    &quot;execution&quot;: {\n\n      &quot;meta&quot;: {\n\n        &quot;ok&quot;: false,\n\n        &quot;partial&quot;: true,\n\n        &quot;blocker&quot;: {\n\n          &quot;schemaVersion&quot;: &quot;1.0&quot;,\n\n          &quot;type&quot;: &quot;env_limited&quot;,\n\n          &quot;source&quot;: &quot;macro_execution&quot;,\n\n          &quot;confidence&quot;: 0.9,\n\n          &quot;retryable&quot;: true\n\n        }\n\n      }\n\n    }\n\n  }\n\n}\n\n</code></pre>\n<h3>RPC (power-user, internal)</h3>\n<p>Execute any daemon command directly. This bypasses the stable CLI command surface, is intentionally unsafe/internal, and requires <code>--unsafe-internal</code>.</p>\n<pre><code>\n# Minimal call (empty params object)\n\nnpx opendevbrowser rpc --unsafe-internal --name relay.status --output-format json\n\n\n\n# With inline JSON params\n\nnpx opendevbrowser rpc --unsafe-internal --name nav.goto \\\n\n  --params &#39;{&quot;sessionId&quot;:&quot;&lt;session-id&gt;&quot;,&quot;url&quot;:&quot;https://example.com&quot;,&quot;waitUntil&quot;:&quot;load&quot;,&quot;timeoutMs&quot;:30000}&#39; \\\n\n  --timeout-ms 45000 --output-format json\n\n\n\n# With params from file\n\nnpx opendevbrowser rpc --unsafe-internal --name session.status --params-file ./rpc-params.json --output-format json\n\n</code></pre>\n<p>Notes:</p>\n<ul>\n<li>Params must be a JSON object.</li>\n<li>Use <code>--output-format json</code> for machine-readable responses.</li>\n<li><code>rpc</code> is CLI-only by design and is not part of the stable tool parity surface.</li>\n<li><code>rpc</code> command names/params are internal and may change without compatibility guarantees.</li>\n<li>A bad <code>rpc</code> call can close sessions, navigate logged-in tabs, or trigger unintended side effects.</li>\n<li>Prefer stable commands (<code>goto</code>, <code>snapshot</code>, <code>click</code>, <code>type</code>, and related tool equivalents) whenever possible.</li>\n<li>Use <code>rpc</code> only when necessary, validate params carefully, and test in a disposable session first.</li>\n</ul>\n<h2>Navigation commands (daemon required)</h2>\n<h3>Goto</h3>\n<pre><code>\nnpx opendevbrowser goto --session-id &lt;session-id&gt; --url https://example.com\n\nnpx opendevbrowser goto --session-id &lt;session-id&gt; --url https://example.com --wait-until load --timeout-ms 30000\n\n</code></pre>\n<h3>Wait</h3>\n<pre><code>\nnpx opendevbrowser wait --session-id &lt;session-id&gt; --until load\n\nnpx opendevbrowser wait --session-id &lt;session-id&gt; --ref r12 --state visible --timeout-ms 15000\n\n</code></pre>\n<h3>Snapshot</h3>\n<pre><code>\nnpx opendevbrowser snapshot --session-id &lt;session-id&gt;\n\nnpx opendevbrowser snapshot --session-id &lt;session-id&gt; --max-chars 16000 --cursor &lt;cursor&gt;\n\n</code></pre>\n<h2>Interaction commands (daemon required)</h2>\n<h3>Click</h3>\n<pre><code>\nnpx opendevbrowser click --session-id &lt;session-id&gt; --ref r12\n\n</code></pre>\n<h3>Hover</h3>\n<pre><code>\nnpx opendevbrowser hover --session-id &lt;session-id&gt; --ref r12\n\n</code></pre>\n<h3>Press</h3>\n<pre><code>\nnpx opendevbrowser press --session-id &lt;session-id&gt; --key Enter\n\nnpx opendevbrowser press --session-id &lt;session-id&gt; --key Enter --ref r12\n\n</code></pre>\n<h3>Check / Uncheck</h3>\n<pre><code>\nnpx opendevbrowser check --session-id &lt;session-id&gt; --ref r12\n\nnpx opendevbrowser uncheck --session-id &lt;session-id&gt; --ref r12\n\n</code></pre>\n<h3>Type</h3>\n<pre><code>\nnpx opendevbrowser type --session-id &lt;session-id&gt; --ref r12 --text &quot;hello&quot;\n\nnpx opendevbrowser type --session-id &lt;session-id&gt; --ref r12 --text &quot;hello&quot; --clear --submit\n\n</code></pre>\n<h3>Select</h3>\n<pre><code>\nnpx opendevbrowser select --session-id &lt;session-id&gt; --ref r12 --values value1,value2\n\n</code></pre>\n<h3>Scroll</h3>\n<pre><code>\nnpx opendevbrowser scroll --session-id &lt;session-id&gt; --dy 500\n\nnpx opendevbrowser scroll --session-id &lt;session-id&gt; --ref r12 --dy 300\n\n</code></pre>\n<h3>Scroll into view</h3>\n<pre><code>\nnpx opendevbrowser scroll-into-view --session-id &lt;session-id&gt; --ref r12\n\n</code></pre>\n<h2>Annotation (direct + relay)</h2>\n<p>Annotations are available through both the CLI command and the <code>opendevbrowser_annotate</code> tool. The default transport (<code>auto</code>)</p>\n<p>uses direct CDP when possible and falls back to relay in extension sessions. See <code>docs/ANNOTATE.md</code> for setup and details.</p>\n<pre><code>\nnpx opendevbrowser annotate --session-id &lt;session-id&gt;\n\n\n\n# Force direct annotate on a target\n\nnpx opendevbrowser annotate --session-id &lt;session-id&gt; --transport direct --target-id &lt;target-id&gt;\n\n\n\n# Force relay annotate on a specific tab\n\nnpx opendevbrowser annotate --session-id &lt;session-id&gt; --transport relay --tab-id 123\n\n\n\n# With URL + context + debug metadata\n\nnpx opendevbrowser annotate --session-id &lt;session-id&gt; --url https://example.com \\\n\n  --screenshot-mode visible --context &quot;Review the hero layout&quot; --timeout-ms 90000 --debug\n\n</code></pre>\n<h2>Target commands (daemon required)</h2>\n<h3>Targets list</h3>\n<pre><code>\nnpx opendevbrowser targets-list --session-id &lt;session-id&gt;\n\nnpx opendevbrowser targets-list --session-id &lt;session-id&gt; --include-urls\n\n</code></pre>\n<h3>Target use</h3>\n<pre><code>\nnpx opendevbrowser target-use --session-id &lt;session-id&gt; --target-id &lt;target-id&gt;\n\n</code></pre>\n<h3>Target new</h3>\n<pre><code>\nnpx opendevbrowser target-new --session-id &lt;session-id&gt; --url https://example.com\n\n</code></pre>\n<h3>Target close</h3>\n<pre><code>\nnpx opendevbrowser target-close --session-id &lt;session-id&gt; --target-id &lt;target-id&gt;\n\n</code></pre>\n<h2>Page commands (daemon required)</h2>\n<h3>Page open</h3>\n<pre><code>\nnpx opendevbrowser page --session-id &lt;session-id&gt; --name main\n\nnpx opendevbrowser page --session-id &lt;session-id&gt; --name main --url https://example.com\n\n</code></pre>\n<h3>Pages list</h3>\n<pre><code>\nnpx opendevbrowser pages --session-id &lt;session-id&gt;\n\n</code></pre>\n<h3>Page close</h3>\n<pre><code>\nnpx opendevbrowser page-close --session-id &lt;session-id&gt; --name main\n\n</code></pre>\n<h2>DOM commands (daemon required)</h2>\n<h3>DOM HTML</h3>\n<pre><code>\nnpx opendevbrowser dom-html --session-id &lt;session-id&gt; --ref r12 --max-chars 8000\n\n</code></pre>\n<h3>DOM Text</h3>\n<pre><code>\nnpx opendevbrowser dom-text --session-id &lt;session-id&gt; --ref r12 --max-chars 8000\n\n</code></pre>\n<h3>DOM Attribute</h3>\n<pre><code>\nnpx opendevbrowser dom-attr --session-id &lt;session-id&gt; --ref r12 --attr aria-label\n\n</code></pre>\n<h3>DOM Value</h3>\n<pre><code>\nnpx opendevbrowser dom-value --session-id &lt;session-id&gt; --ref r12\n\n</code></pre>\n<h3>DOM State Checks</h3>\n<pre><code>\nnpx opendevbrowser dom-visible --session-id &lt;session-id&gt; --ref r12\n\nnpx opendevbrowser dom-enabled --session-id &lt;session-id&gt; --ref r12\n\nnpx opendevbrowser dom-checked --session-id &lt;session-id&gt; --ref r12\n\n</code></pre>\n<h2>Export commands (daemon required)</h2>\n<h3>Clone page</h3>\n<pre><code>\nnpx opendevbrowser clone-page --session-id &lt;session-id&gt;\n\n</code></pre>\n<h3>Clone component</h3>\n<pre><code>\nnpx opendevbrowser clone-component --session-id &lt;session-id&gt; --ref r12\n\n</code></pre>\n<h2>Devtools commands (daemon required)</h2>\n<h3>Performance metrics</h3>\n<pre><code>\nnpx opendevbrowser perf --session-id &lt;session-id&gt;\n\n</code></pre>\n<h3>Screenshot</h3>\n<pre><code>\nnpx opendevbrowser screenshot --session-id &lt;session-id&gt;\n\nnpx opendevbrowser screenshot --session-id &lt;session-id&gt; --path ./capture.png\n\nnpx opendevbrowser screenshot --session-id &lt;session-id&gt; --path ./capture.png --timeout-ms 60000\n\n</code></pre>\n<p>Notes:</p>\n<ul>\n<li><code>--timeout-ms</code> sets client-side daemon timeout for screenshot capture.</li>\n</ul>\n<h3>Console poll</h3>\n<pre><code>\nnpx opendevbrowser console-poll --session-id &lt;session-id&gt; --since-seq 0 --max 50\n\n</code></pre>\n<h3>Network poll</h3>\n<pre><code>\nnpx opendevbrowser network-poll --session-id &lt;session-id&gt; --since-seq 0 --max 50\n\n</code></pre>\n<h3>Debug trace snapshot</h3>\n<pre><code>\nnpx opendevbrowser debug-trace-snapshot --session-id &lt;session-id&gt;\n\nnpx opendevbrowser debug-trace-snapshot \\\n\n  --session-id &lt;session-id&gt; \\\n\n  --since-console-seq 100 \\\n\n  --since-network-seq 80 \\\n\n  --since-exception-seq 10 \\\n\n  --max 200 \\\n\n  --request-id req-debug-001\n\n</code></pre>\n<h2>Flags reference</h2>\n<h3>Global flags</h3>\n<div class=\"docs-table-wrap\"><table>\n<thead><tr>\n<th>Flag</th>\n<th>Short</th>\n<th>Description</th>\n</tr></thead>\n<tbody>\n<tr>\n<td><code>--global</code></td>\n<td><code>-g</code></td>\n<td>Install to <code>~/.config/opencode/opencode.json</code></td>\n</tr>\n<tr>\n<td><code>--local</code></td>\n<td><code>-l</code></td>\n<td>Install to <code>./opencode.json</code></td>\n</tr>\n<tr>\n<td><code>--update</code></td>\n<td><code>-u</code></td>\n<td>Clear cache to trigger reinstall</td>\n</tr>\n<tr>\n<td><code>--uninstall</code></td>\n<td></td>\n<td>Remove plugin from config</td>\n</tr>\n<tr>\n<td><code>--with-config</code></td>\n<td></td>\n<td>Also create <code>opendevbrowser.jsonc</code></td>\n</tr>\n<tr>\n<td><code>--full</code></td>\n<td><code>-f</code></td>\n<td>Create config and pre-extract extension assets</td>\n</tr>\n<tr>\n<td><code>--no-prompt</code></td>\n<td></td>\n<td>Skip prompts, use defaults</td>\n</tr>\n<tr>\n<td><code>--no-interactive</code></td>\n<td></td>\n<td>Alias of <code>--no-prompt</code></td>\n</tr>\n<tr>\n<td><code>--quiet</code></td>\n<td></td>\n<td>Suppress output</td>\n</tr>\n<tr>\n<td><code>--output-format</code></td>\n<td></td>\n<td><code>text</code>, <code>json</code>, or <code>stream-json</code></td>\n</tr>\n<tr>\n<td><code>--transport</code></td>\n<td></td>\n<td>Transport selector (<code>relay</code> or <code>native</code>) for transport-aware commands</td>\n</tr>\n<tr>\n<td><code>--daemon</code></td>\n<td></td>\n<td>Daemon status selector for <code>status</code></td>\n</tr>\n<tr>\n<td><code>--skills-global</code></td>\n<td></td>\n<td>Install skills to global OpenCode/Codex/ClaudeCode/AmpCLI directories (legacy <code>claude</code>/<code>amp</code> aliases also synced)</td>\n</tr>\n<tr>\n<td><code>--skills-local</code></td>\n<td></td>\n<td>Install skills to project-local OpenCode/Codex/ClaudeCode/AmpCLI directories (legacy <code>claude</code>/<code>amp</code> aliases also synced)</td>\n</tr>\n<tr>\n<td><code>--no-skills</code></td>\n<td></td>\n<td>Skip installing bundled skills</td>\n</tr>\n<tr>\n<td><code>--help</code></td>\n<td><code>-h</code></td>\n<td>Show usage information</td>\n</tr>\n<tr>\n<td><code>--version</code></td>\n<td><code>-v</code></td>\n<td>Show version number</td>\n</tr>\n</tbody>\n</table></div>\n<h3>Serve flags</h3>\n<div class=\"docs-table-wrap\"><table>\n<thead><tr>\n<th>Flag</th>\n<th>Description</th>\n</tr></thead>\n<tbody>\n<tr>\n<td><code>--port</code></td>\n<td>Override daemon port</td>\n</tr>\n<tr>\n<td><code>--token</code></td>\n<td>Override daemon token</td>\n</tr>\n<tr>\n<td><code>--stop</code></td>\n<td>Stop the daemon</td>\n</tr>\n</tbody>\n</table></div>\n<h3>Command-specific flags</h3>\n<p><strong>Session + connection</strong></p>\n<div class=\"docs-table-wrap\"><table>\n<thead><tr>\n<th>Flag</th>\n<th>Used by</th>\n<th>Description</th>\n</tr></thead>\n<tbody>\n<tr>\n<td><code>--session-id</code></td>\n<td>most daemon commands</td>\n<td>Active session id from <code>launch</code>/<code>connect</code></td>\n</tr>\n<tr>\n<td><code>--close-browser</code></td>\n<td><code>disconnect</code></td>\n<td>Close managed browser on disconnect</td>\n</tr>\n<tr>\n<td><code>--ws-endpoint</code></td>\n<td><code>connect</code></td>\n<td>Remote debugging websocket URL</td>\n</tr>\n<tr>\n<td><code>--host</code></td>\n<td><code>connect</code></td>\n<td>Host for CDP connection (<code>--cdp-port</code> required)</td>\n</tr>\n<tr>\n<td><code>--cdp-port</code></td>\n<td><code>connect</code></td>\n<td>CDP port for host-based connect</td>\n</tr>\n<tr>\n<td><code>--daemon</code></td>\n<td><code>status</code></td>\n<td>Force daemon status mode (mutually exclusive with <code>--session-id</code>)</td>\n</tr>\n<tr>\n<td><code>--no-extension</code></td>\n<td><code>launch</code></td>\n<td>Force managed mode (ignore extension)</td>\n</tr>\n<tr>\n<td><code>--extension-only</code></td>\n<td><code>launch</code></td>\n<td>Fail if extension not connected</td>\n</tr>\n<tr>\n<td><code>--extension-legacy</code></td>\n<td><code>launch</code>, <code>connect</code></td>\n<td>Use legacy extension relay (<code>/cdp</code>)</td>\n</tr>\n<tr>\n<td><code>--wait-for-extension</code></td>\n<td><code>launch</code></td>\n<td>Wait for extension handshake</td>\n</tr>\n<tr>\n<td><code>--wait-timeout-ms</code></td>\n<td><code>launch</code></td>\n<td>Max wait for extension handshake</td>\n</tr>\n<tr>\n<td><code>--cookies</code></td>\n<td><code>cookie-import</code></td>\n<td>Inline JSON array of cookie objects</td>\n</tr>\n<tr>\n<td><code>--cookies-file</code></td>\n<td><code>cookie-import</code></td>\n<td>Path to JSON file containing cookie objects</td>\n</tr>\n<tr>\n<td><code>--strict</code></td>\n<td><code>cookie-import</code></td>\n<td>Reject on invalid cookie entries (<code>true</code>/<code>false</code>)</td>\n</tr>\n<tr>\n<td><code>--request-id</code></td>\n<td><code>cookie-import</code>, <code>cookie-list</code>, <code>debug-trace-snapshot</code></td>\n<td>Optional request correlation id</td>\n</tr>\n<tr>\n<td><code>--expression</code></td>\n<td><code>macro-resolve</code></td>\n<td>Macro expression to resolve</td>\n</tr>\n<tr>\n<td><code>--default-provider</code></td>\n<td><code>macro-resolve</code></td>\n<td>Provider fallback for shorthand macros</td>\n</tr>\n<tr>\n<td><code>--include-catalog</code></td>\n<td><code>macro-resolve</code></td>\n<td>Include macro catalog in response</td>\n</tr>\n<tr>\n<td><code>--execute</code></td>\n<td><code>macro-resolve</code></td>\n<td>Execute the resolved provider action and include additive <code>meta.*</code> fields</td>\n</tr>\n<tr>\n<td><code>--timeout-ms</code></td>\n<td><code>macro-resolve</code></td>\n<td>Client-side daemon call timeout in ms</td>\n</tr>\n<tr>\n<td><code>--use-cookies</code></td>\n<td><code>research run</code>, <code>shopping run</code>, <code>product-video run</code></td>\n<td>Enable/disable provider cookie injection for the run (`true</td>\n<td>false<code>; bare flag means </code>true`)</td>\n</tr>\n<tr>\n<td><code>--cookie-policy-override</code></td>\n<td><code>research run</code>, <code>shopping run</code>, <code>product-video run</code></td>\n<td>Per-run provider cookie policy override (`off</td>\n<td>auto</td>\n<td>required`)</td>\n</tr>\n<tr>\n<td><code>--cookie-policy</code></td>\n<td><code>research run</code>, <code>shopping run</code>, <code>product-video run</code></td>\n<td>Alias of <code>--cookie-policy-override</code></td>\n</tr>\n</tbody>\n</table></div>\n<p><strong>Browser launch (launch/run)</strong></p>\n<div class=\"docs-table-wrap\"><table>\n<thead><tr>\n<th>Flag</th>\n<th>Used by</th>\n<th>Description</th>\n</tr></thead>\n<tbody>\n<tr>\n<td><code>--headless</code></td>\n<td><code>launch</code>, <code>run</code></td>\n<td>Run managed Chrome headless</td>\n</tr>\n<tr>\n<td><code>--profile</code></td>\n<td><code>launch</code>, <code>run</code></td>\n<td>Profile directory name</td>\n</tr>\n<tr>\n<td><code>--persist-profile</code></td>\n<td><code>launch</code>, <code>run</code></td>\n<td>Keep profile directory after run</td>\n</tr>\n<tr>\n<td><code>--chrome-path</code></td>\n<td><code>launch</code>, <code>run</code></td>\n<td>Explicit Chrome executable path</td>\n</tr>\n<tr>\n<td><code>--start-url</code></td>\n<td><code>launch</code>, <code>run</code></td>\n<td>Initial URL for the session</td>\n</tr>\n<tr>\n<td><code>--flag</code></td>\n<td><code>launch</code>, <code>run</code></td>\n<td>Additional Chrome flag (repeatable)</td>\n</tr>\n<tr>\n<td><code>--script</code></td>\n<td><code>run</code></td>\n<td>JSON script path</td>\n</tr>\n</tbody>\n</table></div>\n<p><strong>Navigation + waiting</strong></p>\n<div class=\"docs-table-wrap\"><table>\n<thead><tr>\n<th>Flag</th>\n<th>Used by</th>\n<th>Description</th>\n</tr></thead>\n<tbody>\n<tr>\n<td><code>--url</code></td>\n<td><code>goto</code>, <code>page</code>, <code>target-new</code>, <code>cookie-list</code></td>\n<td>URL to navigate/open or filter cookie listing</td>\n</tr>\n<tr>\n<td><code>--wait-until</code></td>\n<td><code>goto</code></td>\n<td>Load state (<code>load</code>, <code>domcontentloaded</code>, etc.)</td>\n</tr>\n<tr>\n<td><code>--timeout-ms</code></td>\n<td><code>goto</code>, <code>wait</code></td>\n<td>Timeout in ms</td>\n</tr>\n<tr>\n<td><code>--ref</code></td>\n<td><code>wait</code></td>\n<td>Element ref to wait for</td>\n</tr>\n<tr>\n<td><code>--state</code></td>\n<td><code>wait</code></td>\n<td>Element state (e.g. <code>visible</code>)</td>\n</tr>\n<tr>\n<td><code>--until</code></td>\n<td><code>wait</code></td>\n<td>Page load state</td>\n</tr>\n<tr>\n<td><code>--mode</code></td>\n<td><code>snapshot</code></td>\n<td>Snapshot mode (<code>outline</code> or <code>actionables</code>)</td>\n</tr>\n<tr>\n<td><code>--max-chars</code></td>\n<td><code>snapshot</code>, <code>dom-*</code></td>\n<td>Max characters returned</td>\n</tr>\n<tr>\n<td><code>--cursor</code></td>\n<td><code>snapshot</code></td>\n<td>Snapshot pagination cursor</td>\n</tr>\n</tbody>\n</table></div>\n<p><strong>Annotation</strong></p>\n<div class=\"docs-table-wrap\"><table>\n<thead><tr>\n<th>Flag</th>\n<th>Used by</th>\n<th>Description</th>\n</tr></thead>\n<tbody>\n<tr>\n<td><code>--transport</code></td>\n<td><code>annotate</code></td>\n<td><code>auto</code> (default), <code>direct</code>, or <code>relay</code></td>\n</tr>\n<tr>\n<td><code>--target-id</code></td>\n<td><code>annotate</code></td>\n<td>Target id for direct annotate</td>\n</tr>\n<tr>\n<td><code>--tab-id</code></td>\n<td><code>annotate</code></td>\n<td>Chrome tab id for relay annotate</td>\n</tr>\n<tr>\n<td><code>--screenshot-mode</code></td>\n<td><code>annotate</code></td>\n<td><code>visible</code> (default), <code>full</code>, or <code>none</code></td>\n</tr>\n<tr>\n<td><code>--context</code></td>\n<td><code>annotate</code></td>\n<td>Optional context text pre-filled in the UI</td>\n</tr>\n<tr>\n<td><code>--debug</code></td>\n<td><code>annotate</code></td>\n<td>Include debug metadata in the payload</td>\n</tr>\n<tr>\n<td><code>--timeout-ms</code></td>\n<td><code>annotate</code></td>\n<td>Annotation timeout in ms</td>\n</tr>\n</tbody>\n</table></div>\n<p><strong>RPC (internal)</strong></p>\n<div class=\"docs-table-wrap\"><table>\n<thead><tr>\n<th>Flag</th>\n<th>Used by</th>\n<th>Description</th>\n</tr></thead>\n<tbody>\n<tr>\n<td><code>--unsafe-internal</code></td>\n<td><code>rpc</code></td>\n<td>Required opt-in acknowledging unsafe/internal RPC execution (power-user only)</td>\n</tr>\n<tr>\n<td><code>--name</code></td>\n<td><code>rpc</code></td>\n<td>Daemon command name (for example <code>relay.status</code>)</td>\n</tr>\n<tr>\n<td><code>--params</code></td>\n<td><code>rpc</code></td>\n<td>Inline JSON object command params</td>\n</tr>\n<tr>\n<td><code>--params-file</code></td>\n<td><code>rpc</code></td>\n<td>Path to JSON object params file</td>\n</tr>\n<tr>\n<td><code>--timeout-ms</code></td>\n<td><code>rpc</code></td>\n<td>Client-side daemon call timeout in ms</td>\n</tr>\n</tbody>\n</table></div>\n<p><strong>Interaction</strong></p>\n<div class=\"docs-table-wrap\"><table>\n<thead><tr>\n<th>Flag</th>\n<th>Used by</th>\n<th>Description</th>\n</tr></thead>\n<tbody>\n<tr>\n<td><code>--ref</code></td>\n<td>element commands</td>\n<td>Element ref from <code>snapshot</code></td>\n</tr>\n<tr>\n<td><code>--text</code></td>\n<td><code>type</code></td>\n<td>Text to type</td>\n</tr>\n<tr>\n<td><code>--clear</code></td>\n<td><code>type</code></td>\n<td>Clear input before typing</td>\n</tr>\n<tr>\n<td><code>--submit</code></td>\n<td><code>type</code></td>\n<td>Submit after typing</td>\n</tr>\n<tr>\n<td><code>--values</code></td>\n<td><code>select</code></td>\n<td>Comma-separated values</td>\n</tr>\n<tr>\n<td><code>--dy</code></td>\n<td><code>scroll</code></td>\n<td>Scroll delta on Y axis</td>\n</tr>\n<tr>\n<td><code>--key</code></td>\n<td><code>press</code></td>\n<td>Keyboard key name (e.g. <code>Enter</code>)</td>\n</tr>\n</tbody>\n</table></div>\n<p><strong>Targets + pages</strong></p>\n<div class=\"docs-table-wrap\"><table>\n<thead><tr>\n<th>Flag</th>\n<th>Used by</th>\n<th>Description</th>\n</tr></thead>\n<tbody>\n<tr>\n<td><code>--target-id</code></td>\n<td><code>target-use</code>, <code>target-close</code></td>\n<td>Target id from <code>targets-list</code></td>\n</tr>\n<tr>\n<td><code>--include-urls</code></td>\n<td><code>targets-list</code></td>\n<td>Include URLs in target list output</td>\n</tr>\n<tr>\n<td><code>--name</code></td>\n<td><code>page</code>, <code>page-close</code></td>\n<td>Named page identifier</td>\n</tr>\n</tbody>\n</table></div>\n<p><strong>Devtools</strong></p>\n<div class=\"docs-table-wrap\"><table>\n<thead><tr>\n<th>Flag</th>\n<th>Used by</th>\n<th>Description</th>\n</tr></thead>\n<tbody>\n<tr>\n<td><code>--attr</code></td>\n<td><code>dom-attr</code></td>\n<td>Attribute name to read</td>\n</tr>\n<tr>\n<td><code>--path</code></td>\n<td><code>screenshot</code></td>\n<td>Output file path</td>\n</tr>\n<tr>\n<td><code>--timeout-ms</code></td>\n<td><code>screenshot</code></td>\n<td>Client-side daemon call timeout in ms</td>\n</tr>\n<tr>\n<td><code>--since-seq</code></td>\n<td><code>console-poll</code>, <code>network-poll</code></td>\n<td>Start sequence number</td>\n</tr>\n<tr>\n<td><code>--since-console-seq</code></td>\n<td><code>debug-trace-snapshot</code></td>\n<td>Resume cursor for console channel</td>\n</tr>\n<tr>\n<td><code>--since-network-seq</code></td>\n<td><code>debug-trace-snapshot</code></td>\n<td>Resume cursor for network channel</td>\n</tr>\n<tr>\n<td><code>--since-exception-seq</code></td>\n<td><code>debug-trace-snapshot</code></td>\n<td>Resume cursor for exception channel</td>\n</tr>\n<tr>\n<td><code>--max</code></td>\n<td><code>console-poll</code>, <code>network-poll</code>, <code>debug-trace-snapshot</code></td>\n<td>Max events to return per channel</td>\n</tr>\n</tbody>\n</table></div>\n<h2>CLI smoke test</h2>\n<p>Run the automated CLI coverage script (managed mode):</p>\n<pre><code>\nnpm run build\n\nnode scripts/cli-smoke-test.mjs\n\n</code></pre>\n<p>The script uses temporary config/cache directories and exercises all CLI commands, including the new interaction and DOM state checks.</p>\n<p>Validate extension mode separately with <code>launch</code> + <code>disconnect</code> while the extension is connected.</p>\n<h2>Live regression matrix</h2>\n<p>Run the full real-world matrix (managed + extension <code>/ops</code> + extension-legacy <code>/cdp</code> + <code>cdpConnect</code> + macro/research + annotate probes):</p>\n<pre><code>\nnpm run build\n\nnode scripts/live-regression-matrix.mjs\n\n</code></pre>\n<p>Behavior:</p>\n<ul>\n<li>Exits non-zero only for product regressions.</li>\n<li>Emits explicit extension readiness preflight diagnostics (<code>infra.extension.ready</code>) before extension-mode cases.</li>\n<li>Classifies upstream reachability failures (for example social/community dependencies) as <code>env_limited</code>.</li>\n<li>Classifies unattended annotation timeouts as <code>expected_timeout</code>.</li>\n<li>Captures mode-specific blocker evidence (<code>goto</code>/<code>wait</code> + <code>debug-trace-snapshot</code>) for managed, extension, and cdpConnect comparisons.</li>\n<li>Emits a JSON summary with per-step status for reproducible CI/manual verification.</li>\n</ul>\n<h2>Provider live matrix harness</h2>\n<p>Run the provider-depth live harness promoted from the <code>/tmp</code> validation script:</p>\n<pre><code>\nnpm run build\n\nnode scripts/provider-live-matrix.mjs --out /tmp/odb-provider-live-matrix.json\n\n</code></pre>\n<p>CI-safe smoke mode (reduced cases, deterministic gating checks, no long workflow probes by default):</p>\n<pre><code>\nnpm run build\n\nnode scripts/provider-live-matrix.mjs --smoke --out /tmp/odb-provider-live-matrix-smoke.json\n\n</code></pre>\n<p>Key checks included in full mode:</p>\n<ul>\n<li>Social issue probes: search/fetch coverage across platforms plus extension <code>/ops</code> timeout/retry behavior on YouTube/Instagram.</li>\n<li>Shopping issue probes: cross-provider query coverage with explicit timeout budget support.</li>\n<li>Browser issue probes: real-world navigation on YouTube/Instagram/Facebook across <code>managed</code>, <code>extension</code>, and <code>cdpConnect</code> with blocker metadata.</li>\n<li>Research-first defaults: auth-gated provider scenarios (<code>facebook</code>, <code>linkedin</code>, <code>shopping/costco</code>, <code>shopping/macys</code>), high-friction provider scenarios (<code>shopping/bestbuy</code>), and social post probes are skipped unless explicitly enabled.</li>\n</ul>\n<p>Key options:</p>\n<ul>\n<li><code>--use-global-env</code> reuse existing OPENCODE config/cache instead of isolated temp dirs.</li>\n<li><code>--skip-live-regression</code>, <code>--skip-browser-probes</code>, <code>--skip-workflows</code> for focused diagnostics.</li>\n<li><code>--include-live-regression</code>, <code>--include-browser-probes</code>, <code>--include-workflows</code> to re-enable those probes in <code>--smoke</code>.</li>\n<li><code>--include-auth-gated</code> enables auth-dependent provider scenarios (deferred by default).</li>\n<li><code>--include-high-friction</code> enables high-friction providers (deferred by default).</li>\n<li><code>--include-social-posts</code> enables social post scenarios (deferred by default).</li>\n</ul>\n<p>Run parity and skill-asset gates as part of release checks:</p>\n<pre><code>\nnpm run test -- tests/parity-matrix.test.ts\n\nnpm run test -- tests/providers-performance-gate.test.ts\n\n./skills/opendevbrowser-best-practices/scripts/validate-skill-assets.sh\n\n</code></pre>\n<p>Release gate source of truth: <code>docs/RELEASE_PARITY_CHECKLIST.md</code>.</p>\n<p>Benchmark fixture manifest: <code>docs/benchmarks/provider-fixtures.md</code>.</p>\n<h3>Latest validation (2026-02-15)</h3>\n<ul>\n<li><code>npm run lint</code> ✅</li>\n<li><code>npx tsc --noEmit</code> ✅</li>\n<li><code>npm run build</code> ✅</li>\n<li><code>npm run test</code> ✅</li>\n<li><code>node scripts/live-regression-matrix.mjs</code> ✅ (<code>pass: 21</code>, <code>env_limited: 1</code>, <code>expected_timeout: 2</code>, <code>fail: 0</code>)</li>\n<li>Current <code>env_limited</code> outcomes are setup/environment-related:</li>\n<li><code>mode.extension_legacy_cdp</code> (relay <code>/cdp</code> tab/session drift: <code>No tab with given id</code>)</li>\n<li>Current <code>expected_timeout</code> outcomes are interaction-related:</li>\n<li><code>feature.annotate.relay</code></li>\n<li><code>feature.annotate.direct</code></li>\n<li>Operator rollout, rollback triggers, and triage checklist are documented in <code>docs/TROUBLESHOOTING.md</code>.</li>\n</ul>\n<h2>Extension-only manual test (no OpenCode plugin)</h2>\n<p>Use this to validate the Chrome extension + relay without starting OpenCode.</p>\n<ol>\n<li>Ensure the daemon is running: <code>npx opendevbrowser serve</code> (manual). <code>npx opendevbrowser daemon install</code> configures auto-start for future logins but does not start it immediately.</li>\n<li>Build and load the extension: <code>npm run extension:build</code>, then Chrome → <code>chrome://extensions</code> → Developer mode → Load unpacked → <code>extension/</code>.</li>\n<li>Open a normal <code>http(s)</code> tab (not <code>chrome://</code> or extension pages).</li>\n<li>Open the extension popup, confirm Auto-connect + Auto-pair are ON, click Connect.</li>\n<li>Verify the popup shows <strong>Connected</strong> and <code>npx opendevbrowser status --daemon</code> reports <code>extensionConnected: true</code> and <code>extensionHandshakeComplete: true</code>.</li>\n<li>Optional session check: <code>npx opendevbrowser launch --extension-only --wait-for-extension</code>, then <code>npx opendevbrowser disconnect --session-id &lt;id&gt;</code>.</li>\n<li>Optional annotation check (OpenCode): call <code>opendevbrowser_annotate</code> and confirm screenshots are written to a temp folder.</li>\n</ol>\n<p>If it fails, run <code>npx opendevbrowser serve --stop</code> then <code>npx opendevbrowser serve</code>, and confirm site access includes <code>http://127.0.0.1/*</code> and <code>http://localhost/*</code> in the extension settings.</p>\n<h2>Configuration files</h2>\n<h3>OpenCode config</h3>\n<p>The CLI modifies <code>opencode.json</code> to register the plugin:</p>\n<pre><code>\n{\n\n  &quot;$schema&quot;: &quot;https://opencode.ai/config.json&quot;,\n\n  &quot;plugin&quot;: [&quot;opendevbrowser&quot;]\n\n}\n\n</code></pre>\n<p><strong>Locations:</strong></p>\n<ul>\n<li>Global: <code>~/.config/opencode/opencode.json</code></li>\n<li>Local: <code>./opencode.json</code></li>\n</ul>\n<h3>Plugin config (optional)</h3>\n<p>When using <code>--with-config</code>, a <code>opendevbrowser.jsonc</code> is created with documented defaults:</p>\n<pre><code>\n{\n\n  &quot;headless&quot;: false,\n\n  &quot;profile&quot;: &quot;default&quot;,\n\n  &quot;persistProfile&quot;: true,\n\n  &quot;snapshot&quot;: { &quot;maxChars&quot;: 16000, &quot;maxNodes&quot;: 1000 },\n\n  &quot;export&quot;: { &quot;maxNodes&quot;: 1000, &quot;inlineStyles&quot;: true },\n\n  &quot;devtools&quot;: { &quot;showFullUrls&quot;: false, &quot;showFullConsole&quot;: false },\n\n  &quot;security&quot;: {\n\n    &quot;allowRawCDP&quot;: false,\n\n    &quot;allowNonLocalCdp&quot;: false,\n\n    &quot;allowUnsafeExport&quot;: false\n\n  },\n\n  &quot;skillPaths&quot;: [],\n\n  &quot;skills&quot;: {\n\n    &quot;nudge&quot;: {\n\n      &quot;enabled&quot;: true,\n\n      &quot;keywords&quot;: [&quot;quick start&quot;, &quot;getting started&quot;, &quot;launch&quot;, &quot;connect&quot;, &quot;setup&quot;],\n\n      &quot;maxAgeMs&quot;: 60000\n\n    }\n\n  },\n\n  &quot;continuity&quot;: {\n\n    &quot;enabled&quot;: true,\n\n    &quot;filePath&quot;: &quot;opendevbrowser_continuity.md&quot;,\n\n    &quot;nudge&quot;: {\n\n      &quot;enabled&quot;: true,\n\n      &quot;keywords&quot;: [&quot;plan&quot;, &quot;multi-step&quot;, &quot;long-running&quot;, &quot;refactor&quot;, &quot;migration&quot;, &quot;rollout&quot;, &quot;continue&quot;],\n\n      &quot;maxAgeMs&quot;: 60000\n\n    }\n\n  },\n\n  &quot;providers&quot;: {\n\n    &quot;antiBotPolicy&quot;: {\n\n      &quot;enabled&quot;: true,\n\n      &quot;cooldownMs&quot;: 30000,\n\n      &quot;maxChallengeRetries&quot;: 1,\n\n      &quot;allowBrowserEscalation&quot;: true\n\n      // &quot;proxyHint&quot;: &quot;residential_pool_a&quot;,\n\n      // &quot;sessionHint&quot;: &quot;warm_profile&quot;\n\n    },\n\n    &quot;transcript&quot;: {\n\n      &quot;modeDefault&quot;: &quot;auto&quot;,\n\n      &quot;strategyOrder&quot;: [&quot;youtubei&quot;, &quot;native_caption_parse&quot;, &quot;ytdlp_audio_asr&quot;, &quot;apify&quot;],\n\n      &quot;enableYtdlp&quot;: false,\n\n      &quot;enableAsr&quot;: false,\n\n      &quot;enableYtdlpAudioAsr&quot;: true,\n\n      &quot;enableApify&quot;: true,\n\n      &quot;apifyActorId&quot;: &quot;streamers/youtube-scraper&quot;,\n\n      &quot;enableBrowserFallback&quot;: true,\n\n      &quot;ytdlpTimeoutMs&quot;: 10000\n\n    }\n\n  },\n\n  &quot;daemonPort&quot;: 8788,\n\n  &quot;daemonToken&quot;: &quot;auto-generated-on-first-run&quot;,\n\n  &quot;flags&quot;: [],\n\n  &quot;checkForUpdates&quot;: false\n\n}\n\n</code></pre>\n<p>The optional <code>skills.nudge</code> section controls the small one-time prompt hint that encourages early <code>skill(...)</code> usage on skill-relevant tasks. The optional <code>continuity</code> section controls the long-running task nudge and the ledger file path.</p>\n<p>Fingerprint runtime defaults are Tier 1/2/3 enabled, with Tier 2 and Tier 3 driven by continuous signals (debug trace remains readout/reporting).</p>\n<p>Provider runtime anti-bot/transcript controls default to an exhaustive YouTube fallback chain:</p>\n<ul>\n<li>Transcript mode semantics: <code>auto | web | no-auto | yt-dlp | apify</code>.</li>\n<li>Request filter precedence is <code>filters.youtube_mode &gt; providers.transcript.modeDefault &gt; auto</code>.</li>\n<li>No CLI mode flag is introduced in this phase; mode is configured in <code>providers.transcript.modeDefault</code> or per-request <code>youtube_mode</code> filter.</li>\n<li>Auto mode fallback chain is <code>youtubei -&gt; native_caption_parse -&gt; ytdlp_audio_asr -&gt; apify</code>, with browser-assisted fallback attempted last when browser escalation is available.</li>\n<li><code>yt-dlp</code> audio transcription requires <code>providers.transcript.enableYtdlpAudioAsr=true</code>.</li>\n<li>Apify requires <code>providers.transcript.enableApify=true</code>, a valid <code>APIFY_TOKEN</code>, and legal checklist approval for <code>apify</code>.</li>\n<li>Browser-assisted fallback requires <code>providers.transcript.enableBrowserFallback=true</code> and <code>providers.antiBotPolicy.allowBrowserEscalation=true</code>.</li>\n</ul>\n<p>Provider workflow and execution outputs now include normalized transcript/anti-bot telemetry:</p>\n<ul>\n<li>Failure reason codes: <code>meta.metrics.reason_code_distribution</code> (legacy), <code>meta.metrics.reasonCodeDistribution</code> (camelCase alias), and <code>reasonCode</code> on provider failures.</li>\n<li>Transcript fallback diagnostics: <code>meta.metrics.transcript_strategy_failures</code> (legacy) and <code>meta.metrics.transcriptStrategyFailures</code> (camelCase alias).</li>\n<li>Strategy-detail diagnostics: <code>meta.metrics.transcript_strategy_detail_failures</code>/<code>meta.metrics.transcriptStrategyDetailFailures</code> and <code>meta.metrics.transcript_strategy_detail_distribution</code>/<code>meta.metrics.transcriptStrategyDetailDistribution</code>.</li>\n<li>Durability/pressure dimensions: <code>meta.metrics.transcriptDurability</code> and <code>meta.metrics.antiBotPressure</code> (snake_case aliases are also emitted).</li>\n<li>YouTube fetch metadata: <code>transcript_strategy</code> (legacy bucket), <code>transcript_strategy_detail</code> (exact strategy), <code>attempt_chain</code>, and failure <code>reasonCode</code> when transcript retrieval is unavailable.</li>\n</ul>\n<p>Provider reliability criteria (resolver/browser fallback):</p>\n<ul>\n<li><code>npm run test -- tests/providers-performance-gate.test.ts</code> must pass.</li>\n<li>Latest observation window must satisfy <code>meta.metrics.transcriptDurability.attempted &gt;= 10</code> and <code>meta.metrics.transcriptDurability.success_rate &gt;= 0.85</code>.</li>\n<li>Latest observation window must satisfy <code>meta.metrics.antiBotPressure.anti_bot_failure_ratio &lt;= 0.15</code>.</li>\n<li>Trigger remediation immediately if either condition fails in two consecutive windows.</li>\n</ul>",
      "codeSample": "npx opendevbrowser research run --help"
    },
    "workflows/shopping": {
      "category": "workflows",
      "slug": "shopping",
      "title": "Shopping Workflow",
      "summary": "OpenDevBrowser CLI Command-line interface for installing and managing the OpenDevBrowser plugin, plus automation commands for agents. Status: active Last updated: 2026-02-24 OpenDevBrowser exposes 48 opendevbrowser_ tool",
      "sourcePath": "docs/CLI.md",
      "editUrl": "https://github.com/freshtechbro/opendevbrowser/edit/main/docs/CLI.md",
      "contentHtml": "<h1>OpenDevBrowser CLI</h1>\n<p>Command-line interface for installing and managing the OpenDevBrowser plugin, plus automation commands for agents.</p>\n<p>Status: active</p>\n<p>Last updated: 2026-02-24</p>\n<p>OpenDevBrowser exposes 48 <code>opendevbrowser_*</code> tools; see <code>README.md</code> and <code>docs/SURFACE_REFERENCE.md</code> for the full inventories.</p>\n<p>Agent runs should start with <code>opendevbrowser_prompting_guide</code> (or <code>opendevbrowser-best-practices</code> quickstart via <code>opendevbrowser_skill_load</code>); use continuity guidance only for long-running handoff/compaction.</p>\n<p>Tool-only commands <code>opendevbrowser_prompting_guide</code>, <code>opendevbrowser_skill_list</code>, and <code>opendevbrowser_skill_load</code> run locally via the skill loader and do not require relay endpoints. In hub-enabled configurations, the plugin may still ensure the daemon is available.</p>\n<p>CLI-only power command <code>rpc</code> intentionally has no tool equivalent; it is an internal daemon escape hatch behind an explicit safety flag and should be used with extreme caution.</p>\n<p>Dependency inventory: <code>docs/DEPENDENCIES.md</code></p>\n<p>First-run pre-release onboarding: <code>docs/FIRST_RUN_ONBOARDING.md</code></p>\n<p>Parity and skill-pack gates:</p>\n<pre><code>\nnpm run test -- tests/parity-matrix.test.ts\n\n./skills/opendevbrowser-best-practices/scripts/validate-skill-assets.sh\n\n</code></pre>\n<h2>Installation</h2>\n<p>Requires Node.js <code>&gt;=18</code>.</p>\n<pre><code>\n# Interactive installation (prompts for location)\n\nnpx opendevbrowser\n\n\n\n# Non-interactive with flags\n\nnpx opendevbrowser --global   # Install to ~/.config/opencode/opencode.json\n\nnpx opendevbrowser --local    # Install to ./opencode.json\n\n\n\n# Optional: persistent global CLI\n\nnpm install -g opendevbrowser\n\nopendevbrowser --version\n\n</code></pre>\n<h3>Pre-release local package onboarding (no npm publish)</h3>\n<pre><code>\ncd /Users/bishopdotun/Documents/DevProjects/opendevbrowser\n\nnpm pack\n\n\n\nWORKDIR=$(mktemp -d /tmp/opendevbrowser-first-run-XXXXXX)\n\ncd &quot;$WORKDIR&quot;\n\nnpm init -y\n\nnpm install /Users/bishopdotun/Documents/DevProjects/opendevbrowser/opendevbrowser-0.0.15.tgz\n\nnpx --no-install opendevbrowser --help\n\n</code></pre>\n<p>Load extension unpacked from:</p>\n<ul>\n<li><code>$WORKDIR/node_modules/opendevbrowser/extension</code></li>\n</ul>\n<p>For isolated daemon tests on machines that already run OpenDevBrowser, set:</p>\n<pre><code>\nexport OPENCODE_CONFIG_DIR=/tmp/opendevbrowser-first-run-isolated/config\n\nexport OPENCODE_CACHE_DIR=/tmp/opendevbrowser-first-run-isolated/cache\n\n</code></pre>\n<p>By default (<code>--skills-global</code>), the CLI installs bundled skills to global OpenCode/Codex/ClaudeCode/AmpCLI locations (legacy <code>claude</code>/<code>amp</code> labels are still synchronized for compatibility). Use <code>--skills-local</code> for project-local locations or <code>--no-skills</code> to skip skill installation. Use <code>--full</code> to always create <code>opendevbrowser.jsonc</code> and pre-extract extension assets.</p>\n<h3>Skill discovery order</h3>\n<p>The skill loader discovers skills in this order (first match wins):</p>\n<ol>\n<li>Project-local: <code>./.opencode/skill</code></li>\n<li>Global: <code>~/.config/opencode/skill</code> (or <code>$OPENCODE_CONFIG_DIR/skill</code>)</li>\n<li>Compatibility (project): <code>./.codex/skills</code></li>\n<li>Compatibility (global): <code>$CODEX_HOME/skills</code> (fallback <code>~/.codex/skills</code>)</li>\n<li>Compatibility (project): <code>./.claude/skills</code></li>\n<li>Compatibility (global): <code>$CLAUDECODE_HOME/skills</code> or <code>$CLAUDE_HOME/skills</code> (fallback <code>~/.claude/skills</code>)</li>\n<li>Compatibility (project): <code>./.amp/skills</code></li>\n<li>Compatibility (global): <code>$AMPCLI_HOME/skills</code> or <code>$AMP_CLI_HOME/skills</code> or <code>$AMP_HOME/skills</code> (fallback <code>~/.amp/skills</code>)</li>\n<li>Extra paths from <code>skillPaths</code> (advanced)</li>\n</ol>\n<h2>Output formats</h2>\n<p>Use <code>--output-format</code> to switch output formats for automation.</p>\n<ul>\n<li><code>text</code> (default): human-friendly output</li>\n<li><code>json</code>: single JSON object</li>\n<li><code>stream-json</code>: emit one JSON object per line for arrays; otherwise emits a single JSON object</li>\n</ul>\n<p>Use <code>--quiet</code> to suppress output. Use <code>--no-interactive</code> (alias of <code>--no-prompt</code>) to disable prompts.</p>\n<h2>Exit codes</h2>\n<ul>\n<li><code>0</code>: success</li>\n<li><code>1</code>: usage error (invalid args, missing flags)</li>\n<li><code>2</code>: execution error (runtime/daemon failures)</li>\n<li><code>10</code>: disconnected (daemon not running or unreachable)</li>\n</ul>\n<p>Fatal errors are emitted even when <code>--quiet</code> is set. For JSON output, fatal errors are emitted as:</p>\n<pre><code>\n{ &quot;success&quot;: false, &quot;error&quot;: &quot;message&quot;, &quot;exitCode&quot;: 2 }\n\n</code></pre>\n<h2>Argument validation</h2>\n<p>The CLI validates common flags early and returns a usage error (<code>exitCode: 1</code>) when inputs are invalid.</p>\n<ul>\n<li>Conflicting flags are rejected (examples: <code>--global</code> + <code>--local</code>, <code>--skills-global</code> + <code>--skills-local</code>).</li>\n<li>Numeric flags must be positive integers:</li>\n<li><code>--port</code>, <code>--cdp-port</code></li>\n<li><code>--wait-timeout-ms</code>, <code>--timeout-ms</code></li>\n</ul>\n<h2>Surface inventory (source-accurate)</h2>\n<p>Canonical inventory document: <code>docs/SURFACE_REFERENCE.md</code>.</p>\n<h3>CLI command surface</h3>\n<ul>\n<li>Total commands: <code>55</code>.</li>\n<li>Categories: install/runtime management, session/connection, navigation, interaction, targets/pages, DOM inspection, export/diagnostics/macro/annotation, and internal power (<code>rpc</code>).</li>\n</ul>\n<h3>Tool surface</h3>\n<ul>\n<li>Total tools: <code>48</code> (<code>opendevbrowser_*</code>).</li>\n<li>Tool-only surface (no CLI equivalent): <code>opendevbrowser_prompting_guide</code>, <code>opendevbrowser_skill_list</code>, <code>opendevbrowser_skill_load</code>.</li>\n<li>CLI-only surface (no tool equivalent): <code>artifacts</code>, <code>rpc</code>.</li>\n</ul>\n<h3>Relay channel surface</h3>\n<ul>\n<li><code>/ops</code> (default extension channel): high-level command protocol; see <code>docs/SURFACE_REFERENCE.md</code> for all <code>38</code> command names.</li>\n<li><code>/cdp</code> (legacy): low-level <code>forwardCDPCommand</code> relay path with explicit opt-in (<code>--extension-legacy</code>).</li>\n</ul>\n<h2>Commands</h2>\n<h3>Install (default)</h3>\n<pre><code>\n# Interactive - prompts for global or local\n\nnpx opendevbrowser\n\n\n\n# Global installation (user-wide)\n\nnpx opendevbrowser --global\n\nnpx opendevbrowser -g\n\n\n\n# Local installation (current project)\n\nnpx opendevbrowser --local\n\nnpx opendevbrowser -l\n\n\n\n# Skip prompts, use default (global)\n\nnpx opendevbrowser --no-prompt\n\nnpx opendevbrowser --no-interactive\n\n\n\n# Full install (config + extension assets)\n\nnpx opendevbrowser --full\n\n\n\n# Also create opendevbrowser.jsonc config file\n\nnpx opendevbrowser --global --with-config\n\n\n\n# Full install (plugin + config + bundled skills)\n\nnpx opendevbrowser --global --with-config --skills-global\n\n\n\n# Install skills locally (project scope)\n\nnpx opendevbrowser --skills-local\n\n\n\n# Skip installing skills\n\nnpx opendevbrowser --no-skills\n\n</code></pre>\n<p>On first successful install, the CLI attempts to install daemon auto-start on supported platforms (macOS/Windows) so the relay is</p>\n<p>available on login. You can remove it later with <code>npx opendevbrowser daemon uninstall</code>.</p>\n<h3>Update</h3>\n<p>Clear the OpenCode cache to trigger reinstallation of the latest version.</p>\n<pre><code>\nnpx opendevbrowser --update\n\nnpx opendevbrowser -u\n\n</code></pre>\n<p>This removes cached files from <code>~/.cache/opencode/node_modules/opendevbrowser/</code>. OpenCode will download the latest version on next run.</p>\n<h3>Uninstall</h3>\n<p>Remove the plugin from configuration.</p>\n<pre><code>\n# Remove from global config\n\nnpx opendevbrowser --uninstall --global\n\n\n\n# Remove from local config\n\nnpx opendevbrowser --uninstall --local\n\n\n\n# Interactive - prompts which to remove if both exist\n\nnpx opendevbrowser --uninstall\n\n</code></pre>\n<h3>Help / Version</h3>\n<pre><code>\nnpx opendevbrowser --help\n\nnpx opendevbrowser -h\n\n\n\nnpx opendevbrowser --version\n\nnpx opendevbrowser -v\n\n</code></pre>\n<p><code>--help</code> now prints a complete, agent-oriented inventory:</p>\n<ul>\n<li>All CLI commands (55) grouped by function, each with one-line descriptions.</li>\n<li>All supported CLI flags, grouped by install/session/navigation/workflow usage.</li>\n<li>All <code>opendevbrowser_*</code> tools (48), each with one-line descriptions.</li>\n<li>Macro execute timeout guidance via <code>--timeout-ms</code> for slow <code>macro-resolve --execute</code> runs.</li>\n<li>Canonical inventory pointers: <code>docs/SURFACE_REFERENCE.md</code>, <code>src/tools/index.ts</code>, and this CLI guide.</li>\n</ul>\n<p>Operational help parity check:</p>\n<pre><code>\nnpx opendevbrowser --help\n\nnpx opendevbrowser help\n\n</code></pre>\n<h2>Automation commands (daemon)</h2>\n<h3>Serve (daemon)</h3>\n<p>Start a local daemon to keep sessions alive between commands.</p>\n<pre><code>\nnpx opendevbrowser serve\n\nnpx opendevbrowser serve --port 8788 --token my-token\n\n\n\n# Stop the daemon\n\nnpx opendevbrowser serve --stop\n\n</code></pre>\n<p>The daemon listens on <code>127.0.0.1</code> and starts the relay the extension connects to. Metadata lives in</p>\n<p><code>~/.cache/opendevbrowser/daemon.json</code> (cache only);</p>\n<p><code>/status</code> is the source of truth. The daemon port/token are persisted in <code>opendevbrowser.jsonc</code> as <code>daemonPort</code>/<code>daemonToken</code>.</p>\n<p><code>serve</code> now performs a stale-daemon preflight and terminates orphan <code>opendevbrowser serve</code> processes before starting (or before</p>\n<p>returning &quot;already running&quot;), while preserving the active daemon on the requested port.</p>\n<p>If you run onboarding tests alongside an existing daemon, isolate config/cache via <code>OPENCODE_CONFIG_DIR</code> and <code>OPENCODE_CACHE_DIR</code></p>\n<p>to avoid token/port collisions between sessions.</p>\n<p>If <code>nativeExtensionId</code> is set in <code>opendevbrowser.jsonc</code>, <code>serve</code> will auto-install the native messaging host when it is missing.</p>\n<p>If it is not set, <code>serve</code> attempts to auto-detect the extension ID from Chrome, Brave, or Chromium profiles; if detection fails it continues startup.</p>\n<p>Relay HTTP endpoints (<code>/config</code>, <code>/status</code>, <code>/pair</code>) accept extension origins and loopback requests with no <code>Origin</code> (including</p>\n<p><code>Origin: null</code>) to support MV3 + PNA. Non-extension origins are rejected; preflights include</p>\n<p><code>Access-Control-Allow-Private-Network: true</code> when requested.</p>\n<p>#### Manual recovery (if the daemon is down or stuck)</p>\n<pre><code>\n# Start the daemon manually\n\nnpx opendevbrowser serve\n\n\n\n# Stop/kill an existing daemon before restarting\n\nnpx opendevbrowser serve --stop\n\n</code></pre>\n<h3>Daemon auto-start</h3>\n<p>Install or remove OS-level auto-start for the daemon. This uses a stable, absolute CLI entrypoint (no PATH reliance), and returns</p>\n<p>machine-readable output with <code>--output-format json</code>.</p>\n<pre><code>\nnpx opendevbrowser daemon install\n\nnpx opendevbrowser daemon uninstall\n\nnpx opendevbrowser daemon status\n\n</code></pre>\n<p>Behavior:</p>\n<ul>\n<li>macOS: LaunchAgent at <code>~/Library/LaunchAgents/com.opendevbrowser.daemon.plist</code> targeting an absolute CLI entrypoint.</li>\n<li>Windows: per-user Task Scheduler logon task targeting an absolute CLI entrypoint.</li>\n<li><code>daemon status</code> reports <code>{ installed, running, status? }</code> and does not throw a usage error when missing.</li>\n<li><code>daemon status</code> returns exit code <code>10</code> when the daemon is not running.</li>\n</ul>\n<p>Exit codes align with the CLI:</p>\n<ul>\n<li><code>0</code>: success</li>\n<li><code>1</code>: usage error</li>\n<li><code>2</code>: execution error (permissions, missing binary, OS service failure)</li>\n<li><code>10</code>: disconnected/not running (status only)</li>\n</ul>\n<p>#### Auto-start install + manual fallback</p>\n<pre><code>\n# Install auto-start (recommended)\n\nnpx opendevbrowser daemon install\n\n\n\n# If auto-start fails, start manually\n\nnpx opendevbrowser serve\n\n\n\n# Stop/kill before restarting\n\nnpx opendevbrowser serve --stop\n\n</code></pre>\n<h3>Native messaging host</h3>\n<p>Install the native messaging host for the extension to use as a fallback transport when the relay WebSocket is unavailable.</p>\n<pre><code>\n# Install native host (requires extension ID)\n\nnpx opendevbrowser native install &lt;extension-id&gt;\n\n\n\n# Check native host status\n\nnpx opendevbrowser native status\n\n\n\n# Remove native host\n\nnpx opendevbrowser native uninstall\n\n</code></pre>\n<p>Notes:</p>\n<ul>\n<li>Supported on macOS, Linux, and Windows.</li>\n<li>Windows install writes a registry entry under <code>HKCU\\Software\\Google\\Chrome\\NativeMessagingHosts\\com.opendevbrowser.native</code>.</li>\n<li><code>native install</code> requires the extension ID (chrome://extensions → copy ID).</li>\n<li>Set <code>nativeExtensionId</code> in <code>opendevbrowser.jsonc</code> to allow <code>serve</code> to auto-install the native host when missing (preferred).</li>\n<li><code>serve</code> also attempts auto-detection from Chrome, Brave, or Chromium profiles, but explicit config is more reliable.</li>\n<li><code>native status</code> reports installed state + extension ID from the manifest.</li>\n<li>Use <code>--transport native</code> with <code>status</code> to check native host status without requiring the daemon.</li>\n</ul>\n<h3>Workflow wrappers</h3>\n<p>The workflow wrappers expose the finalized research/shopping/product-video surfaces from</p>\n<p><code>docs/RESEARCH_SHOPPING_PRODUCT_VIDEO_FINAL_SPEC.md</code>.</p>\n<p>#### Research (<code>research run</code>)</p>\n<pre><code>\nnpx opendevbrowser research run --topic &quot;browser automation&quot; --days 30 --mode compact\n\nnpx opendevbrowser research run --topic &quot;market map&quot; --from 2026-02-01 --to 2026-02-16 --source-selection all --mode json\n\nnpx opendevbrowser research run --topic &quot;creator tools&quot; --sources web,shopping --include-engagement --limit-per-source 5 --mode context\n\n</code></pre>\n<p>Flags:</p>\n<ul>\n<li><code>--topic</code> (required)</li>\n<li><code>--days</code></li>\n<li><code>--from</code></li>\n<li><code>--to</code></li>\n<li><code>--source-selection</code> (<code>auto|web|community|social|shopping|all</code>)</li>\n<li><code>--sources</code> (comma-separated concrete sources)</li>\n<li><code>--mode</code> (<code>compact|json|md|context|path</code>)</li>\n<li><code>--include-engagement</code></li>\n<li><code>--limit-per-source</code></li>\n<li><code>--output-dir</code></li>\n<li><code>--ttl-hours</code></li>\n<li><code>--use-cookies</code> (<code>true|false</code>; bare flag means <code>true</code>)</li>\n<li><code>--cookie-policy-override</code> (<code>off|auto|required</code>)</li>\n<li><code>--cookie-policy</code> (alias of <code>--cookie-policy-override</code>)</li>\n</ul>\n<p>#### Shopping (<code>shopping run</code>)</p>\n<pre><code>\nnpx opendevbrowser shopping run --query &quot;usb microphone&quot; --mode compact\n\nnpx opendevbrowser shopping run --query &quot;portable monitor&quot; --providers shopping/amazon,shopping/newegg --sort lowest_price --mode md\n\nnpx opendevbrowser shopping run --query &quot;desk chair&quot; --budget 250 --region us --mode path\n\n</code></pre>\n<p>Flags:</p>\n<ul>\n<li><code>--query</code> (required)</li>\n<li><code>--providers</code> (comma-separated; defaults to all v1 adapters)</li>\n<li><code>--budget</code></li>\n<li><code>--region</code></li>\n<li><code>--sort</code> (<code>best_deal|lowest_price|highest_rating|fastest_shipping</code>)</li>\n<li><code>--mode</code> (<code>compact|json|md|context|path</code>)</li>\n<li><code>--output-dir</code></li>\n<li><code>--ttl-hours</code></li>\n<li><code>--use-cookies</code> (<code>true|false</code>; bare flag means <code>true</code>)</li>\n<li><code>--cookie-policy-override</code> (<code>off|auto|required</code>)</li>\n<li><code>--cookie-policy</code> (alias of <code>--cookie-policy-override</code>)</li>\n</ul>\n<p>#### Product presentation asset (<code>product-video run</code>)</p>\n<pre><code>\nnpx opendevbrowser product-video run --product-url &quot;https://example.com/p/1&quot; --include-screenshots\n\nnpx opendevbrowser product-video run --product-name &quot;Sample Product&quot; --provider-hint shopping/amazon --output-dir /tmp/product-assets\n\n</code></pre>\n<p>Flags:</p>\n<ul>\n<li><code>--product-url</code> (required unless <code>--product-name</code> is provided)</li>\n<li><code>--product-name</code> (required unless <code>--product-url</code> is provided)</li>\n<li><code>--provider-hint</code></li>\n<li><code>--include-screenshots</code> (<code>true|false</code>; bare flag means <code>true</code>)</li>\n<li><code>--include-all-images</code> (<code>true|false</code>; bare flag means <code>true</code>)</li>\n<li><code>--include-copy</code> (<code>true|false</code>; bare flag means <code>true</code>)</li>\n<li><code>--output-dir</code></li>\n<li><code>--ttl-hours</code></li>\n<li><code>--use-cookies</code> (<code>true|false</code>; bare flag means <code>true</code>)</li>\n<li><code>--cookie-policy-override</code> (<code>off|auto|required</code>)</li>\n<li><code>--cookie-policy</code> (alias of <code>--cookie-policy-override</code>)</li>\n</ul>\n<p>Wrapper behavior:</p>\n<ul>\n<li>Timebox semantics are strict (<code>--days</code> is mutually exclusive with <code>--from/--to</code>).</li>\n<li>Render modes for <code>research</code> and <code>shopping</code> are shared: <code>compact|json|md|context|path</code>.</li>\n<li><code>product-video run</code> always returns a path-based local asset pack.</li>\n<li>Path-bearing modes persist artifacts under the configured output directory (or default tmp namespace) and include TTL metadata in manifest files.</li>\n<li>Workflow cookie policy defaults to <code>providers.cookiePolicy=auto</code> and source defaults to <code>providers.cookieSource</code> (<code>file</code>, <code>env</code>, or <code>inline</code>).</li>\n<li>Effective policy precedence is <code>--cookie-policy-override</code>/<code>--cookie-policy</code> &gt; <code>--use-cookies</code> &gt; config defaults.</li>\n<li><code>auto</code> attempts injection when cookies are available and continues when cookies are missing/unusable.</li>\n<li><code>required</code> fails fast with <code>reasonCode=auth_required</code> when cookie loading/injection/verification cannot establish a session.</li>\n<li>Cookie diagnostics are exposed in workflow metrics under <code>meta.metrics.cookie_diagnostics</code> and <code>meta.metrics.cookieDiagnostics</code>.</li>\n</ul>\n<h3>Artifact lifecycle cleanup</h3>\n<p>Use the artifact cleanup command to remove expired bundles generated by workflow runs:</p>\n<pre><code>\nnpx opendevbrowser artifacts cleanup --expired-only\n\nnpx opendevbrowser artifacts cleanup --expired-only --output-dir /tmp/opendevbrowser\n\n</code></pre>\n<p>Script helper:</p>\n<pre><code>\n./scripts/artifacts-cleanup.sh\n\n./scripts/artifacts-cleanup.sh /tmp/opendevbrowser\n\n</code></pre>\n<p>Notes:</p>\n<ul>\n<li><code>--expired-only</code> is required.</li>\n<li>Default cleanup root is <code>${TMPDIR:-/tmp}/opendevbrowser</code>.</li>\n<li>Output includes <code>removed</code> and <code>skipped</code> run paths.</li>\n</ul>\n<h3>Run (single-shot script)</h3>\n<p>Run a JSON script without the daemon.</p>\n<pre><code>\nnpx opendevbrowser run --script ./script.json --output-format json\n\n\n\n# Or pipe JSON\n\ncat ./script.json | npx opendevbrowser run --output-format stream-json\n\n\n\n# Optional launch flags for run\n\nnpx opendevbrowser run --script ./script.json --headless --profile default --start-url https://example.com\n\nnpx opendevbrowser run --script ./script.json --chrome-path &quot;/Applications/Google Chrome.app/Contents/MacOS/Google Chrome&quot; --flag &quot;--disable-gpu&quot;\n\n</code></pre>\n<p>Supported <code>run</code> launch flags:</p>\n<ul>\n<li><code>--headless</code></li>\n<li><code>--profile</code></li>\n<li><code>--persist-profile</code></li>\n<li><code>--chrome-path</code></li>\n<li><code>--start-url</code></li>\n<li><code>--flag</code> (repeatable)</li>\n</ul>\n<p>Script format:</p>\n<pre><code>\n[\n\n  { &quot;action&quot;: &quot;goto&quot;, &quot;args&quot;: { &quot;url&quot;: &quot;https://example.com&quot; } },\n\n  { &quot;action&quot;: &quot;snapshot&quot; },\n\n  { &quot;action&quot;: &quot;click&quot;, &quot;args&quot;: { &quot;ref&quot;: &quot;r1&quot; } }\n\n]\n\n</code></pre>\n<h2>Session commands (daemon required)</h2>\n<h3>Launch</h3>\n<pre><code>\nnpx opendevbrowser launch --profile default --start-url https://example.com\n\n\n\n# Extension relay controls\n\nnpx opendevbrowser launch --extension-only\n\nnpx opendevbrowser launch --no-extension\n\nnpx opendevbrowser launch --extension-legacy\n\nnpx opendevbrowser launch --wait-for-extension --wait-timeout-ms 30000\n\n</code></pre>\n<p>Flags:</p>\n<ul>\n<li><code>--headless</code></li>\n<li><code>--profile</code></li>\n<li><code>--start-url</code></li>\n<li><code>--chrome-path</code></li>\n<li><code>--persist-profile</code></li>\n<li><code>--flag</code> (repeatable)</li>\n<li><code>--no-extension</code></li>\n<li><code>--extension-only</code></li>\n<li><code>--extension-legacy</code></li>\n<li><code>--wait-for-extension</code></li>\n<li><code>--wait-timeout-ms</code></li>\n</ul>\n<p>Default behavior:</p>\n<ul>\n<li>Extension relay (<code>extension</code> mode) is the default when available, using the <code>/ops</code> WebSocket.</li>\n<li>If the extension is not connected, launch fails with guidance and exact commands for the explicit alternatives.</li>\n<li>Headless is never the default.</li>\n<li>Extension headless is unsupported. <code>launch --headless</code> must be paired with <code>--no-extension</code>; extension-intent headless requests fail with <code>unsupported_mode</code>.</li>\n<li>When hub mode is enabled, there is no local relay fallback. If the hub is unavailable, commands fail with guidance.</li>\n<li>Extension relay requires Chrome 125+ (flat CDP sessions).</li>\n</ul>\n<p>Interactive vs non-interactive:</p>\n<ul>\n<li>Interactive CLI (TTY): you will be prompted to connect the extension, then explicitly choose Managed or CDPConnect if you want to proceed.</li>\n<li>Non-interactive (agents/CI): the command fails fast and prints the exact commands to run for Managed or CDPConnect.</li>\n</ul>\n<h3>Connection flags &amp; status semantics</h3>\n<div class=\"docs-table-wrap\"><table>\n<thead><tr>\n<th>Flag / Status</th>\n<th>Meaning</th>\n<th>Notes</th>\n</tr></thead>\n<tbody>\n<tr>\n<td><code>--no-extension</code></td>\n<td>Force managed mode</td>\n<td>Bypasses relay and extension entirely.</td>\n</tr>\n<tr>\n<td><code>--extension-only</code></td>\n<td>Require extension mode</td>\n<td>Fails if extension is not connected/handshaken.</td>\n</tr>\n<tr>\n<td><code>--extension-legacy</code></td>\n<td>Use legacy extension relay</td>\n<td>Routes through relay <code>/cdp</code> instead of <code>/ops</code>.</td>\n</tr>\n<tr>\n<td><code>--wait-for-extension</code></td>\n<td>Wait for extension handshake</td>\n<td>Only applies to extension mode; waits up to <code>--wait-timeout-ms</code>.</td>\n</tr>\n<tr>\n<td><code>--wait-timeout-ms</code></td>\n<td>Max wait for extension</td>\n<td>Defaults to 30s.</td>\n</tr>\n<tr>\n<td><code>extensionConnected</code></td>\n<td>Extension websocket connected</td>\n<td><code>false</code> means popup isn’t connected to relay.</td>\n</tr>\n<tr>\n<td><code>extensionHandshakeComplete</code></td>\n<td>Extension handshake done</td>\n<td><code>false</code> means reconnect/repair from popup.</td>\n</tr>\n<tr>\n<td><code>opsConnected</code></td>\n<td>Active <code>/ops</code> client attached</td>\n<td><code>false</code> means no ops client is connected.</td>\n</tr>\n<tr>\n<td><code>cdpConnected</code></td>\n<td>Active <code>/cdp</code> client attached</td>\n<td>Expected <code>false</code> until a legacy <code>/cdp</code> session connects.</td>\n</tr>\n<tr>\n<td><code>pairingRequired</code></td>\n<td>Relay token required</td>\n<td>When <code>true</code>, both <code>/ops</code> and <code>/cdp</code> require a token (auto-fetched).</td>\n</tr>\n</tbody>\n</table></div>\n<h3>Connect</h3>\n<pre><code>\nnpx opendevbrowser connect --ws-endpoint ws://127.0.0.1:9222/devtools/browser/...\n\nnpx opendevbrowser connect --host 127.0.0.1 --cdp-port 9222\n\n</code></pre>\n<p>This command starts a <code>cdpConnect</code> session (attach to an existing Chrome with remote debugging enabled).</p>\n<p>If the <code>--ws-endpoint</code> points at the local relay (for example <code>ws://127.0.0.1:8787</code> or <code>ws://127.0.0.1:8787/ops</code>),</p>\n<p>the CLI will normalize to <code>/ops</code> and route through the extension relay (<code>extension</code> mode).</p>\n<p>Use <code>--extension-legacy</code> if you need the legacy <code>/cdp</code> relay path.</p>\n<p>When routing through the relay, the CLI automatically fetches relay config and the pairing token (if required) and authenticates</p>\n<p>the <code>/ops</code> or <code>/cdp</code> connection. Direct relay websocket connections without a token are rejected when pairing is enabled.</p>\n<h3>Relay binding queue</h3>\n<p>Hub binding is exclusive only for binding/legacy paths (for example <code>/cdp</code> and commands that require a binding). Additional clients are queued FIFO and wait up to 30s by default.</p>\n<p>If you see <code>RELAY_WAIT_TIMEOUT</code>, retry after the current binding expires or stop the other bound client.</p>\n<p>Relay behavior note: extension uses a single extension websocket, while the relay can serve multiple <code>/ops</code> clients. Disconnecting the extension or restarting the relay drops active sessions, including annotation flows. Reconnect via the popup (or restart the daemon) before retrying.</p>\n<h3>Concurrency semantics</h3>\n<ul>\n<li>Transport-level concurrency: <code>/ops</code> supports multi-client access and multiple sessions.</li>\n<li>Runtime scheduling uses <code>ExecutionKey = (sessionId, targetId)</code> with target-scoped queues.</li>\n<li>Same target stays FIFO; different targets in one session run in parallel up to <code>effectiveParallelCap</code>.</li>\n<li><code>session-per-worker</code> remains the safest baseline for simple operational isolation, but in-session multi-target parallelism is supported on <code>/ops</code>, managed, and <code>cdpConnect</code>.</li>\n<li>Use explicit <code>--target-id</code> routing for concurrent flows; treat <code>target-use</code> as ergonomic fallback only.</li>\n<li>Use <code>/ops</code> as the default concurrent relay channel. Use <code>--extension-legacy</code> (<code>/cdp</code>) only for compatibility-specific paths.</li>\n<li>Legacy <code>/cdp</code> stays sequential (<code>effectiveParallelCap=1</code>) by design.</li>\n<li>For managed parallel launches with persisted profiles, use unique profile directories per session (or disable persistence) to avoid ProcessSingleton/SingletonLock collisions.</li>\n<li>Parity divergences are registry-bound in <code>docs/PARITY_DECLARED_DIVERGENCES.md</code>.</li>\n</ul>\n<h3>Disconnect</h3>\n<pre><code>\nnpx opendevbrowser disconnect --session-id &lt;session-id&gt;\n\nnpx opendevbrowser disconnect --session-id &lt;session-id&gt; --close-browser\n\n</code></pre>\n<h3>Status</h3>\n<pre><code>\nnpx opendevbrowser status               # daemon status (default)\n\nnpx opendevbrowser status --daemon      # daemon status (explicit)\n\nnpx opendevbrowser status --session-id &lt;session-id&gt;\n\nnpx opendevbrowser status --transport native\n\n</code></pre>\n<h3>Cookie import</h3>\n<pre><code>\nnpx opendevbrowser cookie-import \\\n\n  --session-id &lt;session-id&gt; \\\n\n  --cookies &#39;[{&quot;name&quot;:&quot;session&quot;,&quot;value&quot;:&quot;abc123&quot;,&quot;url&quot;:&quot;https://example.com&quot;}]&#39;\n\n\n\nnpx opendevbrowser cookie-import \\\n\n  --session-id &lt;session-id&gt; \\\n\n  --cookies-file ./cookies.json \\\n\n  --strict=false \\\n\n  --request-id req-cookie-001\n\n</code></pre>\n<p>Notes:</p>\n<ul>\n<li>Provide exactly one cookies source: <code>--cookies</code> or <code>--cookies-file</code>.</li>\n<li><code>--strict</code> defaults to <code>true</code>.</li>\n<li>Supported across <code>managed</code>, default extension <code>/ops</code>, extension legacy <code>/cdp</code>, and direct <code>cdpConnect</code> sessions.</li>\n</ul>\n<h3>Cookie list</h3>\n<pre><code>\nnpx opendevbrowser cookie-list \\\n\n  --session-id &lt;session-id&gt;\n\n\n\nnpx opendevbrowser cookie-list \\\n\n  --session-id &lt;session-id&gt; \\\n\n  --url https://example.com \\\n\n  --url https://shop.example.com \\\n\n  --request-id req-cookie-list-001\n\n</code></pre>\n<p>Notes:</p>\n<ul>\n<li><code>--url</code> is optional and repeatable; each value is normalized and deduplicated.</li>\n<li>Supports <code>managed</code>, default extension <code>/ops</code>, extension legacy <code>/cdp</code>, and direct <code>cdpConnect</code> sessions.</li>\n</ul>\n<h3>Macro resolve</h3>\n<pre><code>\nnpx opendevbrowser macro-resolve --expression &#39;@web.search(&quot;openai&quot;)&#39;\n\nnpx opendevbrowser macro-resolve --expression &#39;@social.post(&quot;x&quot;, &quot;ship it&quot;)&#39; --default-provider social/x --include-catalog\n\nnpx opendevbrowser macro-resolve --expression &#39;@web.search(&quot;opendevbrowser&quot;)&#39; --execute --output-format json\n\nnpx opendevbrowser macro-resolve --expression &#39;@media.search(&quot;youtube transcript parity&quot;, &quot;youtube&quot;, 5)&#39; --execute --timeout-ms 120000 --output-format json\n\n</code></pre>\n<p>Notes:</p>\n<ul>\n<li>Default mode is resolve-only (returns the resolved action/provenance payload).</li>\n<li><code>--execute</code> runs the resolved provider action and returns additive execution metadata (<code>meta.tier.selected</code>, <code>meta.tier.reasonCode</code>, <code>meta.provenance.provider</code>, <code>meta.provenance.retrievalPath</code>, <code>meta.provenance.retrievedAt</code>).</li>\n<li><code>--timeout-ms</code> sets client-side daemon transport timeout for slow <code>--execute</code> runs.</li>\n<li><code>opendevbrowser --help</code> includes this timeout flag in the global flag inventory.</li>\n</ul>\n<h3>Blocker contract (v2)</h3>\n<p>Compatibility rule (v2):</p>\n<ul>\n<li>Blocker fields are additive-only and live under <code>meta.blocker</code> (or <code>execution.meta.blocker</code> for <code>macro-resolve --execute</code>).</li>\n<li>Existing success/error fields and codes remain unchanged.</li>\n<li>Consumers should treat missing blocker fields as backward-compatible <code>no blocker metadata</code>.</li>\n</ul>\n<p>Canonical placement:</p>\n<ul>\n<li><code>goto</code>: <code>data.meta.blockerState</code> + optional <code>data.meta.blocker</code>.</li>\n<li><code>wait</code>: <code>data.meta.blockerState</code> + optional <code>data.meta.blocker</code>.</li>\n<li><code>debug-trace-snapshot</code>: <code>data.meta.blockerState</code> + optional <code>data.meta.blocker</code> + optional <code>data.meta.blockerArtifacts</code>.</li>\n<li><code>macro-resolve --execute</code>: <code>data.execution.meta.ok</code> + optional <code>data.execution.meta.blocker</code>.</li>\n<li><code>status</code>: <code>data.meta.blockerState</code> + optional <code>data.meta.blockerResolution</code> (<code>resolved | unresolved | deferred</code>).</li>\n</ul>\n<p>Canonical examples:</p>\n<pre><code>\n{\n\n  &quot;command&quot;: &quot;goto&quot;,\n\n  &quot;success&quot;: true,\n\n  &quot;data&quot;: {\n\n    &quot;finalUrl&quot;: &quot;https://example.com&quot;,\n\n    &quot;status&quot;: 200,\n\n    &quot;timingMs&quot;: 412,\n\n    &quot;meta&quot;: {\n\n      &quot;blockerState&quot;: &quot;clear&quot;\n\n    }\n\n  }\n\n}\n\n</code></pre>\n<pre><code>\n{\n\n  &quot;command&quot;: &quot;goto&quot;,\n\n  &quot;success&quot;: true,\n\n  &quot;data&quot;: {\n\n    &quot;finalUrl&quot;: &quot;https://x.com/i/flow/login&quot;,\n\n    &quot;status&quot;: 200,\n\n    &quot;timingMs&quot;: 588,\n\n    &quot;meta&quot;: {\n\n      &quot;blockerState&quot;: &quot;active&quot;,\n\n      &quot;blocker&quot;: {\n\n        &quot;schemaVersion&quot;: &quot;1.0&quot;,\n\n        &quot;type&quot;: &quot;auth_required&quot;,\n\n        &quot;source&quot;: &quot;navigation&quot;,\n\n        &quot;confidence&quot;: 0.97,\n\n        &quot;retryable&quot;: false\n\n      }\n\n    }\n\n  }\n\n}\n\n</code></pre>\n<pre><code>\n{\n\n  &quot;command&quot;: &quot;wait&quot;,\n\n  &quot;success&quot;: true,\n\n  &quot;data&quot;: {\n\n    &quot;timingMs&quot;: 221,\n\n    &quot;meta&quot;: {\n\n      &quot;blockerState&quot;: &quot;clear&quot;\n\n    }\n\n  }\n\n}\n\n</code></pre>\n<pre><code>\n{\n\n  &quot;command&quot;: &quot;status&quot;,\n\n  &quot;success&quot;: true,\n\n  &quot;data&quot;: {\n\n    &quot;mode&quot;: &quot;managed&quot;,\n\n    &quot;activeTargetId&quot;: &quot;target-1&quot;,\n\n    &quot;url&quot;: &quot;https://x.com/i/flow/login&quot;,\n\n    &quot;title&quot;: &quot;Log in to X / X&quot;,\n\n    &quot;meta&quot;: {\n\n      &quot;blockerState&quot;: &quot;active&quot;,\n\n      &quot;blockerResolution&quot;: {\n\n        &quot;status&quot;: &quot;unresolved&quot;,\n\n        &quot;reason&quot;: &quot;verification_timeout&quot;,\n\n        &quot;updatedAt&quot;: &quot;2026-02-15T14:18:28.000Z&quot;\n\n      }\n\n    }\n\n  }\n\n}\n\n</code></pre>\n<pre><code>\n{\n\n  &quot;command&quot;: &quot;wait&quot;,\n\n  &quot;success&quot;: true,\n\n  &quot;data&quot;: {\n\n    &quot;timingMs&quot;: 1470,\n\n    &quot;meta&quot;: {\n\n      &quot;blockerState&quot;: &quot;active&quot;,\n\n      &quot;blocker&quot;: {\n\n        &quot;schemaVersion&quot;: &quot;1.0&quot;,\n\n        &quot;type&quot;: &quot;anti_bot_challenge&quot;,\n\n        &quot;source&quot;: &quot;navigation&quot;,\n\n        &quot;confidence&quot;: 0.96,\n\n        &quot;retryable&quot;: false\n\n      }\n\n    }\n\n  }\n\n}\n\n</code></pre>\n<pre><code>\n{\n\n  &quot;command&quot;: &quot;debug-trace-snapshot&quot;,\n\n  &quot;success&quot;: true,\n\n  &quot;data&quot;: {\n\n    &quot;requestId&quot;: &quot;req-debug-001&quot;,\n\n    &quot;meta&quot;: {\n\n      &quot;blockerState&quot;: &quot;clear&quot;\n\n    }\n\n  }\n\n}\n\n</code></pre>\n<pre><code>\n{\n\n  &quot;command&quot;: &quot;debug-trace-snapshot&quot;,\n\n  &quot;success&quot;: true,\n\n  &quot;data&quot;: {\n\n    &quot;requestId&quot;: &quot;req-debug-002&quot;,\n\n    &quot;meta&quot;: {\n\n      &quot;blockerState&quot;: &quot;active&quot;,\n\n      &quot;blocker&quot;: {\n\n        &quot;schemaVersion&quot;: &quot;1.0&quot;,\n\n        &quot;type&quot;: &quot;anti_bot_challenge&quot;,\n\n        &quot;source&quot;: &quot;network&quot;,\n\n        &quot;confidence&quot;: 0.96,\n\n        &quot;retryable&quot;: false\n\n      },\n\n      &quot;blockerArtifacts&quot;: {\n\n        &quot;schemaVersion&quot;: &quot;1.0&quot;,\n\n        &quot;hosts&quot;: [&quot;www.recaptcha.net&quot;, &quot;challenges.cloudflare.com&quot;]\n\n      }\n\n    }\n\n  }\n\n}\n\n</code></pre>\n<pre><code>\n{\n\n  &quot;command&quot;: &quot;macro-resolve --execute&quot;,\n\n  &quot;success&quot;: true,\n\n  &quot;data&quot;: {\n\n    &quot;runtime&quot;: &quot;macros&quot;,\n\n    &quot;execution&quot;: {\n\n      &quot;meta&quot;: {\n\n        &quot;ok&quot;: true,\n\n        &quot;partial&quot;: false\n\n      }\n\n    }\n\n  }\n\n}\n\n</code></pre>\n<pre><code>\n{\n\n  &quot;command&quot;: &quot;macro-resolve --execute&quot;,\n\n  &quot;success&quot;: true,\n\n  &quot;data&quot;: {\n\n    &quot;runtime&quot;: &quot;macros&quot;,\n\n    &quot;execution&quot;: {\n\n      &quot;meta&quot;: {\n\n        &quot;ok&quot;: false,\n\n        &quot;partial&quot;: true,\n\n        &quot;blocker&quot;: {\n\n          &quot;schemaVersion&quot;: &quot;1.0&quot;,\n\n          &quot;type&quot;: &quot;env_limited&quot;,\n\n          &quot;source&quot;: &quot;macro_execution&quot;,\n\n          &quot;confidence&quot;: 0.9,\n\n          &quot;retryable&quot;: true\n\n        }\n\n      }\n\n    }\n\n  }\n\n}\n\n</code></pre>\n<h3>RPC (power-user, internal)</h3>\n<p>Execute any daemon command directly. This bypasses the stable CLI command surface, is intentionally unsafe/internal, and requires <code>--unsafe-internal</code>.</p>\n<pre><code>\n# Minimal call (empty params object)\n\nnpx opendevbrowser rpc --unsafe-internal --name relay.status --output-format json\n\n\n\n# With inline JSON params\n\nnpx opendevbrowser rpc --unsafe-internal --name nav.goto \\\n\n  --params &#39;{&quot;sessionId&quot;:&quot;&lt;session-id&gt;&quot;,&quot;url&quot;:&quot;https://example.com&quot;,&quot;waitUntil&quot;:&quot;load&quot;,&quot;timeoutMs&quot;:30000}&#39; \\\n\n  --timeout-ms 45000 --output-format json\n\n\n\n# With params from file\n\nnpx opendevbrowser rpc --unsafe-internal --name session.status --params-file ./rpc-params.json --output-format json\n\n</code></pre>\n<p>Notes:</p>\n<ul>\n<li>Params must be a JSON object.</li>\n<li>Use <code>--output-format json</code> for machine-readable responses.</li>\n<li><code>rpc</code> is CLI-only by design and is not part of the stable tool parity surface.</li>\n<li><code>rpc</code> command names/params are internal and may change without compatibility guarantees.</li>\n<li>A bad <code>rpc</code> call can close sessions, navigate logged-in tabs, or trigger unintended side effects.</li>\n<li>Prefer stable commands (<code>goto</code>, <code>snapshot</code>, <code>click</code>, <code>type</code>, and related tool equivalents) whenever possible.</li>\n<li>Use <code>rpc</code> only when necessary, validate params carefully, and test in a disposable session first.</li>\n</ul>\n<h2>Navigation commands (daemon required)</h2>\n<h3>Goto</h3>\n<pre><code>\nnpx opendevbrowser goto --session-id &lt;session-id&gt; --url https://example.com\n\nnpx opendevbrowser goto --session-id &lt;session-id&gt; --url https://example.com --wait-until load --timeout-ms 30000\n\n</code></pre>\n<h3>Wait</h3>\n<pre><code>\nnpx opendevbrowser wait --session-id &lt;session-id&gt; --until load\n\nnpx opendevbrowser wait --session-id &lt;session-id&gt; --ref r12 --state visible --timeout-ms 15000\n\n</code></pre>\n<h3>Snapshot</h3>\n<pre><code>\nnpx opendevbrowser snapshot --session-id &lt;session-id&gt;\n\nnpx opendevbrowser snapshot --session-id &lt;session-id&gt; --max-chars 16000 --cursor &lt;cursor&gt;\n\n</code></pre>\n<h2>Interaction commands (daemon required)</h2>\n<h3>Click</h3>\n<pre><code>\nnpx opendevbrowser click --session-id &lt;session-id&gt; --ref r12\n\n</code></pre>\n<h3>Hover</h3>\n<pre><code>\nnpx opendevbrowser hover --session-id &lt;session-id&gt; --ref r12\n\n</code></pre>\n<h3>Press</h3>\n<pre><code>\nnpx opendevbrowser press --session-id &lt;session-id&gt; --key Enter\n\nnpx opendevbrowser press --session-id &lt;session-id&gt; --key Enter --ref r12\n\n</code></pre>\n<h3>Check / Uncheck</h3>\n<pre><code>\nnpx opendevbrowser check --session-id &lt;session-id&gt; --ref r12\n\nnpx opendevbrowser uncheck --session-id &lt;session-id&gt; --ref r12\n\n</code></pre>\n<h3>Type</h3>\n<pre><code>\nnpx opendevbrowser type --session-id &lt;session-id&gt; --ref r12 --text &quot;hello&quot;\n\nnpx opendevbrowser type --session-id &lt;session-id&gt; --ref r12 --text &quot;hello&quot; --clear --submit\n\n</code></pre>\n<h3>Select</h3>\n<pre><code>\nnpx opendevbrowser select --session-id &lt;session-id&gt; --ref r12 --values value1,value2\n\n</code></pre>\n<h3>Scroll</h3>\n<pre><code>\nnpx opendevbrowser scroll --session-id &lt;session-id&gt; --dy 500\n\nnpx opendevbrowser scroll --session-id &lt;session-id&gt; --ref r12 --dy 300\n\n</code></pre>\n<h3>Scroll into view</h3>\n<pre><code>\nnpx opendevbrowser scroll-into-view --session-id &lt;session-id&gt; --ref r12\n\n</code></pre>\n<h2>Annotation (direct + relay)</h2>\n<p>Annotations are available through both the CLI command and the <code>opendevbrowser_annotate</code> tool. The default transport (<code>auto</code>)</p>\n<p>uses direct CDP when possible and falls back to relay in extension sessions. See <code>docs/ANNOTATE.md</code> for setup and details.</p>\n<pre><code>\nnpx opendevbrowser annotate --session-id &lt;session-id&gt;\n\n\n\n# Force direct annotate on a target\n\nnpx opendevbrowser annotate --session-id &lt;session-id&gt; --transport direct --target-id &lt;target-id&gt;\n\n\n\n# Force relay annotate on a specific tab\n\nnpx opendevbrowser annotate --session-id &lt;session-id&gt; --transport relay --tab-id 123\n\n\n\n# With URL + context + debug metadata\n\nnpx opendevbrowser annotate --session-id &lt;session-id&gt; --url https://example.com \\\n\n  --screenshot-mode visible --context &quot;Review the hero layout&quot; --timeout-ms 90000 --debug\n\n</code></pre>\n<h2>Target commands (daemon required)</h2>\n<h3>Targets list</h3>\n<pre><code>\nnpx opendevbrowser targets-list --session-id &lt;session-id&gt;\n\nnpx opendevbrowser targets-list --session-id &lt;session-id&gt; --include-urls\n\n</code></pre>\n<h3>Target use</h3>\n<pre><code>\nnpx opendevbrowser target-use --session-id &lt;session-id&gt; --target-id &lt;target-id&gt;\n\n</code></pre>\n<h3>Target new</h3>\n<pre><code>\nnpx opendevbrowser target-new --session-id &lt;session-id&gt; --url https://example.com\n\n</code></pre>\n<h3>Target close</h3>\n<pre><code>\nnpx opendevbrowser target-close --session-id &lt;session-id&gt; --target-id &lt;target-id&gt;\n\n</code></pre>\n<h2>Page commands (daemon required)</h2>\n<h3>Page open</h3>\n<pre><code>\nnpx opendevbrowser page --session-id &lt;session-id&gt; --name main\n\nnpx opendevbrowser page --session-id &lt;session-id&gt; --name main --url https://example.com\n\n</code></pre>\n<h3>Pages list</h3>\n<pre><code>\nnpx opendevbrowser pages --session-id &lt;session-id&gt;\n\n</code></pre>\n<h3>Page close</h3>\n<pre><code>\nnpx opendevbrowser page-close --session-id &lt;session-id&gt; --name main\n\n</code></pre>\n<h2>DOM commands (daemon required)</h2>\n<h3>DOM HTML</h3>\n<pre><code>\nnpx opendevbrowser dom-html --session-id &lt;session-id&gt; --ref r12 --max-chars 8000\n\n</code></pre>\n<h3>DOM Text</h3>\n<pre><code>\nnpx opendevbrowser dom-text --session-id &lt;session-id&gt; --ref r12 --max-chars 8000\n\n</code></pre>\n<h3>DOM Attribute</h3>\n<pre><code>\nnpx opendevbrowser dom-attr --session-id &lt;session-id&gt; --ref r12 --attr aria-label\n\n</code></pre>\n<h3>DOM Value</h3>\n<pre><code>\nnpx opendevbrowser dom-value --session-id &lt;session-id&gt; --ref r12\n\n</code></pre>\n<h3>DOM State Checks</h3>\n<pre><code>\nnpx opendevbrowser dom-visible --session-id &lt;session-id&gt; --ref r12\n\nnpx opendevbrowser dom-enabled --session-id &lt;session-id&gt; --ref r12\n\nnpx opendevbrowser dom-checked --session-id &lt;session-id&gt; --ref r12\n\n</code></pre>\n<h2>Export commands (daemon required)</h2>\n<h3>Clone page</h3>\n<pre><code>\nnpx opendevbrowser clone-page --session-id &lt;session-id&gt;\n\n</code></pre>\n<h3>Clone component</h3>\n<pre><code>\nnpx opendevbrowser clone-component --session-id &lt;session-id&gt; --ref r12\n\n</code></pre>\n<h2>Devtools commands (daemon required)</h2>\n<h3>Performance metrics</h3>\n<pre><code>\nnpx opendevbrowser perf --session-id &lt;session-id&gt;\n\n</code></pre>\n<h3>Screenshot</h3>\n<pre><code>\nnpx opendevbrowser screenshot --session-id &lt;session-id&gt;\n\nnpx opendevbrowser screenshot --session-id &lt;session-id&gt; --path ./capture.png\n\nnpx opendevbrowser screenshot --session-id &lt;session-id&gt; --path ./capture.png --timeout-ms 60000\n\n</code></pre>\n<p>Notes:</p>\n<ul>\n<li><code>--timeout-ms</code> sets client-side daemon timeout for screenshot capture.</li>\n</ul>\n<h3>Console poll</h3>\n<pre><code>\nnpx opendevbrowser console-poll --session-id &lt;session-id&gt; --since-seq 0 --max 50\n\n</code></pre>\n<h3>Network poll</h3>\n<pre><code>\nnpx opendevbrowser network-poll --session-id &lt;session-id&gt; --since-seq 0 --max 50\n\n</code></pre>\n<h3>Debug trace snapshot</h3>\n<pre><code>\nnpx opendevbrowser debug-trace-snapshot --session-id &lt;session-id&gt;\n\nnpx opendevbrowser debug-trace-snapshot \\\n\n  --session-id &lt;session-id&gt; \\\n\n  --since-console-seq 100 \\\n\n  --since-network-seq 80 \\\n\n  --since-exception-seq 10 \\\n\n  --max 200 \\\n\n  --request-id req-debug-001\n\n</code></pre>\n<h2>Flags reference</h2>\n<h3>Global flags</h3>\n<div class=\"docs-table-wrap\"><table>\n<thead><tr>\n<th>Flag</th>\n<th>Short</th>\n<th>Description</th>\n</tr></thead>\n<tbody>\n<tr>\n<td><code>--global</code></td>\n<td><code>-g</code></td>\n<td>Install to <code>~/.config/opencode/opencode.json</code></td>\n</tr>\n<tr>\n<td><code>--local</code></td>\n<td><code>-l</code></td>\n<td>Install to <code>./opencode.json</code></td>\n</tr>\n<tr>\n<td><code>--update</code></td>\n<td><code>-u</code></td>\n<td>Clear cache to trigger reinstall</td>\n</tr>\n<tr>\n<td><code>--uninstall</code></td>\n<td></td>\n<td>Remove plugin from config</td>\n</tr>\n<tr>\n<td><code>--with-config</code></td>\n<td></td>\n<td>Also create <code>opendevbrowser.jsonc</code></td>\n</tr>\n<tr>\n<td><code>--full</code></td>\n<td><code>-f</code></td>\n<td>Create config and pre-extract extension assets</td>\n</tr>\n<tr>\n<td><code>--no-prompt</code></td>\n<td></td>\n<td>Skip prompts, use defaults</td>\n</tr>\n<tr>\n<td><code>--no-interactive</code></td>\n<td></td>\n<td>Alias of <code>--no-prompt</code></td>\n</tr>\n<tr>\n<td><code>--quiet</code></td>\n<td></td>\n<td>Suppress output</td>\n</tr>\n<tr>\n<td><code>--output-format</code></td>\n<td></td>\n<td><code>text</code>, <code>json</code>, or <code>stream-json</code></td>\n</tr>\n<tr>\n<td><code>--transport</code></td>\n<td></td>\n<td>Transport selector (<code>relay</code> or <code>native</code>) for transport-aware commands</td>\n</tr>\n<tr>\n<td><code>--daemon</code></td>\n<td></td>\n<td>Daemon status selector for <code>status</code></td>\n</tr>\n<tr>\n<td><code>--skills-global</code></td>\n<td></td>\n<td>Install skills to global OpenCode/Codex/ClaudeCode/AmpCLI directories (legacy <code>claude</code>/<code>amp</code> aliases also synced)</td>\n</tr>\n<tr>\n<td><code>--skills-local</code></td>\n<td></td>\n<td>Install skills to project-local OpenCode/Codex/ClaudeCode/AmpCLI directories (legacy <code>claude</code>/<code>amp</code> aliases also synced)</td>\n</tr>\n<tr>\n<td><code>--no-skills</code></td>\n<td></td>\n<td>Skip installing bundled skills</td>\n</tr>\n<tr>\n<td><code>--help</code></td>\n<td><code>-h</code></td>\n<td>Show usage information</td>\n</tr>\n<tr>\n<td><code>--version</code></td>\n<td><code>-v</code></td>\n<td>Show version number</td>\n</tr>\n</tbody>\n</table></div>\n<h3>Serve flags</h3>\n<div class=\"docs-table-wrap\"><table>\n<thead><tr>\n<th>Flag</th>\n<th>Description</th>\n</tr></thead>\n<tbody>\n<tr>\n<td><code>--port</code></td>\n<td>Override daemon port</td>\n</tr>\n<tr>\n<td><code>--token</code></td>\n<td>Override daemon token</td>\n</tr>\n<tr>\n<td><code>--stop</code></td>\n<td>Stop the daemon</td>\n</tr>\n</tbody>\n</table></div>\n<h3>Command-specific flags</h3>\n<p><strong>Session + connection</strong></p>\n<div class=\"docs-table-wrap\"><table>\n<thead><tr>\n<th>Flag</th>\n<th>Used by</th>\n<th>Description</th>\n</tr></thead>\n<tbody>\n<tr>\n<td><code>--session-id</code></td>\n<td>most daemon commands</td>\n<td>Active session id from <code>launch</code>/<code>connect</code></td>\n</tr>\n<tr>\n<td><code>--close-browser</code></td>\n<td><code>disconnect</code></td>\n<td>Close managed browser on disconnect</td>\n</tr>\n<tr>\n<td><code>--ws-endpoint</code></td>\n<td><code>connect</code></td>\n<td>Remote debugging websocket URL</td>\n</tr>\n<tr>\n<td><code>--host</code></td>\n<td><code>connect</code></td>\n<td>Host for CDP connection (<code>--cdp-port</code> required)</td>\n</tr>\n<tr>\n<td><code>--cdp-port</code></td>\n<td><code>connect</code></td>\n<td>CDP port for host-based connect</td>\n</tr>\n<tr>\n<td><code>--daemon</code></td>\n<td><code>status</code></td>\n<td>Force daemon status mode (mutually exclusive with <code>--session-id</code>)</td>\n</tr>\n<tr>\n<td><code>--no-extension</code></td>\n<td><code>launch</code></td>\n<td>Force managed mode (ignore extension)</td>\n</tr>\n<tr>\n<td><code>--extension-only</code></td>\n<td><code>launch</code></td>\n<td>Fail if extension not connected</td>\n</tr>\n<tr>\n<td><code>--extension-legacy</code></td>\n<td><code>launch</code>, <code>connect</code></td>\n<td>Use legacy extension relay (<code>/cdp</code>)</td>\n</tr>\n<tr>\n<td><code>--wait-for-extension</code></td>\n<td><code>launch</code></td>\n<td>Wait for extension handshake</td>\n</tr>\n<tr>\n<td><code>--wait-timeout-ms</code></td>\n<td><code>launch</code></td>\n<td>Max wait for extension handshake</td>\n</tr>\n<tr>\n<td><code>--cookies</code></td>\n<td><code>cookie-import</code></td>\n<td>Inline JSON array of cookie objects</td>\n</tr>\n<tr>\n<td><code>--cookies-file</code></td>\n<td><code>cookie-import</code></td>\n<td>Path to JSON file containing cookie objects</td>\n</tr>\n<tr>\n<td><code>--strict</code></td>\n<td><code>cookie-import</code></td>\n<td>Reject on invalid cookie entries (<code>true</code>/<code>false</code>)</td>\n</tr>\n<tr>\n<td><code>--request-id</code></td>\n<td><code>cookie-import</code>, <code>cookie-list</code>, <code>debug-trace-snapshot</code></td>\n<td>Optional request correlation id</td>\n</tr>\n<tr>\n<td><code>--expression</code></td>\n<td><code>macro-resolve</code></td>\n<td>Macro expression to resolve</td>\n</tr>\n<tr>\n<td><code>--default-provider</code></td>\n<td><code>macro-resolve</code></td>\n<td>Provider fallback for shorthand macros</td>\n</tr>\n<tr>\n<td><code>--include-catalog</code></td>\n<td><code>macro-resolve</code></td>\n<td>Include macro catalog in response</td>\n</tr>\n<tr>\n<td><code>--execute</code></td>\n<td><code>macro-resolve</code></td>\n<td>Execute the resolved provider action and include additive <code>meta.*</code> fields</td>\n</tr>\n<tr>\n<td><code>--timeout-ms</code></td>\n<td><code>macro-resolve</code></td>\n<td>Client-side daemon call timeout in ms</td>\n</tr>\n<tr>\n<td><code>--use-cookies</code></td>\n<td><code>research run</code>, <code>shopping run</code>, <code>product-video run</code></td>\n<td>Enable/disable provider cookie injection for the run (`true</td>\n<td>false<code>; bare flag means </code>true`)</td>\n</tr>\n<tr>\n<td><code>--cookie-policy-override</code></td>\n<td><code>research run</code>, <code>shopping run</code>, <code>product-video run</code></td>\n<td>Per-run provider cookie policy override (`off</td>\n<td>auto</td>\n<td>required`)</td>\n</tr>\n<tr>\n<td><code>--cookie-policy</code></td>\n<td><code>research run</code>, <code>shopping run</code>, <code>product-video run</code></td>\n<td>Alias of <code>--cookie-policy-override</code></td>\n</tr>\n</tbody>\n</table></div>\n<p><strong>Browser launch (launch/run)</strong></p>\n<div class=\"docs-table-wrap\"><table>\n<thead><tr>\n<th>Flag</th>\n<th>Used by</th>\n<th>Description</th>\n</tr></thead>\n<tbody>\n<tr>\n<td><code>--headless</code></td>\n<td><code>launch</code>, <code>run</code></td>\n<td>Run managed Chrome headless</td>\n</tr>\n<tr>\n<td><code>--profile</code></td>\n<td><code>launch</code>, <code>run</code></td>\n<td>Profile directory name</td>\n</tr>\n<tr>\n<td><code>--persist-profile</code></td>\n<td><code>launch</code>, <code>run</code></td>\n<td>Keep profile directory after run</td>\n</tr>\n<tr>\n<td><code>--chrome-path</code></td>\n<td><code>launch</code>, <code>run</code></td>\n<td>Explicit Chrome executable path</td>\n</tr>\n<tr>\n<td><code>--start-url</code></td>\n<td><code>launch</code>, <code>run</code></td>\n<td>Initial URL for the session</td>\n</tr>\n<tr>\n<td><code>--flag</code></td>\n<td><code>launch</code>, <code>run</code></td>\n<td>Additional Chrome flag (repeatable)</td>\n</tr>\n<tr>\n<td><code>--script</code></td>\n<td><code>run</code></td>\n<td>JSON script path</td>\n</tr>\n</tbody>\n</table></div>\n<p><strong>Navigation + waiting</strong></p>\n<div class=\"docs-table-wrap\"><table>\n<thead><tr>\n<th>Flag</th>\n<th>Used by</th>\n<th>Description</th>\n</tr></thead>\n<tbody>\n<tr>\n<td><code>--url</code></td>\n<td><code>goto</code>, <code>page</code>, <code>target-new</code>, <code>cookie-list</code></td>\n<td>URL to navigate/open or filter cookie listing</td>\n</tr>\n<tr>\n<td><code>--wait-until</code></td>\n<td><code>goto</code></td>\n<td>Load state (<code>load</code>, <code>domcontentloaded</code>, etc.)</td>\n</tr>\n<tr>\n<td><code>--timeout-ms</code></td>\n<td><code>goto</code>, <code>wait</code></td>\n<td>Timeout in ms</td>\n</tr>\n<tr>\n<td><code>--ref</code></td>\n<td><code>wait</code></td>\n<td>Element ref to wait for</td>\n</tr>\n<tr>\n<td><code>--state</code></td>\n<td><code>wait</code></td>\n<td>Element state (e.g. <code>visible</code>)</td>\n</tr>\n<tr>\n<td><code>--until</code></td>\n<td><code>wait</code></td>\n<td>Page load state</td>\n</tr>\n<tr>\n<td><code>--mode</code></td>\n<td><code>snapshot</code></td>\n<td>Snapshot mode (<code>outline</code> or <code>actionables</code>)</td>\n</tr>\n<tr>\n<td><code>--max-chars</code></td>\n<td><code>snapshot</code>, <code>dom-*</code></td>\n<td>Max characters returned</td>\n</tr>\n<tr>\n<td><code>--cursor</code></td>\n<td><code>snapshot</code></td>\n<td>Snapshot pagination cursor</td>\n</tr>\n</tbody>\n</table></div>\n<p><strong>Annotation</strong></p>\n<div class=\"docs-table-wrap\"><table>\n<thead><tr>\n<th>Flag</th>\n<th>Used by</th>\n<th>Description</th>\n</tr></thead>\n<tbody>\n<tr>\n<td><code>--transport</code></td>\n<td><code>annotate</code></td>\n<td><code>auto</code> (default), <code>direct</code>, or <code>relay</code></td>\n</tr>\n<tr>\n<td><code>--target-id</code></td>\n<td><code>annotate</code></td>\n<td>Target id for direct annotate</td>\n</tr>\n<tr>\n<td><code>--tab-id</code></td>\n<td><code>annotate</code></td>\n<td>Chrome tab id for relay annotate</td>\n</tr>\n<tr>\n<td><code>--screenshot-mode</code></td>\n<td><code>annotate</code></td>\n<td><code>visible</code> (default), <code>full</code>, or <code>none</code></td>\n</tr>\n<tr>\n<td><code>--context</code></td>\n<td><code>annotate</code></td>\n<td>Optional context text pre-filled in the UI</td>\n</tr>\n<tr>\n<td><code>--debug</code></td>\n<td><code>annotate</code></td>\n<td>Include debug metadata in the payload</td>\n</tr>\n<tr>\n<td><code>--timeout-ms</code></td>\n<td><code>annotate</code></td>\n<td>Annotation timeout in ms</td>\n</tr>\n</tbody>\n</table></div>\n<p><strong>RPC (internal)</strong></p>\n<div class=\"docs-table-wrap\"><table>\n<thead><tr>\n<th>Flag</th>\n<th>Used by</th>\n<th>Description</th>\n</tr></thead>\n<tbody>\n<tr>\n<td><code>--unsafe-internal</code></td>\n<td><code>rpc</code></td>\n<td>Required opt-in acknowledging unsafe/internal RPC execution (power-user only)</td>\n</tr>\n<tr>\n<td><code>--name</code></td>\n<td><code>rpc</code></td>\n<td>Daemon command name (for example <code>relay.status</code>)</td>\n</tr>\n<tr>\n<td><code>--params</code></td>\n<td><code>rpc</code></td>\n<td>Inline JSON object command params</td>\n</tr>\n<tr>\n<td><code>--params-file</code></td>\n<td><code>rpc</code></td>\n<td>Path to JSON object params file</td>\n</tr>\n<tr>\n<td><code>--timeout-ms</code></td>\n<td><code>rpc</code></td>\n<td>Client-side daemon call timeout in ms</td>\n</tr>\n</tbody>\n</table></div>\n<p><strong>Interaction</strong></p>\n<div class=\"docs-table-wrap\"><table>\n<thead><tr>\n<th>Flag</th>\n<th>Used by</th>\n<th>Description</th>\n</tr></thead>\n<tbody>\n<tr>\n<td><code>--ref</code></td>\n<td>element commands</td>\n<td>Element ref from <code>snapshot</code></td>\n</tr>\n<tr>\n<td><code>--text</code></td>\n<td><code>type</code></td>\n<td>Text to type</td>\n</tr>\n<tr>\n<td><code>--clear</code></td>\n<td><code>type</code></td>\n<td>Clear input before typing</td>\n</tr>\n<tr>\n<td><code>--submit</code></td>\n<td><code>type</code></td>\n<td>Submit after typing</td>\n</tr>\n<tr>\n<td><code>--values</code></td>\n<td><code>select</code></td>\n<td>Comma-separated values</td>\n</tr>\n<tr>\n<td><code>--dy</code></td>\n<td><code>scroll</code></td>\n<td>Scroll delta on Y axis</td>\n</tr>\n<tr>\n<td><code>--key</code></td>\n<td><code>press</code></td>\n<td>Keyboard key name (e.g. <code>Enter</code>)</td>\n</tr>\n</tbody>\n</table></div>\n<p><strong>Targets + pages</strong></p>\n<div class=\"docs-table-wrap\"><table>\n<thead><tr>\n<th>Flag</th>\n<th>Used by</th>\n<th>Description</th>\n</tr></thead>\n<tbody>\n<tr>\n<td><code>--target-id</code></td>\n<td><code>target-use</code>, <code>target-close</code></td>\n<td>Target id from <code>targets-list</code></td>\n</tr>\n<tr>\n<td><code>--include-urls</code></td>\n<td><code>targets-list</code></td>\n<td>Include URLs in target list output</td>\n</tr>\n<tr>\n<td><code>--name</code></td>\n<td><code>page</code>, <code>page-close</code></td>\n<td>Named page identifier</td>\n</tr>\n</tbody>\n</table></div>\n<p><strong>Devtools</strong></p>\n<div class=\"docs-table-wrap\"><table>\n<thead><tr>\n<th>Flag</th>\n<th>Used by</th>\n<th>Description</th>\n</tr></thead>\n<tbody>\n<tr>\n<td><code>--attr</code></td>\n<td><code>dom-attr</code></td>\n<td>Attribute name to read</td>\n</tr>\n<tr>\n<td><code>--path</code></td>\n<td><code>screenshot</code></td>\n<td>Output file path</td>\n</tr>\n<tr>\n<td><code>--timeout-ms</code></td>\n<td><code>screenshot</code></td>\n<td>Client-side daemon call timeout in ms</td>\n</tr>\n<tr>\n<td><code>--since-seq</code></td>\n<td><code>console-poll</code>, <code>network-poll</code></td>\n<td>Start sequence number</td>\n</tr>\n<tr>\n<td><code>--since-console-seq</code></td>\n<td><code>debug-trace-snapshot</code></td>\n<td>Resume cursor for console channel</td>\n</tr>\n<tr>\n<td><code>--since-network-seq</code></td>\n<td><code>debug-trace-snapshot</code></td>\n<td>Resume cursor for network channel</td>\n</tr>\n<tr>\n<td><code>--since-exception-seq</code></td>\n<td><code>debug-trace-snapshot</code></td>\n<td>Resume cursor for exception channel</td>\n</tr>\n<tr>\n<td><code>--max</code></td>\n<td><code>console-poll</code>, <code>network-poll</code>, <code>debug-trace-snapshot</code></td>\n<td>Max events to return per channel</td>\n</tr>\n</tbody>\n</table></div>\n<h2>CLI smoke test</h2>\n<p>Run the automated CLI coverage script (managed mode):</p>\n<pre><code>\nnpm run build\n\nnode scripts/cli-smoke-test.mjs\n\n</code></pre>\n<p>The script uses temporary config/cache directories and exercises all CLI commands, including the new interaction and DOM state checks.</p>\n<p>Validate extension mode separately with <code>launch</code> + <code>disconnect</code> while the extension is connected.</p>\n<h2>Live regression matrix</h2>\n<p>Run the full real-world matrix (managed + extension <code>/ops</code> + extension-legacy <code>/cdp</code> + <code>cdpConnect</code> + macro/research + annotate probes):</p>\n<pre><code>\nnpm run build\n\nnode scripts/live-regression-matrix.mjs\n\n</code></pre>\n<p>Behavior:</p>\n<ul>\n<li>Exits non-zero only for product regressions.</li>\n<li>Emits explicit extension readiness preflight diagnostics (<code>infra.extension.ready</code>) before extension-mode cases.</li>\n<li>Classifies upstream reachability failures (for example social/community dependencies) as <code>env_limited</code>.</li>\n<li>Classifies unattended annotation timeouts as <code>expected_timeout</code>.</li>\n<li>Captures mode-specific blocker evidence (<code>goto</code>/<code>wait</code> + <code>debug-trace-snapshot</code>) for managed, extension, and cdpConnect comparisons.</li>\n<li>Emits a JSON summary with per-step status for reproducible CI/manual verification.</li>\n</ul>\n<h2>Provider live matrix harness</h2>\n<p>Run the provider-depth live harness promoted from the <code>/tmp</code> validation script:</p>\n<pre><code>\nnpm run build\n\nnode scripts/provider-live-matrix.mjs --out /tmp/odb-provider-live-matrix.json\n\n</code></pre>\n<p>CI-safe smoke mode (reduced cases, deterministic gating checks, no long workflow probes by default):</p>\n<pre><code>\nnpm run build\n\nnode scripts/provider-live-matrix.mjs --smoke --out /tmp/odb-provider-live-matrix-smoke.json\n\n</code></pre>\n<p>Key checks included in full mode:</p>\n<ul>\n<li>Social issue probes: search/fetch coverage across platforms plus extension <code>/ops</code> timeout/retry behavior on YouTube/Instagram.</li>\n<li>Shopping issue probes: cross-provider query coverage with explicit timeout budget support.</li>\n<li>Browser issue probes: real-world navigation on YouTube/Instagram/Facebook across <code>managed</code>, <code>extension</code>, and <code>cdpConnect</code> with blocker metadata.</li>\n<li>Research-first defaults: auth-gated provider scenarios (<code>facebook</code>, <code>linkedin</code>, <code>shopping/costco</code>, <code>shopping/macys</code>), high-friction provider scenarios (<code>shopping/bestbuy</code>), and social post probes are skipped unless explicitly enabled.</li>\n</ul>\n<p>Key options:</p>\n<ul>\n<li><code>--use-global-env</code> reuse existing OPENCODE config/cache instead of isolated temp dirs.</li>\n<li><code>--skip-live-regression</code>, <code>--skip-browser-probes</code>, <code>--skip-workflows</code> for focused diagnostics.</li>\n<li><code>--include-live-regression</code>, <code>--include-browser-probes</code>, <code>--include-workflows</code> to re-enable those probes in <code>--smoke</code>.</li>\n<li><code>--include-auth-gated</code> enables auth-dependent provider scenarios (deferred by default).</li>\n<li><code>--include-high-friction</code> enables high-friction providers (deferred by default).</li>\n<li><code>--include-social-posts</code> enables social post scenarios (deferred by default).</li>\n</ul>\n<p>Run parity and skill-asset gates as part of release checks:</p>\n<pre><code>\nnpm run test -- tests/parity-matrix.test.ts\n\nnpm run test -- tests/providers-performance-gate.test.ts\n\n./skills/opendevbrowser-best-practices/scripts/validate-skill-assets.sh\n\n</code></pre>\n<p>Release gate source of truth: <code>docs/RELEASE_PARITY_CHECKLIST.md</code>.</p>\n<p>Benchmark fixture manifest: <code>docs/benchmarks/provider-fixtures.md</code>.</p>\n<h3>Latest validation (2026-02-15)</h3>\n<ul>\n<li><code>npm run lint</code> ✅</li>\n<li><code>npx tsc --noEmit</code> ✅</li>\n<li><code>npm run build</code> ✅</li>\n<li><code>npm run test</code> ✅</li>\n<li><code>node scripts/live-regression-matrix.mjs</code> ✅ (<code>pass: 21</code>, <code>env_limited: 1</code>, <code>expected_timeout: 2</code>, <code>fail: 0</code>)</li>\n<li>Current <code>env_limited</code> outcomes are setup/environment-related:</li>\n<li><code>mode.extension_legacy_cdp</code> (relay <code>/cdp</code> tab/session drift: <code>No tab with given id</code>)</li>\n<li>Current <code>expected_timeout</code> outcomes are interaction-related:</li>\n<li><code>feature.annotate.relay</code></li>\n<li><code>feature.annotate.direct</code></li>\n<li>Operator rollout, rollback triggers, and triage checklist are documented in <code>docs/TROUBLESHOOTING.md</code>.</li>\n</ul>\n<h2>Extension-only manual test (no OpenCode plugin)</h2>\n<p>Use this to validate the Chrome extension + relay without starting OpenCode.</p>\n<ol>\n<li>Ensure the daemon is running: <code>npx opendevbrowser serve</code> (manual). <code>npx opendevbrowser daemon install</code> configures auto-start for future logins but does not start it immediately.</li>\n<li>Build and load the extension: <code>npm run extension:build</code>, then Chrome → <code>chrome://extensions</code> → Developer mode → Load unpacked → <code>extension/</code>.</li>\n<li>Open a normal <code>http(s)</code> tab (not <code>chrome://</code> or extension pages).</li>\n<li>Open the extension popup, confirm Auto-connect + Auto-pair are ON, click Connect.</li>\n<li>Verify the popup shows <strong>Connected</strong> and <code>npx opendevbrowser status --daemon</code> reports <code>extensionConnected: true</code> and <code>extensionHandshakeComplete: true</code>.</li>\n<li>Optional session check: <code>npx opendevbrowser launch --extension-only --wait-for-extension</code>, then <code>npx opendevbrowser disconnect --session-id &lt;id&gt;</code>.</li>\n<li>Optional annotation check (OpenCode): call <code>opendevbrowser_annotate</code> and confirm screenshots are written to a temp folder.</li>\n</ol>\n<p>If it fails, run <code>npx opendevbrowser serve --stop</code> then <code>npx opendevbrowser serve</code>, and confirm site access includes <code>http://127.0.0.1/*</code> and <code>http://localhost/*</code> in the extension settings.</p>\n<h2>Configuration files</h2>\n<h3>OpenCode config</h3>\n<p>The CLI modifies <code>opencode.json</code> to register the plugin:</p>\n<pre><code>\n{\n\n  &quot;$schema&quot;: &quot;https://opencode.ai/config.json&quot;,\n\n  &quot;plugin&quot;: [&quot;opendevbrowser&quot;]\n\n}\n\n</code></pre>\n<p><strong>Locations:</strong></p>\n<ul>\n<li>Global: <code>~/.config/opencode/opencode.json</code></li>\n<li>Local: <code>./opencode.json</code></li>\n</ul>\n<h3>Plugin config (optional)</h3>\n<p>When using <code>--with-config</code>, a <code>opendevbrowser.jsonc</code> is created with documented defaults:</p>\n<pre><code>\n{\n\n  &quot;headless&quot;: false,\n\n  &quot;profile&quot;: &quot;default&quot;,\n\n  &quot;persistProfile&quot;: true,\n\n  &quot;snapshot&quot;: { &quot;maxChars&quot;: 16000, &quot;maxNodes&quot;: 1000 },\n\n  &quot;export&quot;: { &quot;maxNodes&quot;: 1000, &quot;inlineStyles&quot;: true },\n\n  &quot;devtools&quot;: { &quot;showFullUrls&quot;: false, &quot;showFullConsole&quot;: false },\n\n  &quot;security&quot;: {\n\n    &quot;allowRawCDP&quot;: false,\n\n    &quot;allowNonLocalCdp&quot;: false,\n\n    &quot;allowUnsafeExport&quot;: false\n\n  },\n\n  &quot;skillPaths&quot;: [],\n\n  &quot;skills&quot;: {\n\n    &quot;nudge&quot;: {\n\n      &quot;enabled&quot;: true,\n\n      &quot;keywords&quot;: [&quot;quick start&quot;, &quot;getting started&quot;, &quot;launch&quot;, &quot;connect&quot;, &quot;setup&quot;],\n\n      &quot;maxAgeMs&quot;: 60000\n\n    }\n\n  },\n\n  &quot;continuity&quot;: {\n\n    &quot;enabled&quot;: true,\n\n    &quot;filePath&quot;: &quot;opendevbrowser_continuity.md&quot;,\n\n    &quot;nudge&quot;: {\n\n      &quot;enabled&quot;: true,\n\n      &quot;keywords&quot;: [&quot;plan&quot;, &quot;multi-step&quot;, &quot;long-running&quot;, &quot;refactor&quot;, &quot;migration&quot;, &quot;rollout&quot;, &quot;continue&quot;],\n\n      &quot;maxAgeMs&quot;: 60000\n\n    }\n\n  },\n\n  &quot;providers&quot;: {\n\n    &quot;antiBotPolicy&quot;: {\n\n      &quot;enabled&quot;: true,\n\n      &quot;cooldownMs&quot;: 30000,\n\n      &quot;maxChallengeRetries&quot;: 1,\n\n      &quot;allowBrowserEscalation&quot;: true\n\n      // &quot;proxyHint&quot;: &quot;residential_pool_a&quot;,\n\n      // &quot;sessionHint&quot;: &quot;warm_profile&quot;\n\n    },\n\n    &quot;transcript&quot;: {\n\n      &quot;modeDefault&quot;: &quot;auto&quot;,\n\n      &quot;strategyOrder&quot;: [&quot;youtubei&quot;, &quot;native_caption_parse&quot;, &quot;ytdlp_audio_asr&quot;, &quot;apify&quot;],\n\n      &quot;enableYtdlp&quot;: false,\n\n      &quot;enableAsr&quot;: false,\n\n      &quot;enableYtdlpAudioAsr&quot;: true,\n\n      &quot;enableApify&quot;: true,\n\n      &quot;apifyActorId&quot;: &quot;streamers/youtube-scraper&quot;,\n\n      &quot;enableBrowserFallback&quot;: true,\n\n      &quot;ytdlpTimeoutMs&quot;: 10000\n\n    }\n\n  },\n\n  &quot;daemonPort&quot;: 8788,\n\n  &quot;daemonToken&quot;: &quot;auto-generated-on-first-run&quot;,\n\n  &quot;flags&quot;: [],\n\n  &quot;checkForUpdates&quot;: false\n\n}\n\n</code></pre>\n<p>The optional <code>skills.nudge</code> section controls the small one-time prompt hint that encourages early <code>skill(...)</code> usage on skill-relevant tasks. The optional <code>continuity</code> section controls the long-running task nudge and the ledger file path.</p>\n<p>Fingerprint runtime defaults are Tier 1/2/3 enabled, with Tier 2 and Tier 3 driven by continuous signals (debug trace remains readout/reporting).</p>\n<p>Provider runtime anti-bot/transcript controls default to an exhaustive YouTube fallback chain:</p>\n<ul>\n<li>Transcript mode semantics: <code>auto | web | no-auto | yt-dlp | apify</code>.</li>\n<li>Request filter precedence is <code>filters.youtube_mode &gt; providers.transcript.modeDefault &gt; auto</code>.</li>\n<li>No CLI mode flag is introduced in this phase; mode is configured in <code>providers.transcript.modeDefault</code> or per-request <code>youtube_mode</code> filter.</li>\n<li>Auto mode fallback chain is <code>youtubei -&gt; native_caption_parse -&gt; ytdlp_audio_asr -&gt; apify</code>, with browser-assisted fallback attempted last when browser escalation is available.</li>\n<li><code>yt-dlp</code> audio transcription requires <code>providers.transcript.enableYtdlpAudioAsr=true</code>.</li>\n<li>Apify requires <code>providers.transcript.enableApify=true</code>, a valid <code>APIFY_TOKEN</code>, and legal checklist approval for <code>apify</code>.</li>\n<li>Browser-assisted fallback requires <code>providers.transcript.enableBrowserFallback=true</code> and <code>providers.antiBotPolicy.allowBrowserEscalation=true</code>.</li>\n</ul>\n<p>Provider workflow and execution outputs now include normalized transcript/anti-bot telemetry:</p>\n<ul>\n<li>Failure reason codes: <code>meta.metrics.reason_code_distribution</code> (legacy), <code>meta.metrics.reasonCodeDistribution</code> (camelCase alias), and <code>reasonCode</code> on provider failures.</li>\n<li>Transcript fallback diagnostics: <code>meta.metrics.transcript_strategy_failures</code> (legacy) and <code>meta.metrics.transcriptStrategyFailures</code> (camelCase alias).</li>\n<li>Strategy-detail diagnostics: <code>meta.metrics.transcript_strategy_detail_failures</code>/<code>meta.metrics.transcriptStrategyDetailFailures</code> and <code>meta.metrics.transcript_strategy_detail_distribution</code>/<code>meta.metrics.transcriptStrategyDetailDistribution</code>.</li>\n<li>Durability/pressure dimensions: <code>meta.metrics.transcriptDurability</code> and <code>meta.metrics.antiBotPressure</code> (snake_case aliases are also emitted).</li>\n<li>YouTube fetch metadata: <code>transcript_strategy</code> (legacy bucket), <code>transcript_strategy_detail</code> (exact strategy), <code>attempt_chain</code>, and failure <code>reasonCode</code> when transcript retrieval is unavailable.</li>\n</ul>\n<p>Provider reliability criteria (resolver/browser fallback):</p>\n<ul>\n<li><code>npm run test -- tests/providers-performance-gate.test.ts</code> must pass.</li>\n<li>Latest observation window must satisfy <code>meta.metrics.transcriptDurability.attempted &gt;= 10</code> and <code>meta.metrics.transcriptDurability.success_rate &gt;= 0.85</code>.</li>\n<li>Latest observation window must satisfy <code>meta.metrics.antiBotPressure.anti_bot_failure_ratio &lt;= 0.15</code>.</li>\n<li>Trigger remediation immediately if either condition fails in two consecutive windows.</li>\n</ul>",
      "codeSample": "npx opendevbrowser shopping run --help"
    },
    "workflows/product-video": {
      "category": "workflows",
      "slug": "product-video",
      "title": "Product Video Workflow",
      "summary": "OpenDevBrowser CLI Command-line interface for installing and managing the OpenDevBrowser plugin, plus automation commands for agents. Status: active Last updated: 2026-02-24 OpenDevBrowser exposes 48 opendevbrowser_ tool",
      "sourcePath": "docs/CLI.md",
      "editUrl": "https://github.com/freshtechbro/opendevbrowser/edit/main/docs/CLI.md",
      "contentHtml": "<h1>OpenDevBrowser CLI</h1>\n<p>Command-line interface for installing and managing the OpenDevBrowser plugin, plus automation commands for agents.</p>\n<p>Status: active</p>\n<p>Last updated: 2026-02-24</p>\n<p>OpenDevBrowser exposes 48 <code>opendevbrowser_*</code> tools; see <code>README.md</code> and <code>docs/SURFACE_REFERENCE.md</code> for the full inventories.</p>\n<p>Agent runs should start with <code>opendevbrowser_prompting_guide</code> (or <code>opendevbrowser-best-practices</code> quickstart via <code>opendevbrowser_skill_load</code>); use continuity guidance only for long-running handoff/compaction.</p>\n<p>Tool-only commands <code>opendevbrowser_prompting_guide</code>, <code>opendevbrowser_skill_list</code>, and <code>opendevbrowser_skill_load</code> run locally via the skill loader and do not require relay endpoints. In hub-enabled configurations, the plugin may still ensure the daemon is available.</p>\n<p>CLI-only power command <code>rpc</code> intentionally has no tool equivalent; it is an internal daemon escape hatch behind an explicit safety flag and should be used with extreme caution.</p>\n<p>Dependency inventory: <code>docs/DEPENDENCIES.md</code></p>\n<p>First-run pre-release onboarding: <code>docs/FIRST_RUN_ONBOARDING.md</code></p>\n<p>Parity and skill-pack gates:</p>\n<pre><code>\nnpm run test -- tests/parity-matrix.test.ts\n\n./skills/opendevbrowser-best-practices/scripts/validate-skill-assets.sh\n\n</code></pre>\n<h2>Installation</h2>\n<p>Requires Node.js <code>&gt;=18</code>.</p>\n<pre><code>\n# Interactive installation (prompts for location)\n\nnpx opendevbrowser\n\n\n\n# Non-interactive with flags\n\nnpx opendevbrowser --global   # Install to ~/.config/opencode/opencode.json\n\nnpx opendevbrowser --local    # Install to ./opencode.json\n\n\n\n# Optional: persistent global CLI\n\nnpm install -g opendevbrowser\n\nopendevbrowser --version\n\n</code></pre>\n<h3>Pre-release local package onboarding (no npm publish)</h3>\n<pre><code>\ncd /Users/bishopdotun/Documents/DevProjects/opendevbrowser\n\nnpm pack\n\n\n\nWORKDIR=$(mktemp -d /tmp/opendevbrowser-first-run-XXXXXX)\n\ncd &quot;$WORKDIR&quot;\n\nnpm init -y\n\nnpm install /Users/bishopdotun/Documents/DevProjects/opendevbrowser/opendevbrowser-0.0.15.tgz\n\nnpx --no-install opendevbrowser --help\n\n</code></pre>\n<p>Load extension unpacked from:</p>\n<ul>\n<li><code>$WORKDIR/node_modules/opendevbrowser/extension</code></li>\n</ul>\n<p>For isolated daemon tests on machines that already run OpenDevBrowser, set:</p>\n<pre><code>\nexport OPENCODE_CONFIG_DIR=/tmp/opendevbrowser-first-run-isolated/config\n\nexport OPENCODE_CACHE_DIR=/tmp/opendevbrowser-first-run-isolated/cache\n\n</code></pre>\n<p>By default (<code>--skills-global</code>), the CLI installs bundled skills to global OpenCode/Codex/ClaudeCode/AmpCLI locations (legacy <code>claude</code>/<code>amp</code> labels are still synchronized for compatibility). Use <code>--skills-local</code> for project-local locations or <code>--no-skills</code> to skip skill installation. Use <code>--full</code> to always create <code>opendevbrowser.jsonc</code> and pre-extract extension assets.</p>\n<h3>Skill discovery order</h3>\n<p>The skill loader discovers skills in this order (first match wins):</p>\n<ol>\n<li>Project-local: <code>./.opencode/skill</code></li>\n<li>Global: <code>~/.config/opencode/skill</code> (or <code>$OPENCODE_CONFIG_DIR/skill</code>)</li>\n<li>Compatibility (project): <code>./.codex/skills</code></li>\n<li>Compatibility (global): <code>$CODEX_HOME/skills</code> (fallback <code>~/.codex/skills</code>)</li>\n<li>Compatibility (project): <code>./.claude/skills</code></li>\n<li>Compatibility (global): <code>$CLAUDECODE_HOME/skills</code> or <code>$CLAUDE_HOME/skills</code> (fallback <code>~/.claude/skills</code>)</li>\n<li>Compatibility (project): <code>./.amp/skills</code></li>\n<li>Compatibility (global): <code>$AMPCLI_HOME/skills</code> or <code>$AMP_CLI_HOME/skills</code> or <code>$AMP_HOME/skills</code> (fallback <code>~/.amp/skills</code>)</li>\n<li>Extra paths from <code>skillPaths</code> (advanced)</li>\n</ol>\n<h2>Output formats</h2>\n<p>Use <code>--output-format</code> to switch output formats for automation.</p>\n<ul>\n<li><code>text</code> (default): human-friendly output</li>\n<li><code>json</code>: single JSON object</li>\n<li><code>stream-json</code>: emit one JSON object per line for arrays; otherwise emits a single JSON object</li>\n</ul>\n<p>Use <code>--quiet</code> to suppress output. Use <code>--no-interactive</code> (alias of <code>--no-prompt</code>) to disable prompts.</p>\n<h2>Exit codes</h2>\n<ul>\n<li><code>0</code>: success</li>\n<li><code>1</code>: usage error (invalid args, missing flags)</li>\n<li><code>2</code>: execution error (runtime/daemon failures)</li>\n<li><code>10</code>: disconnected (daemon not running or unreachable)</li>\n</ul>\n<p>Fatal errors are emitted even when <code>--quiet</code> is set. For JSON output, fatal errors are emitted as:</p>\n<pre><code>\n{ &quot;success&quot;: false, &quot;error&quot;: &quot;message&quot;, &quot;exitCode&quot;: 2 }\n\n</code></pre>\n<h2>Argument validation</h2>\n<p>The CLI validates common flags early and returns a usage error (<code>exitCode: 1</code>) when inputs are invalid.</p>\n<ul>\n<li>Conflicting flags are rejected (examples: <code>--global</code> + <code>--local</code>, <code>--skills-global</code> + <code>--skills-local</code>).</li>\n<li>Numeric flags must be positive integers:</li>\n<li><code>--port</code>, <code>--cdp-port</code></li>\n<li><code>--wait-timeout-ms</code>, <code>--timeout-ms</code></li>\n</ul>\n<h2>Surface inventory (source-accurate)</h2>\n<p>Canonical inventory document: <code>docs/SURFACE_REFERENCE.md</code>.</p>\n<h3>CLI command surface</h3>\n<ul>\n<li>Total commands: <code>55</code>.</li>\n<li>Categories: install/runtime management, session/connection, navigation, interaction, targets/pages, DOM inspection, export/diagnostics/macro/annotation, and internal power (<code>rpc</code>).</li>\n</ul>\n<h3>Tool surface</h3>\n<ul>\n<li>Total tools: <code>48</code> (<code>opendevbrowser_*</code>).</li>\n<li>Tool-only surface (no CLI equivalent): <code>opendevbrowser_prompting_guide</code>, <code>opendevbrowser_skill_list</code>, <code>opendevbrowser_skill_load</code>.</li>\n<li>CLI-only surface (no tool equivalent): <code>artifacts</code>, <code>rpc</code>.</li>\n</ul>\n<h3>Relay channel surface</h3>\n<ul>\n<li><code>/ops</code> (default extension channel): high-level command protocol; see <code>docs/SURFACE_REFERENCE.md</code> for all <code>38</code> command names.</li>\n<li><code>/cdp</code> (legacy): low-level <code>forwardCDPCommand</code> relay path with explicit opt-in (<code>--extension-legacy</code>).</li>\n</ul>\n<h2>Commands</h2>\n<h3>Install (default)</h3>\n<pre><code>\n# Interactive - prompts for global or local\n\nnpx opendevbrowser\n\n\n\n# Global installation (user-wide)\n\nnpx opendevbrowser --global\n\nnpx opendevbrowser -g\n\n\n\n# Local installation (current project)\n\nnpx opendevbrowser --local\n\nnpx opendevbrowser -l\n\n\n\n# Skip prompts, use default (global)\n\nnpx opendevbrowser --no-prompt\n\nnpx opendevbrowser --no-interactive\n\n\n\n# Full install (config + extension assets)\n\nnpx opendevbrowser --full\n\n\n\n# Also create opendevbrowser.jsonc config file\n\nnpx opendevbrowser --global --with-config\n\n\n\n# Full install (plugin + config + bundled skills)\n\nnpx opendevbrowser --global --with-config --skills-global\n\n\n\n# Install skills locally (project scope)\n\nnpx opendevbrowser --skills-local\n\n\n\n# Skip installing skills\n\nnpx opendevbrowser --no-skills\n\n</code></pre>\n<p>On first successful install, the CLI attempts to install daemon auto-start on supported platforms (macOS/Windows) so the relay is</p>\n<p>available on login. You can remove it later with <code>npx opendevbrowser daemon uninstall</code>.</p>\n<h3>Update</h3>\n<p>Clear the OpenCode cache to trigger reinstallation of the latest version.</p>\n<pre><code>\nnpx opendevbrowser --update\n\nnpx opendevbrowser -u\n\n</code></pre>\n<p>This removes cached files from <code>~/.cache/opencode/node_modules/opendevbrowser/</code>. OpenCode will download the latest version on next run.</p>\n<h3>Uninstall</h3>\n<p>Remove the plugin from configuration.</p>\n<pre><code>\n# Remove from global config\n\nnpx opendevbrowser --uninstall --global\n\n\n\n# Remove from local config\n\nnpx opendevbrowser --uninstall --local\n\n\n\n# Interactive - prompts which to remove if both exist\n\nnpx opendevbrowser --uninstall\n\n</code></pre>\n<h3>Help / Version</h3>\n<pre><code>\nnpx opendevbrowser --help\n\nnpx opendevbrowser -h\n\n\n\nnpx opendevbrowser --version\n\nnpx opendevbrowser -v\n\n</code></pre>\n<p><code>--help</code> now prints a complete, agent-oriented inventory:</p>\n<ul>\n<li>All CLI commands (55) grouped by function, each with one-line descriptions.</li>\n<li>All supported CLI flags, grouped by install/session/navigation/workflow usage.</li>\n<li>All <code>opendevbrowser_*</code> tools (48), each with one-line descriptions.</li>\n<li>Macro execute timeout guidance via <code>--timeout-ms</code> for slow <code>macro-resolve --execute</code> runs.</li>\n<li>Canonical inventory pointers: <code>docs/SURFACE_REFERENCE.md</code>, <code>src/tools/index.ts</code>, and this CLI guide.</li>\n</ul>\n<p>Operational help parity check:</p>\n<pre><code>\nnpx opendevbrowser --help\n\nnpx opendevbrowser help\n\n</code></pre>\n<h2>Automation commands (daemon)</h2>\n<h3>Serve (daemon)</h3>\n<p>Start a local daemon to keep sessions alive between commands.</p>\n<pre><code>\nnpx opendevbrowser serve\n\nnpx opendevbrowser serve --port 8788 --token my-token\n\n\n\n# Stop the daemon\n\nnpx opendevbrowser serve --stop\n\n</code></pre>\n<p>The daemon listens on <code>127.0.0.1</code> and starts the relay the extension connects to. Metadata lives in</p>\n<p><code>~/.cache/opendevbrowser/daemon.json</code> (cache only);</p>\n<p><code>/status</code> is the source of truth. The daemon port/token are persisted in <code>opendevbrowser.jsonc</code> as <code>daemonPort</code>/<code>daemonToken</code>.</p>\n<p><code>serve</code> now performs a stale-daemon preflight and terminates orphan <code>opendevbrowser serve</code> processes before starting (or before</p>\n<p>returning &quot;already running&quot;), while preserving the active daemon on the requested port.</p>\n<p>If you run onboarding tests alongside an existing daemon, isolate config/cache via <code>OPENCODE_CONFIG_DIR</code> and <code>OPENCODE_CACHE_DIR</code></p>\n<p>to avoid token/port collisions between sessions.</p>\n<p>If <code>nativeExtensionId</code> is set in <code>opendevbrowser.jsonc</code>, <code>serve</code> will auto-install the native messaging host when it is missing.</p>\n<p>If it is not set, <code>serve</code> attempts to auto-detect the extension ID from Chrome, Brave, or Chromium profiles; if detection fails it continues startup.</p>\n<p>Relay HTTP endpoints (<code>/config</code>, <code>/status</code>, <code>/pair</code>) accept extension origins and loopback requests with no <code>Origin</code> (including</p>\n<p><code>Origin: null</code>) to support MV3 + PNA. Non-extension origins are rejected; preflights include</p>\n<p><code>Access-Control-Allow-Private-Network: true</code> when requested.</p>\n<p>#### Manual recovery (if the daemon is down or stuck)</p>\n<pre><code>\n# Start the daemon manually\n\nnpx opendevbrowser serve\n\n\n\n# Stop/kill an existing daemon before restarting\n\nnpx opendevbrowser serve --stop\n\n</code></pre>\n<h3>Daemon auto-start</h3>\n<p>Install or remove OS-level auto-start for the daemon. This uses a stable, absolute CLI entrypoint (no PATH reliance), and returns</p>\n<p>machine-readable output with <code>--output-format json</code>.</p>\n<pre><code>\nnpx opendevbrowser daemon install\n\nnpx opendevbrowser daemon uninstall\n\nnpx opendevbrowser daemon status\n\n</code></pre>\n<p>Behavior:</p>\n<ul>\n<li>macOS: LaunchAgent at <code>~/Library/LaunchAgents/com.opendevbrowser.daemon.plist</code> targeting an absolute CLI entrypoint.</li>\n<li>Windows: per-user Task Scheduler logon task targeting an absolute CLI entrypoint.</li>\n<li><code>daemon status</code> reports <code>{ installed, running, status? }</code> and does not throw a usage error when missing.</li>\n<li><code>daemon status</code> returns exit code <code>10</code> when the daemon is not running.</li>\n</ul>\n<p>Exit codes align with the CLI:</p>\n<ul>\n<li><code>0</code>: success</li>\n<li><code>1</code>: usage error</li>\n<li><code>2</code>: execution error (permissions, missing binary, OS service failure)</li>\n<li><code>10</code>: disconnected/not running (status only)</li>\n</ul>\n<p>#### Auto-start install + manual fallback</p>\n<pre><code>\n# Install auto-start (recommended)\n\nnpx opendevbrowser daemon install\n\n\n\n# If auto-start fails, start manually\n\nnpx opendevbrowser serve\n\n\n\n# Stop/kill before restarting\n\nnpx opendevbrowser serve --stop\n\n</code></pre>\n<h3>Native messaging host</h3>\n<p>Install the native messaging host for the extension to use as a fallback transport when the relay WebSocket is unavailable.</p>\n<pre><code>\n# Install native host (requires extension ID)\n\nnpx opendevbrowser native install &lt;extension-id&gt;\n\n\n\n# Check native host status\n\nnpx opendevbrowser native status\n\n\n\n# Remove native host\n\nnpx opendevbrowser native uninstall\n\n</code></pre>\n<p>Notes:</p>\n<ul>\n<li>Supported on macOS, Linux, and Windows.</li>\n<li>Windows install writes a registry entry under <code>HKCU\\Software\\Google\\Chrome\\NativeMessagingHosts\\com.opendevbrowser.native</code>.</li>\n<li><code>native install</code> requires the extension ID (chrome://extensions → copy ID).</li>\n<li>Set <code>nativeExtensionId</code> in <code>opendevbrowser.jsonc</code> to allow <code>serve</code> to auto-install the native host when missing (preferred).</li>\n<li><code>serve</code> also attempts auto-detection from Chrome, Brave, or Chromium profiles, but explicit config is more reliable.</li>\n<li><code>native status</code> reports installed state + extension ID from the manifest.</li>\n<li>Use <code>--transport native</code> with <code>status</code> to check native host status without requiring the daemon.</li>\n</ul>\n<h3>Workflow wrappers</h3>\n<p>The workflow wrappers expose the finalized research/shopping/product-video surfaces from</p>\n<p><code>docs/RESEARCH_SHOPPING_PRODUCT_VIDEO_FINAL_SPEC.md</code>.</p>\n<p>#### Research (<code>research run</code>)</p>\n<pre><code>\nnpx opendevbrowser research run --topic &quot;browser automation&quot; --days 30 --mode compact\n\nnpx opendevbrowser research run --topic &quot;market map&quot; --from 2026-02-01 --to 2026-02-16 --source-selection all --mode json\n\nnpx opendevbrowser research run --topic &quot;creator tools&quot; --sources web,shopping --include-engagement --limit-per-source 5 --mode context\n\n</code></pre>\n<p>Flags:</p>\n<ul>\n<li><code>--topic</code> (required)</li>\n<li><code>--days</code></li>\n<li><code>--from</code></li>\n<li><code>--to</code></li>\n<li><code>--source-selection</code> (<code>auto|web|community|social|shopping|all</code>)</li>\n<li><code>--sources</code> (comma-separated concrete sources)</li>\n<li><code>--mode</code> (<code>compact|json|md|context|path</code>)</li>\n<li><code>--include-engagement</code></li>\n<li><code>--limit-per-source</code></li>\n<li><code>--output-dir</code></li>\n<li><code>--ttl-hours</code></li>\n<li><code>--use-cookies</code> (<code>true|false</code>; bare flag means <code>true</code>)</li>\n<li><code>--cookie-policy-override</code> (<code>off|auto|required</code>)</li>\n<li><code>--cookie-policy</code> (alias of <code>--cookie-policy-override</code>)</li>\n</ul>\n<p>#### Shopping (<code>shopping run</code>)</p>\n<pre><code>\nnpx opendevbrowser shopping run --query &quot;usb microphone&quot; --mode compact\n\nnpx opendevbrowser shopping run --query &quot;portable monitor&quot; --providers shopping/amazon,shopping/newegg --sort lowest_price --mode md\n\nnpx opendevbrowser shopping run --query &quot;desk chair&quot; --budget 250 --region us --mode path\n\n</code></pre>\n<p>Flags:</p>\n<ul>\n<li><code>--query</code> (required)</li>\n<li><code>--providers</code> (comma-separated; defaults to all v1 adapters)</li>\n<li><code>--budget</code></li>\n<li><code>--region</code></li>\n<li><code>--sort</code> (<code>best_deal|lowest_price|highest_rating|fastest_shipping</code>)</li>\n<li><code>--mode</code> (<code>compact|json|md|context|path</code>)</li>\n<li><code>--output-dir</code></li>\n<li><code>--ttl-hours</code></li>\n<li><code>--use-cookies</code> (<code>true|false</code>; bare flag means <code>true</code>)</li>\n<li><code>--cookie-policy-override</code> (<code>off|auto|required</code>)</li>\n<li><code>--cookie-policy</code> (alias of <code>--cookie-policy-override</code>)</li>\n</ul>\n<p>#### Product presentation asset (<code>product-video run</code>)</p>\n<pre><code>\nnpx opendevbrowser product-video run --product-url &quot;https://example.com/p/1&quot; --include-screenshots\n\nnpx opendevbrowser product-video run --product-name &quot;Sample Product&quot; --provider-hint shopping/amazon --output-dir /tmp/product-assets\n\n</code></pre>\n<p>Flags:</p>\n<ul>\n<li><code>--product-url</code> (required unless <code>--product-name</code> is provided)</li>\n<li><code>--product-name</code> (required unless <code>--product-url</code> is provided)</li>\n<li><code>--provider-hint</code></li>\n<li><code>--include-screenshots</code> (<code>true|false</code>; bare flag means <code>true</code>)</li>\n<li><code>--include-all-images</code> (<code>true|false</code>; bare flag means <code>true</code>)</li>\n<li><code>--include-copy</code> (<code>true|false</code>; bare flag means <code>true</code>)</li>\n<li><code>--output-dir</code></li>\n<li><code>--ttl-hours</code></li>\n<li><code>--use-cookies</code> (<code>true|false</code>; bare flag means <code>true</code>)</li>\n<li><code>--cookie-policy-override</code> (<code>off|auto|required</code>)</li>\n<li><code>--cookie-policy</code> (alias of <code>--cookie-policy-override</code>)</li>\n</ul>\n<p>Wrapper behavior:</p>\n<ul>\n<li>Timebox semantics are strict (<code>--days</code> is mutually exclusive with <code>--from/--to</code>).</li>\n<li>Render modes for <code>research</code> and <code>shopping</code> are shared: <code>compact|json|md|context|path</code>.</li>\n<li><code>product-video run</code> always returns a path-based local asset pack.</li>\n<li>Path-bearing modes persist artifacts under the configured output directory (or default tmp namespace) and include TTL metadata in manifest files.</li>\n<li>Workflow cookie policy defaults to <code>providers.cookiePolicy=auto</code> and source defaults to <code>providers.cookieSource</code> (<code>file</code>, <code>env</code>, or <code>inline</code>).</li>\n<li>Effective policy precedence is <code>--cookie-policy-override</code>/<code>--cookie-policy</code> &gt; <code>--use-cookies</code> &gt; config defaults.</li>\n<li><code>auto</code> attempts injection when cookies are available and continues when cookies are missing/unusable.</li>\n<li><code>required</code> fails fast with <code>reasonCode=auth_required</code> when cookie loading/injection/verification cannot establish a session.</li>\n<li>Cookie diagnostics are exposed in workflow metrics under <code>meta.metrics.cookie_diagnostics</code> and <code>meta.metrics.cookieDiagnostics</code>.</li>\n</ul>\n<h3>Artifact lifecycle cleanup</h3>\n<p>Use the artifact cleanup command to remove expired bundles generated by workflow runs:</p>\n<pre><code>\nnpx opendevbrowser artifacts cleanup --expired-only\n\nnpx opendevbrowser artifacts cleanup --expired-only --output-dir /tmp/opendevbrowser\n\n</code></pre>\n<p>Script helper:</p>\n<pre><code>\n./scripts/artifacts-cleanup.sh\n\n./scripts/artifacts-cleanup.sh /tmp/opendevbrowser\n\n</code></pre>\n<p>Notes:</p>\n<ul>\n<li><code>--expired-only</code> is required.</li>\n<li>Default cleanup root is <code>${TMPDIR:-/tmp}/opendevbrowser</code>.</li>\n<li>Output includes <code>removed</code> and <code>skipped</code> run paths.</li>\n</ul>\n<h3>Run (single-shot script)</h3>\n<p>Run a JSON script without the daemon.</p>\n<pre><code>\nnpx opendevbrowser run --script ./script.json --output-format json\n\n\n\n# Or pipe JSON\n\ncat ./script.json | npx opendevbrowser run --output-format stream-json\n\n\n\n# Optional launch flags for run\n\nnpx opendevbrowser run --script ./script.json --headless --profile default --start-url https://example.com\n\nnpx opendevbrowser run --script ./script.json --chrome-path &quot;/Applications/Google Chrome.app/Contents/MacOS/Google Chrome&quot; --flag &quot;--disable-gpu&quot;\n\n</code></pre>\n<p>Supported <code>run</code> launch flags:</p>\n<ul>\n<li><code>--headless</code></li>\n<li><code>--profile</code></li>\n<li><code>--persist-profile</code></li>\n<li><code>--chrome-path</code></li>\n<li><code>--start-url</code></li>\n<li><code>--flag</code> (repeatable)</li>\n</ul>\n<p>Script format:</p>\n<pre><code>\n[\n\n  { &quot;action&quot;: &quot;goto&quot;, &quot;args&quot;: { &quot;url&quot;: &quot;https://example.com&quot; } },\n\n  { &quot;action&quot;: &quot;snapshot&quot; },\n\n  { &quot;action&quot;: &quot;click&quot;, &quot;args&quot;: { &quot;ref&quot;: &quot;r1&quot; } }\n\n]\n\n</code></pre>\n<h2>Session commands (daemon required)</h2>\n<h3>Launch</h3>\n<pre><code>\nnpx opendevbrowser launch --profile default --start-url https://example.com\n\n\n\n# Extension relay controls\n\nnpx opendevbrowser launch --extension-only\n\nnpx opendevbrowser launch --no-extension\n\nnpx opendevbrowser launch --extension-legacy\n\nnpx opendevbrowser launch --wait-for-extension --wait-timeout-ms 30000\n\n</code></pre>\n<p>Flags:</p>\n<ul>\n<li><code>--headless</code></li>\n<li><code>--profile</code></li>\n<li><code>--start-url</code></li>\n<li><code>--chrome-path</code></li>\n<li><code>--persist-profile</code></li>\n<li><code>--flag</code> (repeatable)</li>\n<li><code>--no-extension</code></li>\n<li><code>--extension-only</code></li>\n<li><code>--extension-legacy</code></li>\n<li><code>--wait-for-extension</code></li>\n<li><code>--wait-timeout-ms</code></li>\n</ul>\n<p>Default behavior:</p>\n<ul>\n<li>Extension relay (<code>extension</code> mode) is the default when available, using the <code>/ops</code> WebSocket.</li>\n<li>If the extension is not connected, launch fails with guidance and exact commands for the explicit alternatives.</li>\n<li>Headless is never the default.</li>\n<li>Extension headless is unsupported. <code>launch --headless</code> must be paired with <code>--no-extension</code>; extension-intent headless requests fail with <code>unsupported_mode</code>.</li>\n<li>When hub mode is enabled, there is no local relay fallback. If the hub is unavailable, commands fail with guidance.</li>\n<li>Extension relay requires Chrome 125+ (flat CDP sessions).</li>\n</ul>\n<p>Interactive vs non-interactive:</p>\n<ul>\n<li>Interactive CLI (TTY): you will be prompted to connect the extension, then explicitly choose Managed or CDPConnect if you want to proceed.</li>\n<li>Non-interactive (agents/CI): the command fails fast and prints the exact commands to run for Managed or CDPConnect.</li>\n</ul>\n<h3>Connection flags &amp; status semantics</h3>\n<div class=\"docs-table-wrap\"><table>\n<thead><tr>\n<th>Flag / Status</th>\n<th>Meaning</th>\n<th>Notes</th>\n</tr></thead>\n<tbody>\n<tr>\n<td><code>--no-extension</code></td>\n<td>Force managed mode</td>\n<td>Bypasses relay and extension entirely.</td>\n</tr>\n<tr>\n<td><code>--extension-only</code></td>\n<td>Require extension mode</td>\n<td>Fails if extension is not connected/handshaken.</td>\n</tr>\n<tr>\n<td><code>--extension-legacy</code></td>\n<td>Use legacy extension relay</td>\n<td>Routes through relay <code>/cdp</code> instead of <code>/ops</code>.</td>\n</tr>\n<tr>\n<td><code>--wait-for-extension</code></td>\n<td>Wait for extension handshake</td>\n<td>Only applies to extension mode; waits up to <code>--wait-timeout-ms</code>.</td>\n</tr>\n<tr>\n<td><code>--wait-timeout-ms</code></td>\n<td>Max wait for extension</td>\n<td>Defaults to 30s.</td>\n</tr>\n<tr>\n<td><code>extensionConnected</code></td>\n<td>Extension websocket connected</td>\n<td><code>false</code> means popup isn’t connected to relay.</td>\n</tr>\n<tr>\n<td><code>extensionHandshakeComplete</code></td>\n<td>Extension handshake done</td>\n<td><code>false</code> means reconnect/repair from popup.</td>\n</tr>\n<tr>\n<td><code>opsConnected</code></td>\n<td>Active <code>/ops</code> client attached</td>\n<td><code>false</code> means no ops client is connected.</td>\n</tr>\n<tr>\n<td><code>cdpConnected</code></td>\n<td>Active <code>/cdp</code> client attached</td>\n<td>Expected <code>false</code> until a legacy <code>/cdp</code> session connects.</td>\n</tr>\n<tr>\n<td><code>pairingRequired</code></td>\n<td>Relay token required</td>\n<td>When <code>true</code>, both <code>/ops</code> and <code>/cdp</code> require a token (auto-fetched).</td>\n</tr>\n</tbody>\n</table></div>\n<h3>Connect</h3>\n<pre><code>\nnpx opendevbrowser connect --ws-endpoint ws://127.0.0.1:9222/devtools/browser/...\n\nnpx opendevbrowser connect --host 127.0.0.1 --cdp-port 9222\n\n</code></pre>\n<p>This command starts a <code>cdpConnect</code> session (attach to an existing Chrome with remote debugging enabled).</p>\n<p>If the <code>--ws-endpoint</code> points at the local relay (for example <code>ws://127.0.0.1:8787</code> or <code>ws://127.0.0.1:8787/ops</code>),</p>\n<p>the CLI will normalize to <code>/ops</code> and route through the extension relay (<code>extension</code> mode).</p>\n<p>Use <code>--extension-legacy</code> if you need the legacy <code>/cdp</code> relay path.</p>\n<p>When routing through the relay, the CLI automatically fetches relay config and the pairing token (if required) and authenticates</p>\n<p>the <code>/ops</code> or <code>/cdp</code> connection. Direct relay websocket connections without a token are rejected when pairing is enabled.</p>\n<h3>Relay binding queue</h3>\n<p>Hub binding is exclusive only for binding/legacy paths (for example <code>/cdp</code> and commands that require a binding). Additional clients are queued FIFO and wait up to 30s by default.</p>\n<p>If you see <code>RELAY_WAIT_TIMEOUT</code>, retry after the current binding expires or stop the other bound client.</p>\n<p>Relay behavior note: extension uses a single extension websocket, while the relay can serve multiple <code>/ops</code> clients. Disconnecting the extension or restarting the relay drops active sessions, including annotation flows. Reconnect via the popup (or restart the daemon) before retrying.</p>\n<h3>Concurrency semantics</h3>\n<ul>\n<li>Transport-level concurrency: <code>/ops</code> supports multi-client access and multiple sessions.</li>\n<li>Runtime scheduling uses <code>ExecutionKey = (sessionId, targetId)</code> with target-scoped queues.</li>\n<li>Same target stays FIFO; different targets in one session run in parallel up to <code>effectiveParallelCap</code>.</li>\n<li><code>session-per-worker</code> remains the safest baseline for simple operational isolation, but in-session multi-target parallelism is supported on <code>/ops</code>, managed, and <code>cdpConnect</code>.</li>\n<li>Use explicit <code>--target-id</code> routing for concurrent flows; treat <code>target-use</code> as ergonomic fallback only.</li>\n<li>Use <code>/ops</code> as the default concurrent relay channel. Use <code>--extension-legacy</code> (<code>/cdp</code>) only for compatibility-specific paths.</li>\n<li>Legacy <code>/cdp</code> stays sequential (<code>effectiveParallelCap=1</code>) by design.</li>\n<li>For managed parallel launches with persisted profiles, use unique profile directories per session (or disable persistence) to avoid ProcessSingleton/SingletonLock collisions.</li>\n<li>Parity divergences are registry-bound in <code>docs/PARITY_DECLARED_DIVERGENCES.md</code>.</li>\n</ul>\n<h3>Disconnect</h3>\n<pre><code>\nnpx opendevbrowser disconnect --session-id &lt;session-id&gt;\n\nnpx opendevbrowser disconnect --session-id &lt;session-id&gt; --close-browser\n\n</code></pre>\n<h3>Status</h3>\n<pre><code>\nnpx opendevbrowser status               # daemon status (default)\n\nnpx opendevbrowser status --daemon      # daemon status (explicit)\n\nnpx opendevbrowser status --session-id &lt;session-id&gt;\n\nnpx opendevbrowser status --transport native\n\n</code></pre>\n<h3>Cookie import</h3>\n<pre><code>\nnpx opendevbrowser cookie-import \\\n\n  --session-id &lt;session-id&gt; \\\n\n  --cookies &#39;[{&quot;name&quot;:&quot;session&quot;,&quot;value&quot;:&quot;abc123&quot;,&quot;url&quot;:&quot;https://example.com&quot;}]&#39;\n\n\n\nnpx opendevbrowser cookie-import \\\n\n  --session-id &lt;session-id&gt; \\\n\n  --cookies-file ./cookies.json \\\n\n  --strict=false \\\n\n  --request-id req-cookie-001\n\n</code></pre>\n<p>Notes:</p>\n<ul>\n<li>Provide exactly one cookies source: <code>--cookies</code> or <code>--cookies-file</code>.</li>\n<li><code>--strict</code> defaults to <code>true</code>.</li>\n<li>Supported across <code>managed</code>, default extension <code>/ops</code>, extension legacy <code>/cdp</code>, and direct <code>cdpConnect</code> sessions.</li>\n</ul>\n<h3>Cookie list</h3>\n<pre><code>\nnpx opendevbrowser cookie-list \\\n\n  --session-id &lt;session-id&gt;\n\n\n\nnpx opendevbrowser cookie-list \\\n\n  --session-id &lt;session-id&gt; \\\n\n  --url https://example.com \\\n\n  --url https://shop.example.com \\\n\n  --request-id req-cookie-list-001\n\n</code></pre>\n<p>Notes:</p>\n<ul>\n<li><code>--url</code> is optional and repeatable; each value is normalized and deduplicated.</li>\n<li>Supports <code>managed</code>, default extension <code>/ops</code>, extension legacy <code>/cdp</code>, and direct <code>cdpConnect</code> sessions.</li>\n</ul>\n<h3>Macro resolve</h3>\n<pre><code>\nnpx opendevbrowser macro-resolve --expression &#39;@web.search(&quot;openai&quot;)&#39;\n\nnpx opendevbrowser macro-resolve --expression &#39;@social.post(&quot;x&quot;, &quot;ship it&quot;)&#39; --default-provider social/x --include-catalog\n\nnpx opendevbrowser macro-resolve --expression &#39;@web.search(&quot;opendevbrowser&quot;)&#39; --execute --output-format json\n\nnpx opendevbrowser macro-resolve --expression &#39;@media.search(&quot;youtube transcript parity&quot;, &quot;youtube&quot;, 5)&#39; --execute --timeout-ms 120000 --output-format json\n\n</code></pre>\n<p>Notes:</p>\n<ul>\n<li>Default mode is resolve-only (returns the resolved action/provenance payload).</li>\n<li><code>--execute</code> runs the resolved provider action and returns additive execution metadata (<code>meta.tier.selected</code>, <code>meta.tier.reasonCode</code>, <code>meta.provenance.provider</code>, <code>meta.provenance.retrievalPath</code>, <code>meta.provenance.retrievedAt</code>).</li>\n<li><code>--timeout-ms</code> sets client-side daemon transport timeout for slow <code>--execute</code> runs.</li>\n<li><code>opendevbrowser --help</code> includes this timeout flag in the global flag inventory.</li>\n</ul>\n<h3>Blocker contract (v2)</h3>\n<p>Compatibility rule (v2):</p>\n<ul>\n<li>Blocker fields are additive-only and live under <code>meta.blocker</code> (or <code>execution.meta.blocker</code> for <code>macro-resolve --execute</code>).</li>\n<li>Existing success/error fields and codes remain unchanged.</li>\n<li>Consumers should treat missing blocker fields as backward-compatible <code>no blocker metadata</code>.</li>\n</ul>\n<p>Canonical placement:</p>\n<ul>\n<li><code>goto</code>: <code>data.meta.blockerState</code> + optional <code>data.meta.blocker</code>.</li>\n<li><code>wait</code>: <code>data.meta.blockerState</code> + optional <code>data.meta.blocker</code>.</li>\n<li><code>debug-trace-snapshot</code>: <code>data.meta.blockerState</code> + optional <code>data.meta.blocker</code> + optional <code>data.meta.blockerArtifacts</code>.</li>\n<li><code>macro-resolve --execute</code>: <code>data.execution.meta.ok</code> + optional <code>data.execution.meta.blocker</code>.</li>\n<li><code>status</code>: <code>data.meta.blockerState</code> + optional <code>data.meta.blockerResolution</code> (<code>resolved | unresolved | deferred</code>).</li>\n</ul>\n<p>Canonical examples:</p>\n<pre><code>\n{\n\n  &quot;command&quot;: &quot;goto&quot;,\n\n  &quot;success&quot;: true,\n\n  &quot;data&quot;: {\n\n    &quot;finalUrl&quot;: &quot;https://example.com&quot;,\n\n    &quot;status&quot;: 200,\n\n    &quot;timingMs&quot;: 412,\n\n    &quot;meta&quot;: {\n\n      &quot;blockerState&quot;: &quot;clear&quot;\n\n    }\n\n  }\n\n}\n\n</code></pre>\n<pre><code>\n{\n\n  &quot;command&quot;: &quot;goto&quot;,\n\n  &quot;success&quot;: true,\n\n  &quot;data&quot;: {\n\n    &quot;finalUrl&quot;: &quot;https://x.com/i/flow/login&quot;,\n\n    &quot;status&quot;: 200,\n\n    &quot;timingMs&quot;: 588,\n\n    &quot;meta&quot;: {\n\n      &quot;blockerState&quot;: &quot;active&quot;,\n\n      &quot;blocker&quot;: {\n\n        &quot;schemaVersion&quot;: &quot;1.0&quot;,\n\n        &quot;type&quot;: &quot;auth_required&quot;,\n\n        &quot;source&quot;: &quot;navigation&quot;,\n\n        &quot;confidence&quot;: 0.97,\n\n        &quot;retryable&quot;: false\n\n      }\n\n    }\n\n  }\n\n}\n\n</code></pre>\n<pre><code>\n{\n\n  &quot;command&quot;: &quot;wait&quot;,\n\n  &quot;success&quot;: true,\n\n  &quot;data&quot;: {\n\n    &quot;timingMs&quot;: 221,\n\n    &quot;meta&quot;: {\n\n      &quot;blockerState&quot;: &quot;clear&quot;\n\n    }\n\n  }\n\n}\n\n</code></pre>\n<pre><code>\n{\n\n  &quot;command&quot;: &quot;status&quot;,\n\n  &quot;success&quot;: true,\n\n  &quot;data&quot;: {\n\n    &quot;mode&quot;: &quot;managed&quot;,\n\n    &quot;activeTargetId&quot;: &quot;target-1&quot;,\n\n    &quot;url&quot;: &quot;https://x.com/i/flow/login&quot;,\n\n    &quot;title&quot;: &quot;Log in to X / X&quot;,\n\n    &quot;meta&quot;: {\n\n      &quot;blockerState&quot;: &quot;active&quot;,\n\n      &quot;blockerResolution&quot;: {\n\n        &quot;status&quot;: &quot;unresolved&quot;,\n\n        &quot;reason&quot;: &quot;verification_timeout&quot;,\n\n        &quot;updatedAt&quot;: &quot;2026-02-15T14:18:28.000Z&quot;\n\n      }\n\n    }\n\n  }\n\n}\n\n</code></pre>\n<pre><code>\n{\n\n  &quot;command&quot;: &quot;wait&quot;,\n\n  &quot;success&quot;: true,\n\n  &quot;data&quot;: {\n\n    &quot;timingMs&quot;: 1470,\n\n    &quot;meta&quot;: {\n\n      &quot;blockerState&quot;: &quot;active&quot;,\n\n      &quot;blocker&quot;: {\n\n        &quot;schemaVersion&quot;: &quot;1.0&quot;,\n\n        &quot;type&quot;: &quot;anti_bot_challenge&quot;,\n\n        &quot;source&quot;: &quot;navigation&quot;,\n\n        &quot;confidence&quot;: 0.96,\n\n        &quot;retryable&quot;: false\n\n      }\n\n    }\n\n  }\n\n}\n\n</code></pre>\n<pre><code>\n{\n\n  &quot;command&quot;: &quot;debug-trace-snapshot&quot;,\n\n  &quot;success&quot;: true,\n\n  &quot;data&quot;: {\n\n    &quot;requestId&quot;: &quot;req-debug-001&quot;,\n\n    &quot;meta&quot;: {\n\n      &quot;blockerState&quot;: &quot;clear&quot;\n\n    }\n\n  }\n\n}\n\n</code></pre>\n<pre><code>\n{\n\n  &quot;command&quot;: &quot;debug-trace-snapshot&quot;,\n\n  &quot;success&quot;: true,\n\n  &quot;data&quot;: {\n\n    &quot;requestId&quot;: &quot;req-debug-002&quot;,\n\n    &quot;meta&quot;: {\n\n      &quot;blockerState&quot;: &quot;active&quot;,\n\n      &quot;blocker&quot;: {\n\n        &quot;schemaVersion&quot;: &quot;1.0&quot;,\n\n        &quot;type&quot;: &quot;anti_bot_challenge&quot;,\n\n        &quot;source&quot;: &quot;network&quot;,\n\n        &quot;confidence&quot;: 0.96,\n\n        &quot;retryable&quot;: false\n\n      },\n\n      &quot;blockerArtifacts&quot;: {\n\n        &quot;schemaVersion&quot;: &quot;1.0&quot;,\n\n        &quot;hosts&quot;: [&quot;www.recaptcha.net&quot;, &quot;challenges.cloudflare.com&quot;]\n\n      }\n\n    }\n\n  }\n\n}\n\n</code></pre>\n<pre><code>\n{\n\n  &quot;command&quot;: &quot;macro-resolve --execute&quot;,\n\n  &quot;success&quot;: true,\n\n  &quot;data&quot;: {\n\n    &quot;runtime&quot;: &quot;macros&quot;,\n\n    &quot;execution&quot;: {\n\n      &quot;meta&quot;: {\n\n        &quot;ok&quot;: true,\n\n        &quot;partial&quot;: false\n\n      }\n\n    }\n\n  }\n\n}\n\n</code></pre>\n<pre><code>\n{\n\n  &quot;command&quot;: &quot;macro-resolve --execute&quot;,\n\n  &quot;success&quot;: true,\n\n  &quot;data&quot;: {\n\n    &quot;runtime&quot;: &quot;macros&quot;,\n\n    &quot;execution&quot;: {\n\n      &quot;meta&quot;: {\n\n        &quot;ok&quot;: false,\n\n        &quot;partial&quot;: true,\n\n        &quot;blocker&quot;: {\n\n          &quot;schemaVersion&quot;: &quot;1.0&quot;,\n\n          &quot;type&quot;: &quot;env_limited&quot;,\n\n          &quot;source&quot;: &quot;macro_execution&quot;,\n\n          &quot;confidence&quot;: 0.9,\n\n          &quot;retryable&quot;: true\n\n        }\n\n      }\n\n    }\n\n  }\n\n}\n\n</code></pre>\n<h3>RPC (power-user, internal)</h3>\n<p>Execute any daemon command directly. This bypasses the stable CLI command surface, is intentionally unsafe/internal, and requires <code>--unsafe-internal</code>.</p>\n<pre><code>\n# Minimal call (empty params object)\n\nnpx opendevbrowser rpc --unsafe-internal --name relay.status --output-format json\n\n\n\n# With inline JSON params\n\nnpx opendevbrowser rpc --unsafe-internal --name nav.goto \\\n\n  --params &#39;{&quot;sessionId&quot;:&quot;&lt;session-id&gt;&quot;,&quot;url&quot;:&quot;https://example.com&quot;,&quot;waitUntil&quot;:&quot;load&quot;,&quot;timeoutMs&quot;:30000}&#39; \\\n\n  --timeout-ms 45000 --output-format json\n\n\n\n# With params from file\n\nnpx opendevbrowser rpc --unsafe-internal --name session.status --params-file ./rpc-params.json --output-format json\n\n</code></pre>\n<p>Notes:</p>\n<ul>\n<li>Params must be a JSON object.</li>\n<li>Use <code>--output-format json</code> for machine-readable responses.</li>\n<li><code>rpc</code> is CLI-only by design and is not part of the stable tool parity surface.</li>\n<li><code>rpc</code> command names/params are internal and may change without compatibility guarantees.</li>\n<li>A bad <code>rpc</code> call can close sessions, navigate logged-in tabs, or trigger unintended side effects.</li>\n<li>Prefer stable commands (<code>goto</code>, <code>snapshot</code>, <code>click</code>, <code>type</code>, and related tool equivalents) whenever possible.</li>\n<li>Use <code>rpc</code> only when necessary, validate params carefully, and test in a disposable session first.</li>\n</ul>\n<h2>Navigation commands (daemon required)</h2>\n<h3>Goto</h3>\n<pre><code>\nnpx opendevbrowser goto --session-id &lt;session-id&gt; --url https://example.com\n\nnpx opendevbrowser goto --session-id &lt;session-id&gt; --url https://example.com --wait-until load --timeout-ms 30000\n\n</code></pre>\n<h3>Wait</h3>\n<pre><code>\nnpx opendevbrowser wait --session-id &lt;session-id&gt; --until load\n\nnpx opendevbrowser wait --session-id &lt;session-id&gt; --ref r12 --state visible --timeout-ms 15000\n\n</code></pre>\n<h3>Snapshot</h3>\n<pre><code>\nnpx opendevbrowser snapshot --session-id &lt;session-id&gt;\n\nnpx opendevbrowser snapshot --session-id &lt;session-id&gt; --max-chars 16000 --cursor &lt;cursor&gt;\n\n</code></pre>\n<h2>Interaction commands (daemon required)</h2>\n<h3>Click</h3>\n<pre><code>\nnpx opendevbrowser click --session-id &lt;session-id&gt; --ref r12\n\n</code></pre>\n<h3>Hover</h3>\n<pre><code>\nnpx opendevbrowser hover --session-id &lt;session-id&gt; --ref r12\n\n</code></pre>\n<h3>Press</h3>\n<pre><code>\nnpx opendevbrowser press --session-id &lt;session-id&gt; --key Enter\n\nnpx opendevbrowser press --session-id &lt;session-id&gt; --key Enter --ref r12\n\n</code></pre>\n<h3>Check / Uncheck</h3>\n<pre><code>\nnpx opendevbrowser check --session-id &lt;session-id&gt; --ref r12\n\nnpx opendevbrowser uncheck --session-id &lt;session-id&gt; --ref r12\n\n</code></pre>\n<h3>Type</h3>\n<pre><code>\nnpx opendevbrowser type --session-id &lt;session-id&gt; --ref r12 --text &quot;hello&quot;\n\nnpx opendevbrowser type --session-id &lt;session-id&gt; --ref r12 --text &quot;hello&quot; --clear --submit\n\n</code></pre>\n<h3>Select</h3>\n<pre><code>\nnpx opendevbrowser select --session-id &lt;session-id&gt; --ref r12 --values value1,value2\n\n</code></pre>\n<h3>Scroll</h3>\n<pre><code>\nnpx opendevbrowser scroll --session-id &lt;session-id&gt; --dy 500\n\nnpx opendevbrowser scroll --session-id &lt;session-id&gt; --ref r12 --dy 300\n\n</code></pre>\n<h3>Scroll into view</h3>\n<pre><code>\nnpx opendevbrowser scroll-into-view --session-id &lt;session-id&gt; --ref r12\n\n</code></pre>\n<h2>Annotation (direct + relay)</h2>\n<p>Annotations are available through both the CLI command and the <code>opendevbrowser_annotate</code> tool. The default transport (<code>auto</code>)</p>\n<p>uses direct CDP when possible and falls back to relay in extension sessions. See <code>docs/ANNOTATE.md</code> for setup and details.</p>\n<pre><code>\nnpx opendevbrowser annotate --session-id &lt;session-id&gt;\n\n\n\n# Force direct annotate on a target\n\nnpx opendevbrowser annotate --session-id &lt;session-id&gt; --transport direct --target-id &lt;target-id&gt;\n\n\n\n# Force relay annotate on a specific tab\n\nnpx opendevbrowser annotate --session-id &lt;session-id&gt; --transport relay --tab-id 123\n\n\n\n# With URL + context + debug metadata\n\nnpx opendevbrowser annotate --session-id &lt;session-id&gt; --url https://example.com \\\n\n  --screenshot-mode visible --context &quot;Review the hero layout&quot; --timeout-ms 90000 --debug\n\n</code></pre>\n<h2>Target commands (daemon required)</h2>\n<h3>Targets list</h3>\n<pre><code>\nnpx opendevbrowser targets-list --session-id &lt;session-id&gt;\n\nnpx opendevbrowser targets-list --session-id &lt;session-id&gt; --include-urls\n\n</code></pre>\n<h3>Target use</h3>\n<pre><code>\nnpx opendevbrowser target-use --session-id &lt;session-id&gt; --target-id &lt;target-id&gt;\n\n</code></pre>\n<h3>Target new</h3>\n<pre><code>\nnpx opendevbrowser target-new --session-id &lt;session-id&gt; --url https://example.com\n\n</code></pre>\n<h3>Target close</h3>\n<pre><code>\nnpx opendevbrowser target-close --session-id &lt;session-id&gt; --target-id &lt;target-id&gt;\n\n</code></pre>\n<h2>Page commands (daemon required)</h2>\n<h3>Page open</h3>\n<pre><code>\nnpx opendevbrowser page --session-id &lt;session-id&gt; --name main\n\nnpx opendevbrowser page --session-id &lt;session-id&gt; --name main --url https://example.com\n\n</code></pre>\n<h3>Pages list</h3>\n<pre><code>\nnpx opendevbrowser pages --session-id &lt;session-id&gt;\n\n</code></pre>\n<h3>Page close</h3>\n<pre><code>\nnpx opendevbrowser page-close --session-id &lt;session-id&gt; --name main\n\n</code></pre>\n<h2>DOM commands (daemon required)</h2>\n<h3>DOM HTML</h3>\n<pre><code>\nnpx opendevbrowser dom-html --session-id &lt;session-id&gt; --ref r12 --max-chars 8000\n\n</code></pre>\n<h3>DOM Text</h3>\n<pre><code>\nnpx opendevbrowser dom-text --session-id &lt;session-id&gt; --ref r12 --max-chars 8000\n\n</code></pre>\n<h3>DOM Attribute</h3>\n<pre><code>\nnpx opendevbrowser dom-attr --session-id &lt;session-id&gt; --ref r12 --attr aria-label\n\n</code></pre>\n<h3>DOM Value</h3>\n<pre><code>\nnpx opendevbrowser dom-value --session-id &lt;session-id&gt; --ref r12\n\n</code></pre>\n<h3>DOM State Checks</h3>\n<pre><code>\nnpx opendevbrowser dom-visible --session-id &lt;session-id&gt; --ref r12\n\nnpx opendevbrowser dom-enabled --session-id &lt;session-id&gt; --ref r12\n\nnpx opendevbrowser dom-checked --session-id &lt;session-id&gt; --ref r12\n\n</code></pre>\n<h2>Export commands (daemon required)</h2>\n<h3>Clone page</h3>\n<pre><code>\nnpx opendevbrowser clone-page --session-id &lt;session-id&gt;\n\n</code></pre>\n<h3>Clone component</h3>\n<pre><code>\nnpx opendevbrowser clone-component --session-id &lt;session-id&gt; --ref r12\n\n</code></pre>\n<h2>Devtools commands (daemon required)</h2>\n<h3>Performance metrics</h3>\n<pre><code>\nnpx opendevbrowser perf --session-id &lt;session-id&gt;\n\n</code></pre>\n<h3>Screenshot</h3>\n<pre><code>\nnpx opendevbrowser screenshot --session-id &lt;session-id&gt;\n\nnpx opendevbrowser screenshot --session-id &lt;session-id&gt; --path ./capture.png\n\nnpx opendevbrowser screenshot --session-id &lt;session-id&gt; --path ./capture.png --timeout-ms 60000\n\n</code></pre>\n<p>Notes:</p>\n<ul>\n<li><code>--timeout-ms</code> sets client-side daemon timeout for screenshot capture.</li>\n</ul>\n<h3>Console poll</h3>\n<pre><code>\nnpx opendevbrowser console-poll --session-id &lt;session-id&gt; --since-seq 0 --max 50\n\n</code></pre>\n<h3>Network poll</h3>\n<pre><code>\nnpx opendevbrowser network-poll --session-id &lt;session-id&gt; --since-seq 0 --max 50\n\n</code></pre>\n<h3>Debug trace snapshot</h3>\n<pre><code>\nnpx opendevbrowser debug-trace-snapshot --session-id &lt;session-id&gt;\n\nnpx opendevbrowser debug-trace-snapshot \\\n\n  --session-id &lt;session-id&gt; \\\n\n  --since-console-seq 100 \\\n\n  --since-network-seq 80 \\\n\n  --since-exception-seq 10 \\\n\n  --max 200 \\\n\n  --request-id req-debug-001\n\n</code></pre>\n<h2>Flags reference</h2>\n<h3>Global flags</h3>\n<div class=\"docs-table-wrap\"><table>\n<thead><tr>\n<th>Flag</th>\n<th>Short</th>\n<th>Description</th>\n</tr></thead>\n<tbody>\n<tr>\n<td><code>--global</code></td>\n<td><code>-g</code></td>\n<td>Install to <code>~/.config/opencode/opencode.json</code></td>\n</tr>\n<tr>\n<td><code>--local</code></td>\n<td><code>-l</code></td>\n<td>Install to <code>./opencode.json</code></td>\n</tr>\n<tr>\n<td><code>--update</code></td>\n<td><code>-u</code></td>\n<td>Clear cache to trigger reinstall</td>\n</tr>\n<tr>\n<td><code>--uninstall</code></td>\n<td></td>\n<td>Remove plugin from config</td>\n</tr>\n<tr>\n<td><code>--with-config</code></td>\n<td></td>\n<td>Also create <code>opendevbrowser.jsonc</code></td>\n</tr>\n<tr>\n<td><code>--full</code></td>\n<td><code>-f</code></td>\n<td>Create config and pre-extract extension assets</td>\n</tr>\n<tr>\n<td><code>--no-prompt</code></td>\n<td></td>\n<td>Skip prompts, use defaults</td>\n</tr>\n<tr>\n<td><code>--no-interactive</code></td>\n<td></td>\n<td>Alias of <code>--no-prompt</code></td>\n</tr>\n<tr>\n<td><code>--quiet</code></td>\n<td></td>\n<td>Suppress output</td>\n</tr>\n<tr>\n<td><code>--output-format</code></td>\n<td></td>\n<td><code>text</code>, <code>json</code>, or <code>stream-json</code></td>\n</tr>\n<tr>\n<td><code>--transport</code></td>\n<td></td>\n<td>Transport selector (<code>relay</code> or <code>native</code>) for transport-aware commands</td>\n</tr>\n<tr>\n<td><code>--daemon</code></td>\n<td></td>\n<td>Daemon status selector for <code>status</code></td>\n</tr>\n<tr>\n<td><code>--skills-global</code></td>\n<td></td>\n<td>Install skills to global OpenCode/Codex/ClaudeCode/AmpCLI directories (legacy <code>claude</code>/<code>amp</code> aliases also synced)</td>\n</tr>\n<tr>\n<td><code>--skills-local</code></td>\n<td></td>\n<td>Install skills to project-local OpenCode/Codex/ClaudeCode/AmpCLI directories (legacy <code>claude</code>/<code>amp</code> aliases also synced)</td>\n</tr>\n<tr>\n<td><code>--no-skills</code></td>\n<td></td>\n<td>Skip installing bundled skills</td>\n</tr>\n<tr>\n<td><code>--help</code></td>\n<td><code>-h</code></td>\n<td>Show usage information</td>\n</tr>\n<tr>\n<td><code>--version</code></td>\n<td><code>-v</code></td>\n<td>Show version number</td>\n</tr>\n</tbody>\n</table></div>\n<h3>Serve flags</h3>\n<div class=\"docs-table-wrap\"><table>\n<thead><tr>\n<th>Flag</th>\n<th>Description</th>\n</tr></thead>\n<tbody>\n<tr>\n<td><code>--port</code></td>\n<td>Override daemon port</td>\n</tr>\n<tr>\n<td><code>--token</code></td>\n<td>Override daemon token</td>\n</tr>\n<tr>\n<td><code>--stop</code></td>\n<td>Stop the daemon</td>\n</tr>\n</tbody>\n</table></div>\n<h3>Command-specific flags</h3>\n<p><strong>Session + connection</strong></p>\n<div class=\"docs-table-wrap\"><table>\n<thead><tr>\n<th>Flag</th>\n<th>Used by</th>\n<th>Description</th>\n</tr></thead>\n<tbody>\n<tr>\n<td><code>--session-id</code></td>\n<td>most daemon commands</td>\n<td>Active session id from <code>launch</code>/<code>connect</code></td>\n</tr>\n<tr>\n<td><code>--close-browser</code></td>\n<td><code>disconnect</code></td>\n<td>Close managed browser on disconnect</td>\n</tr>\n<tr>\n<td><code>--ws-endpoint</code></td>\n<td><code>connect</code></td>\n<td>Remote debugging websocket URL</td>\n</tr>\n<tr>\n<td><code>--host</code></td>\n<td><code>connect</code></td>\n<td>Host for CDP connection (<code>--cdp-port</code> required)</td>\n</tr>\n<tr>\n<td><code>--cdp-port</code></td>\n<td><code>connect</code></td>\n<td>CDP port for host-based connect</td>\n</tr>\n<tr>\n<td><code>--daemon</code></td>\n<td><code>status</code></td>\n<td>Force daemon status mode (mutually exclusive with <code>--session-id</code>)</td>\n</tr>\n<tr>\n<td><code>--no-extension</code></td>\n<td><code>launch</code></td>\n<td>Force managed mode (ignore extension)</td>\n</tr>\n<tr>\n<td><code>--extension-only</code></td>\n<td><code>launch</code></td>\n<td>Fail if extension not connected</td>\n</tr>\n<tr>\n<td><code>--extension-legacy</code></td>\n<td><code>launch</code>, <code>connect</code></td>\n<td>Use legacy extension relay (<code>/cdp</code>)</td>\n</tr>\n<tr>\n<td><code>--wait-for-extension</code></td>\n<td><code>launch</code></td>\n<td>Wait for extension handshake</td>\n</tr>\n<tr>\n<td><code>--wait-timeout-ms</code></td>\n<td><code>launch</code></td>\n<td>Max wait for extension handshake</td>\n</tr>\n<tr>\n<td><code>--cookies</code></td>\n<td><code>cookie-import</code></td>\n<td>Inline JSON array of cookie objects</td>\n</tr>\n<tr>\n<td><code>--cookies-file</code></td>\n<td><code>cookie-import</code></td>\n<td>Path to JSON file containing cookie objects</td>\n</tr>\n<tr>\n<td><code>--strict</code></td>\n<td><code>cookie-import</code></td>\n<td>Reject on invalid cookie entries (<code>true</code>/<code>false</code>)</td>\n</tr>\n<tr>\n<td><code>--request-id</code></td>\n<td><code>cookie-import</code>, <code>cookie-list</code>, <code>debug-trace-snapshot</code></td>\n<td>Optional request correlation id</td>\n</tr>\n<tr>\n<td><code>--expression</code></td>\n<td><code>macro-resolve</code></td>\n<td>Macro expression to resolve</td>\n</tr>\n<tr>\n<td><code>--default-provider</code></td>\n<td><code>macro-resolve</code></td>\n<td>Provider fallback for shorthand macros</td>\n</tr>\n<tr>\n<td><code>--include-catalog</code></td>\n<td><code>macro-resolve</code></td>\n<td>Include macro catalog in response</td>\n</tr>\n<tr>\n<td><code>--execute</code></td>\n<td><code>macro-resolve</code></td>\n<td>Execute the resolved provider action and include additive <code>meta.*</code> fields</td>\n</tr>\n<tr>\n<td><code>--timeout-ms</code></td>\n<td><code>macro-resolve</code></td>\n<td>Client-side daemon call timeout in ms</td>\n</tr>\n<tr>\n<td><code>--use-cookies</code></td>\n<td><code>research run</code>, <code>shopping run</code>, <code>product-video run</code></td>\n<td>Enable/disable provider cookie injection for the run (`true</td>\n<td>false<code>; bare flag means </code>true`)</td>\n</tr>\n<tr>\n<td><code>--cookie-policy-override</code></td>\n<td><code>research run</code>, <code>shopping run</code>, <code>product-video run</code></td>\n<td>Per-run provider cookie policy override (`off</td>\n<td>auto</td>\n<td>required`)</td>\n</tr>\n<tr>\n<td><code>--cookie-policy</code></td>\n<td><code>research run</code>, <code>shopping run</code>, <code>product-video run</code></td>\n<td>Alias of <code>--cookie-policy-override</code></td>\n</tr>\n</tbody>\n</table></div>\n<p><strong>Browser launch (launch/run)</strong></p>\n<div class=\"docs-table-wrap\"><table>\n<thead><tr>\n<th>Flag</th>\n<th>Used by</th>\n<th>Description</th>\n</tr></thead>\n<tbody>\n<tr>\n<td><code>--headless</code></td>\n<td><code>launch</code>, <code>run</code></td>\n<td>Run managed Chrome headless</td>\n</tr>\n<tr>\n<td><code>--profile</code></td>\n<td><code>launch</code>, <code>run</code></td>\n<td>Profile directory name</td>\n</tr>\n<tr>\n<td><code>--persist-profile</code></td>\n<td><code>launch</code>, <code>run</code></td>\n<td>Keep profile directory after run</td>\n</tr>\n<tr>\n<td><code>--chrome-path</code></td>\n<td><code>launch</code>, <code>run</code></td>\n<td>Explicit Chrome executable path</td>\n</tr>\n<tr>\n<td><code>--start-url</code></td>\n<td><code>launch</code>, <code>run</code></td>\n<td>Initial URL for the session</td>\n</tr>\n<tr>\n<td><code>--flag</code></td>\n<td><code>launch</code>, <code>run</code></td>\n<td>Additional Chrome flag (repeatable)</td>\n</tr>\n<tr>\n<td><code>--script</code></td>\n<td><code>run</code></td>\n<td>JSON script path</td>\n</tr>\n</tbody>\n</table></div>\n<p><strong>Navigation + waiting</strong></p>\n<div class=\"docs-table-wrap\"><table>\n<thead><tr>\n<th>Flag</th>\n<th>Used by</th>\n<th>Description</th>\n</tr></thead>\n<tbody>\n<tr>\n<td><code>--url</code></td>\n<td><code>goto</code>, <code>page</code>, <code>target-new</code>, <code>cookie-list</code></td>\n<td>URL to navigate/open or filter cookie listing</td>\n</tr>\n<tr>\n<td><code>--wait-until</code></td>\n<td><code>goto</code></td>\n<td>Load state (<code>load</code>, <code>domcontentloaded</code>, etc.)</td>\n</tr>\n<tr>\n<td><code>--timeout-ms</code></td>\n<td><code>goto</code>, <code>wait</code></td>\n<td>Timeout in ms</td>\n</tr>\n<tr>\n<td><code>--ref</code></td>\n<td><code>wait</code></td>\n<td>Element ref to wait for</td>\n</tr>\n<tr>\n<td><code>--state</code></td>\n<td><code>wait</code></td>\n<td>Element state (e.g. <code>visible</code>)</td>\n</tr>\n<tr>\n<td><code>--until</code></td>\n<td><code>wait</code></td>\n<td>Page load state</td>\n</tr>\n<tr>\n<td><code>--mode</code></td>\n<td><code>snapshot</code></td>\n<td>Snapshot mode (<code>outline</code> or <code>actionables</code>)</td>\n</tr>\n<tr>\n<td><code>--max-chars</code></td>\n<td><code>snapshot</code>, <code>dom-*</code></td>\n<td>Max characters returned</td>\n</tr>\n<tr>\n<td><code>--cursor</code></td>\n<td><code>snapshot</code></td>\n<td>Snapshot pagination cursor</td>\n</tr>\n</tbody>\n</table></div>\n<p><strong>Annotation</strong></p>\n<div class=\"docs-table-wrap\"><table>\n<thead><tr>\n<th>Flag</th>\n<th>Used by</th>\n<th>Description</th>\n</tr></thead>\n<tbody>\n<tr>\n<td><code>--transport</code></td>\n<td><code>annotate</code></td>\n<td><code>auto</code> (default), <code>direct</code>, or <code>relay</code></td>\n</tr>\n<tr>\n<td><code>--target-id</code></td>\n<td><code>annotate</code></td>\n<td>Target id for direct annotate</td>\n</tr>\n<tr>\n<td><code>--tab-id</code></td>\n<td><code>annotate</code></td>\n<td>Chrome tab id for relay annotate</td>\n</tr>\n<tr>\n<td><code>--screenshot-mode</code></td>\n<td><code>annotate</code></td>\n<td><code>visible</code> (default), <code>full</code>, or <code>none</code></td>\n</tr>\n<tr>\n<td><code>--context</code></td>\n<td><code>annotate</code></td>\n<td>Optional context text pre-filled in the UI</td>\n</tr>\n<tr>\n<td><code>--debug</code></td>\n<td><code>annotate</code></td>\n<td>Include debug metadata in the payload</td>\n</tr>\n<tr>\n<td><code>--timeout-ms</code></td>\n<td><code>annotate</code></td>\n<td>Annotation timeout in ms</td>\n</tr>\n</tbody>\n</table></div>\n<p><strong>RPC (internal)</strong></p>\n<div class=\"docs-table-wrap\"><table>\n<thead><tr>\n<th>Flag</th>\n<th>Used by</th>\n<th>Description</th>\n</tr></thead>\n<tbody>\n<tr>\n<td><code>--unsafe-internal</code></td>\n<td><code>rpc</code></td>\n<td>Required opt-in acknowledging unsafe/internal RPC execution (power-user only)</td>\n</tr>\n<tr>\n<td><code>--name</code></td>\n<td><code>rpc</code></td>\n<td>Daemon command name (for example <code>relay.status</code>)</td>\n</tr>\n<tr>\n<td><code>--params</code></td>\n<td><code>rpc</code></td>\n<td>Inline JSON object command params</td>\n</tr>\n<tr>\n<td><code>--params-file</code></td>\n<td><code>rpc</code></td>\n<td>Path to JSON object params file</td>\n</tr>\n<tr>\n<td><code>--timeout-ms</code></td>\n<td><code>rpc</code></td>\n<td>Client-side daemon call timeout in ms</td>\n</tr>\n</tbody>\n</table></div>\n<p><strong>Interaction</strong></p>\n<div class=\"docs-table-wrap\"><table>\n<thead><tr>\n<th>Flag</th>\n<th>Used by</th>\n<th>Description</th>\n</tr></thead>\n<tbody>\n<tr>\n<td><code>--ref</code></td>\n<td>element commands</td>\n<td>Element ref from <code>snapshot</code></td>\n</tr>\n<tr>\n<td><code>--text</code></td>\n<td><code>type</code></td>\n<td>Text to type</td>\n</tr>\n<tr>\n<td><code>--clear</code></td>\n<td><code>type</code></td>\n<td>Clear input before typing</td>\n</tr>\n<tr>\n<td><code>--submit</code></td>\n<td><code>type</code></td>\n<td>Submit after typing</td>\n</tr>\n<tr>\n<td><code>--values</code></td>\n<td><code>select</code></td>\n<td>Comma-separated values</td>\n</tr>\n<tr>\n<td><code>--dy</code></td>\n<td><code>scroll</code></td>\n<td>Scroll delta on Y axis</td>\n</tr>\n<tr>\n<td><code>--key</code></td>\n<td><code>press</code></td>\n<td>Keyboard key name (e.g. <code>Enter</code>)</td>\n</tr>\n</tbody>\n</table></div>\n<p><strong>Targets + pages</strong></p>\n<div class=\"docs-table-wrap\"><table>\n<thead><tr>\n<th>Flag</th>\n<th>Used by</th>\n<th>Description</th>\n</tr></thead>\n<tbody>\n<tr>\n<td><code>--target-id</code></td>\n<td><code>target-use</code>, <code>target-close</code></td>\n<td>Target id from <code>targets-list</code></td>\n</tr>\n<tr>\n<td><code>--include-urls</code></td>\n<td><code>targets-list</code></td>\n<td>Include URLs in target list output</td>\n</tr>\n<tr>\n<td><code>--name</code></td>\n<td><code>page</code>, <code>page-close</code></td>\n<td>Named page identifier</td>\n</tr>\n</tbody>\n</table></div>\n<p><strong>Devtools</strong></p>\n<div class=\"docs-table-wrap\"><table>\n<thead><tr>\n<th>Flag</th>\n<th>Used by</th>\n<th>Description</th>\n</tr></thead>\n<tbody>\n<tr>\n<td><code>--attr</code></td>\n<td><code>dom-attr</code></td>\n<td>Attribute name to read</td>\n</tr>\n<tr>\n<td><code>--path</code></td>\n<td><code>screenshot</code></td>\n<td>Output file path</td>\n</tr>\n<tr>\n<td><code>--timeout-ms</code></td>\n<td><code>screenshot</code></td>\n<td>Client-side daemon call timeout in ms</td>\n</tr>\n<tr>\n<td><code>--since-seq</code></td>\n<td><code>console-poll</code>, <code>network-poll</code></td>\n<td>Start sequence number</td>\n</tr>\n<tr>\n<td><code>--since-console-seq</code></td>\n<td><code>debug-trace-snapshot</code></td>\n<td>Resume cursor for console channel</td>\n</tr>\n<tr>\n<td><code>--since-network-seq</code></td>\n<td><code>debug-trace-snapshot</code></td>\n<td>Resume cursor for network channel</td>\n</tr>\n<tr>\n<td><code>--since-exception-seq</code></td>\n<td><code>debug-trace-snapshot</code></td>\n<td>Resume cursor for exception channel</td>\n</tr>\n<tr>\n<td><code>--max</code></td>\n<td><code>console-poll</code>, <code>network-poll</code>, <code>debug-trace-snapshot</code></td>\n<td>Max events to return per channel</td>\n</tr>\n</tbody>\n</table></div>\n<h2>CLI smoke test</h2>\n<p>Run the automated CLI coverage script (managed mode):</p>\n<pre><code>\nnpm run build\n\nnode scripts/cli-smoke-test.mjs\n\n</code></pre>\n<p>The script uses temporary config/cache directories and exercises all CLI commands, including the new interaction and DOM state checks.</p>\n<p>Validate extension mode separately with <code>launch</code> + <code>disconnect</code> while the extension is connected.</p>\n<h2>Live regression matrix</h2>\n<p>Run the full real-world matrix (managed + extension <code>/ops</code> + extension-legacy <code>/cdp</code> + <code>cdpConnect</code> + macro/research + annotate probes):</p>\n<pre><code>\nnpm run build\n\nnode scripts/live-regression-matrix.mjs\n\n</code></pre>\n<p>Behavior:</p>\n<ul>\n<li>Exits non-zero only for product regressions.</li>\n<li>Emits explicit extension readiness preflight diagnostics (<code>infra.extension.ready</code>) before extension-mode cases.</li>\n<li>Classifies upstream reachability failures (for example social/community dependencies) as <code>env_limited</code>.</li>\n<li>Classifies unattended annotation timeouts as <code>expected_timeout</code>.</li>\n<li>Captures mode-specific blocker evidence (<code>goto</code>/<code>wait</code> + <code>debug-trace-snapshot</code>) for managed, extension, and cdpConnect comparisons.</li>\n<li>Emits a JSON summary with per-step status for reproducible CI/manual verification.</li>\n</ul>\n<h2>Provider live matrix harness</h2>\n<p>Run the provider-depth live harness promoted from the <code>/tmp</code> validation script:</p>\n<pre><code>\nnpm run build\n\nnode scripts/provider-live-matrix.mjs --out /tmp/odb-provider-live-matrix.json\n\n</code></pre>\n<p>CI-safe smoke mode (reduced cases, deterministic gating checks, no long workflow probes by default):</p>\n<pre><code>\nnpm run build\n\nnode scripts/provider-live-matrix.mjs --smoke --out /tmp/odb-provider-live-matrix-smoke.json\n\n</code></pre>\n<p>Key checks included in full mode:</p>\n<ul>\n<li>Social issue probes: search/fetch coverage across platforms plus extension <code>/ops</code> timeout/retry behavior on YouTube/Instagram.</li>\n<li>Shopping issue probes: cross-provider query coverage with explicit timeout budget support.</li>\n<li>Browser issue probes: real-world navigation on YouTube/Instagram/Facebook across <code>managed</code>, <code>extension</code>, and <code>cdpConnect</code> with blocker metadata.</li>\n<li>Research-first defaults: auth-gated provider scenarios (<code>facebook</code>, <code>linkedin</code>, <code>shopping/costco</code>, <code>shopping/macys</code>), high-friction provider scenarios (<code>shopping/bestbuy</code>), and social post probes are skipped unless explicitly enabled.</li>\n</ul>\n<p>Key options:</p>\n<ul>\n<li><code>--use-global-env</code> reuse existing OPENCODE config/cache instead of isolated temp dirs.</li>\n<li><code>--skip-live-regression</code>, <code>--skip-browser-probes</code>, <code>--skip-workflows</code> for focused diagnostics.</li>\n<li><code>--include-live-regression</code>, <code>--include-browser-probes</code>, <code>--include-workflows</code> to re-enable those probes in <code>--smoke</code>.</li>\n<li><code>--include-auth-gated</code> enables auth-dependent provider scenarios (deferred by default).</li>\n<li><code>--include-high-friction</code> enables high-friction providers (deferred by default).</li>\n<li><code>--include-social-posts</code> enables social post scenarios (deferred by default).</li>\n</ul>\n<p>Run parity and skill-asset gates as part of release checks:</p>\n<pre><code>\nnpm run test -- tests/parity-matrix.test.ts\n\nnpm run test -- tests/providers-performance-gate.test.ts\n\n./skills/opendevbrowser-best-practices/scripts/validate-skill-assets.sh\n\n</code></pre>\n<p>Release gate source of truth: <code>docs/RELEASE_PARITY_CHECKLIST.md</code>.</p>\n<p>Benchmark fixture manifest: <code>docs/benchmarks/provider-fixtures.md</code>.</p>\n<h3>Latest validation (2026-02-15)</h3>\n<ul>\n<li><code>npm run lint</code> ✅</li>\n<li><code>npx tsc --noEmit</code> ✅</li>\n<li><code>npm run build</code> ✅</li>\n<li><code>npm run test</code> ✅</li>\n<li><code>node scripts/live-regression-matrix.mjs</code> ✅ (<code>pass: 21</code>, <code>env_limited: 1</code>, <code>expected_timeout: 2</code>, <code>fail: 0</code>)</li>\n<li>Current <code>env_limited</code> outcomes are setup/environment-related:</li>\n<li><code>mode.extension_legacy_cdp</code> (relay <code>/cdp</code> tab/session drift: <code>No tab with given id</code>)</li>\n<li>Current <code>expected_timeout</code> outcomes are interaction-related:</li>\n<li><code>feature.annotate.relay</code></li>\n<li><code>feature.annotate.direct</code></li>\n<li>Operator rollout, rollback triggers, and triage checklist are documented in <code>docs/TROUBLESHOOTING.md</code>.</li>\n</ul>\n<h2>Extension-only manual test (no OpenCode plugin)</h2>\n<p>Use this to validate the Chrome extension + relay without starting OpenCode.</p>\n<ol>\n<li>Ensure the daemon is running: <code>npx opendevbrowser serve</code> (manual). <code>npx opendevbrowser daemon install</code> configures auto-start for future logins but does not start it immediately.</li>\n<li>Build and load the extension: <code>npm run extension:build</code>, then Chrome → <code>chrome://extensions</code> → Developer mode → Load unpacked → <code>extension/</code>.</li>\n<li>Open a normal <code>http(s)</code> tab (not <code>chrome://</code> or extension pages).</li>\n<li>Open the extension popup, confirm Auto-connect + Auto-pair are ON, click Connect.</li>\n<li>Verify the popup shows <strong>Connected</strong> and <code>npx opendevbrowser status --daemon</code> reports <code>extensionConnected: true</code> and <code>extensionHandshakeComplete: true</code>.</li>\n<li>Optional session check: <code>npx opendevbrowser launch --extension-only --wait-for-extension</code>, then <code>npx opendevbrowser disconnect --session-id &lt;id&gt;</code>.</li>\n<li>Optional annotation check (OpenCode): call <code>opendevbrowser_annotate</code> and confirm screenshots are written to a temp folder.</li>\n</ol>\n<p>If it fails, run <code>npx opendevbrowser serve --stop</code> then <code>npx opendevbrowser serve</code>, and confirm site access includes <code>http://127.0.0.1/*</code> and <code>http://localhost/*</code> in the extension settings.</p>\n<h2>Configuration files</h2>\n<h3>OpenCode config</h3>\n<p>The CLI modifies <code>opencode.json</code> to register the plugin:</p>\n<pre><code>\n{\n\n  &quot;$schema&quot;: &quot;https://opencode.ai/config.json&quot;,\n\n  &quot;plugin&quot;: [&quot;opendevbrowser&quot;]\n\n}\n\n</code></pre>\n<p><strong>Locations:</strong></p>\n<ul>\n<li>Global: <code>~/.config/opencode/opencode.json</code></li>\n<li>Local: <code>./opencode.json</code></li>\n</ul>\n<h3>Plugin config (optional)</h3>\n<p>When using <code>--with-config</code>, a <code>opendevbrowser.jsonc</code> is created with documented defaults:</p>\n<pre><code>\n{\n\n  &quot;headless&quot;: false,\n\n  &quot;profile&quot;: &quot;default&quot;,\n\n  &quot;persistProfile&quot;: true,\n\n  &quot;snapshot&quot;: { &quot;maxChars&quot;: 16000, &quot;maxNodes&quot;: 1000 },\n\n  &quot;export&quot;: { &quot;maxNodes&quot;: 1000, &quot;inlineStyles&quot;: true },\n\n  &quot;devtools&quot;: { &quot;showFullUrls&quot;: false, &quot;showFullConsole&quot;: false },\n\n  &quot;security&quot;: {\n\n    &quot;allowRawCDP&quot;: false,\n\n    &quot;allowNonLocalCdp&quot;: false,\n\n    &quot;allowUnsafeExport&quot;: false\n\n  },\n\n  &quot;skillPaths&quot;: [],\n\n  &quot;skills&quot;: {\n\n    &quot;nudge&quot;: {\n\n      &quot;enabled&quot;: true,\n\n      &quot;keywords&quot;: [&quot;quick start&quot;, &quot;getting started&quot;, &quot;launch&quot;, &quot;connect&quot;, &quot;setup&quot;],\n\n      &quot;maxAgeMs&quot;: 60000\n\n    }\n\n  },\n\n  &quot;continuity&quot;: {\n\n    &quot;enabled&quot;: true,\n\n    &quot;filePath&quot;: &quot;opendevbrowser_continuity.md&quot;,\n\n    &quot;nudge&quot;: {\n\n      &quot;enabled&quot;: true,\n\n      &quot;keywords&quot;: [&quot;plan&quot;, &quot;multi-step&quot;, &quot;long-running&quot;, &quot;refactor&quot;, &quot;migration&quot;, &quot;rollout&quot;, &quot;continue&quot;],\n\n      &quot;maxAgeMs&quot;: 60000\n\n    }\n\n  },\n\n  &quot;providers&quot;: {\n\n    &quot;antiBotPolicy&quot;: {\n\n      &quot;enabled&quot;: true,\n\n      &quot;cooldownMs&quot;: 30000,\n\n      &quot;maxChallengeRetries&quot;: 1,\n\n      &quot;allowBrowserEscalation&quot;: true\n\n      // &quot;proxyHint&quot;: &quot;residential_pool_a&quot;,\n\n      // &quot;sessionHint&quot;: &quot;warm_profile&quot;\n\n    },\n\n    &quot;transcript&quot;: {\n\n      &quot;modeDefault&quot;: &quot;auto&quot;,\n\n      &quot;strategyOrder&quot;: [&quot;youtubei&quot;, &quot;native_caption_parse&quot;, &quot;ytdlp_audio_asr&quot;, &quot;apify&quot;],\n\n      &quot;enableYtdlp&quot;: false,\n\n      &quot;enableAsr&quot;: false,\n\n      &quot;enableYtdlpAudioAsr&quot;: true,\n\n      &quot;enableApify&quot;: true,\n\n      &quot;apifyActorId&quot;: &quot;streamers/youtube-scraper&quot;,\n\n      &quot;enableBrowserFallback&quot;: true,\n\n      &quot;ytdlpTimeoutMs&quot;: 10000\n\n    }\n\n  },\n\n  &quot;daemonPort&quot;: 8788,\n\n  &quot;daemonToken&quot;: &quot;auto-generated-on-first-run&quot;,\n\n  &quot;flags&quot;: [],\n\n  &quot;checkForUpdates&quot;: false\n\n}\n\n</code></pre>\n<p>The optional <code>skills.nudge</code> section controls the small one-time prompt hint that encourages early <code>skill(...)</code> usage on skill-relevant tasks. The optional <code>continuity</code> section controls the long-running task nudge and the ledger file path.</p>\n<p>Fingerprint runtime defaults are Tier 1/2/3 enabled, with Tier 2 and Tier 3 driven by continuous signals (debug trace remains readout/reporting).</p>\n<p>Provider runtime anti-bot/transcript controls default to an exhaustive YouTube fallback chain:</p>\n<ul>\n<li>Transcript mode semantics: <code>auto | web | no-auto | yt-dlp | apify</code>.</li>\n<li>Request filter precedence is <code>filters.youtube_mode &gt; providers.transcript.modeDefault &gt; auto</code>.</li>\n<li>No CLI mode flag is introduced in this phase; mode is configured in <code>providers.transcript.modeDefault</code> or per-request <code>youtube_mode</code> filter.</li>\n<li>Auto mode fallback chain is <code>youtubei -&gt; native_caption_parse -&gt; ytdlp_audio_asr -&gt; apify</code>, with browser-assisted fallback attempted last when browser escalation is available.</li>\n<li><code>yt-dlp</code> audio transcription requires <code>providers.transcript.enableYtdlpAudioAsr=true</code>.</li>\n<li>Apify requires <code>providers.transcript.enableApify=true</code>, a valid <code>APIFY_TOKEN</code>, and legal checklist approval for <code>apify</code>.</li>\n<li>Browser-assisted fallback requires <code>providers.transcript.enableBrowserFallback=true</code> and <code>providers.antiBotPolicy.allowBrowserEscalation=true</code>.</li>\n</ul>\n<p>Provider workflow and execution outputs now include normalized transcript/anti-bot telemetry:</p>\n<ul>\n<li>Failure reason codes: <code>meta.metrics.reason_code_distribution</code> (legacy), <code>meta.metrics.reasonCodeDistribution</code> (camelCase alias), and <code>reasonCode</code> on provider failures.</li>\n<li>Transcript fallback diagnostics: <code>meta.metrics.transcript_strategy_failures</code> (legacy) and <code>meta.metrics.transcriptStrategyFailures</code> (camelCase alias).</li>\n<li>Strategy-detail diagnostics: <code>meta.metrics.transcript_strategy_detail_failures</code>/<code>meta.metrics.transcriptStrategyDetailFailures</code> and <code>meta.metrics.transcript_strategy_detail_distribution</code>/<code>meta.metrics.transcriptStrategyDetailDistribution</code>.</li>\n<li>Durability/pressure dimensions: <code>meta.metrics.transcriptDurability</code> and <code>meta.metrics.antiBotPressure</code> (snake_case aliases are also emitted).</li>\n<li>YouTube fetch metadata: <code>transcript_strategy</code> (legacy bucket), <code>transcript_strategy_detail</code> (exact strategy), <code>attempt_chain</code>, and failure <code>reasonCode</code> when transcript retrieval is unavailable.</li>\n</ul>\n<p>Provider reliability criteria (resolver/browser fallback):</p>\n<ul>\n<li><code>npm run test -- tests/providers-performance-gate.test.ts</code> must pass.</li>\n<li>Latest observation window must satisfy <code>meta.metrics.transcriptDurability.attempted &gt;= 10</code> and <code>meta.metrics.transcriptDurability.success_rate &gt;= 0.85</code>.</li>\n<li>Latest observation window must satisfy <code>meta.metrics.antiBotPressure.anti_bot_failure_ratio &lt;= 0.15</code>.</li>\n<li>Trigger remediation immediately if either condition fails in two consecutive windows.</li>\n</ul>",
      "codeSample": "npx opendevbrowser product-video run --help"
    },
    "skills/opendevbrowser-best-practices": {
      "category": "skills",
      "slug": "opendevbrowser-best-practices",
      "title": "opendevbrowser-best-practices",
      "summary": "This is the primary battery pack for OpenDevBrowser operations.",
      "sourcePath": "skills/opendevbrowser-best-practices/SKILL.md",
      "editUrl": "https://github.com/freshtechbro/opendevbrowser/edit/main/skills/opendevbrowser-best-practices/SKILL.md",
      "contentHtml": "<h1>OpenDevBrowser Best Practices</h1>\n<p>This is the primary battery pack for OpenDevBrowser operations.</p>\n<p>Use this skill when you need:</p>\n<ul>\n<li>provider-oriented workflows (<code>web</code>, <code>community</code>, <code>social</code>),</li>\n<li>script-first runbooks,</li>\n<li>parity across <code>managed</code>, <code>extension</code>, <code>cdpConnect</code>,</li>\n<li>diagnostics for QA/debug (<code>console</code>, <code>network</code>, trace context),</li>\n<li>safe write flows with explicit policy notice.</li>\n</ul>\n<h2>Pack Contents</h2>\n<ul>\n<li><code>artifacts/provider-workflows.md</code> — canonical provider execution flows.</li>\n<li><code>artifacts/parity-gates.md</code> — mode/surface parity matrix and acceptance gates.</li>\n<li><code>artifacts/debug-trace-playbook.md</code> — diagnostics workflow and trace bundle model.</li>\n<li><code>artifacts/fingerprint-tiers.md</code> — hardening tiers and when to use each.</li>\n<li><code>artifacts/macro-workflows.md</code> — macro design and expansion standards.</li>\n<li><code>artifacts/browser-agent-known-issues-matrix.md</code> — known browser-agent failure modes mapped to required controls.</li>\n<li><code>artifacts/command-channel-reference.md</code> — CLI/tool/<code>/ops</code>/<code>/cdp</code> surface map plus cross-agent skill-sync targets.</li>\n<li><code>assets/templates/mode-flag-matrix.json</code> — mode + flag verification template.</li>\n<li><code>assets/templates/ops-request-envelope.json</code> — <code>/ops</code> request envelope template.</li>\n<li><code>assets/templates/cdp-forward-envelope.json</code> — <code>/cdp</code> relay envelope template.</li>\n<li><code>assets/templates/robustness-checklist.json</code> — shared issue-status checklist for workflow robustness audits.</li>\n<li><code>assets/templates/surface-audit-checklist.json</code> — docs/surface audit checklist template.</li>\n<li><code>scripts/odb-workflow.sh</code> — prints codified command sequences by workflow.</li>\n<li><code>scripts/run-robustness-audit.sh</code> — validates workflow skill coverage against known issue IDs.</li>\n<li><code>scripts/validate-skill-assets.sh</code> — validates required artifacts/templates.</li>\n</ul>\n<h2>Fast Start</h2>\n<ol>\n<li>Validate the skill pack:</li>\n</ol>\n<pre><code>\n./skills/opendevbrowser-best-practices/scripts/validate-skill-assets.sh\n\n</code></pre>\n<ol>\n<li>Pick a workflow:</li>\n</ol>\n<pre><code>\n./skills/opendevbrowser-best-practices/scripts/odb-workflow.sh provider-crawl\n\n</code></pre>\n<ol>\n<li>Execute the printed sequence with session-specific values.</li>\n<li>Surface full controls directly from CLI help when auditing runtime accessibility:</li>\n</ol>\n<pre><code>\nnpx opendevbrowser --help\n\n</code></pre>\n<ol>\n<li>Run robustness coverage checks across workflow skills:</li>\n</ol>\n<pre><code>\n./skills/opendevbrowser-best-practices/scripts/run-robustness-audit.sh\n\n</code></pre>\n<h2>Agent Sync Targets</h2>\n<p>Skill-pack installation and discovery are synchronized for:</p>\n<ul>\n<li><code>opencode</code> (<code>~/.config/opencode/skill</code>, project <code>./.opencode/skill</code>)</li>\n<li><code>codex</code> (<code>$CODEX_HOME/skills</code> fallback <code>~/.codex/skills</code>, project <code>./.codex/skills</code>)</li>\n<li><code>claudecode</code> (<code>$CLAUDECODE_HOME/skills</code> or <code>$CLAUDE_HOME/skills</code> fallback <code>~/.claude/skills</code>, project <code>./.claude/skills</code>)</li>\n<li><code>ampcli</code> (<code>$AMPCLI_HOME/skills</code> or <code>$AMP_CLI_HOME/skills</code> or <code>$AMP_HOME/skills</code> fallback <code>~/.amp/skills</code>, project <code>./.amp/skills</code>)</li>\n</ul>\n<p>Legacy compatibility aliases <code>claude</code> and <code>amp</code> are preserved in installer target metadata.</p>\n<h2>Required Operating Rules</h2>\n<ul>\n<li>Prefer refs from <code>opendevbrowser_snapshot</code> over raw selectors.</li>\n<li>Use one action per decision loop: snapshot -&gt; action -&gt; snapshot.</li>\n<li>Keep a single correlation context (<code>requestId</code>, <code>sessionId</code>) across a run.</li>\n<li>Run the same workflow shape across all three modes before claiming parity.</li>\n<li>Default to read/research workflows. Social posting probes remain disabled unless explicitly requested via matrix opt-in (<code>--include-social-posts</code>).</li>\n<li>Apply rate-limit/backoff discipline (<code>Retry-After</code> aware) whenever 429 pressure appears.</li>\n<li>Re-check extension readiness on resume when a run crosses idle windows.</li>\n</ul>\n<h2>Parallel Operations (Reliable As-Is)</h2>\n<ul>\n<li>Safe parallelism today is <code>session-per-worker</code> (one session per page/tab command stream).</li>\n<li>Keep each session single-writer for target/page actions; run commands serially inside that session.</li>\n<li>Do not run independent concurrent streams that alternate <code>target-use</code> within one session.</li>\n<li>Use default extension <code>/ops</code> for relay-backed concurrency; use <code>/cdp</code> only for legacy compatibility paths.</li>\n<li>For managed parallel runs with persisted profiles, use unique profile paths per session (or disable persistence) to avoid profile lock collisions.</li>\n<li>Treat extension headless attempts (<code>--extension-only --headless</code>) as expected <code>unsupported_mode</code>; route headless workloads through managed/cdpConnect instead.</li>\n<li>Before extension-mode runs, preflight <code>npx opendevbrowser status --daemon</code> and require <code>extensionConnected=true</code> plus <code>extensionHandshakeComplete=true</code>.</li>\n</ul>\n<p>Operational references:</p>\n<ul>\n<li><code>artifacts/provider-workflows.md</code> (see Workflow E)</li>\n<li><code>scripts/odb-workflow.sh parallel-multipage-safe</code></li>\n<li><code>docs/CLI.md</code> (concurrency semantics)</li>\n<li><code>docs/SURFACE_REFERENCE.md</code> (transport and policy constraints)</li>\n<li><code>docs/TROUBLESHOOTING.md</code> (parallel crosstalk and profile-lock remediation)</li>\n</ul>\n<h2>Known-Issue Robustness Baseline</h2>\n<ul>\n<li>Source matrix: <code>artifacts/browser-agent-known-issues-matrix.md</code></li>\n<li>Reusable checklist: <code>assets/templates/robustness-checklist.json</code></li>\n<li>Coverage validator: <code>scripts/run-robustness-audit.sh</code></li>\n</ul>\n<p>Use issue IDs from the matrix in each workflow skill (<code>ISSUE-01</code> ... <code>ISSUE-12</code>) so robustness checks stay machine-verifiable and DRY.</p>\n<h2>Provider Workflows (Codified)</h2>\n<h3>Provider Search Workflow</h3>\n<p>Goal: deterministic query + extraction from one provider.</p>\n<pre><code>\nopendevbrowser_launch noExtension=true\n\nopendevbrowser_goto sessionId=&quot;&lt;session-id&gt;&quot; url=&quot;&lt;provider-search-url&gt;&quot;\n\nopendevbrowser_wait sessionId=&quot;&lt;session-id&gt;&quot; until=&quot;networkidle&quot;\n\nopendevbrowser_snapshot sessionId=&quot;&lt;session-id&gt;&quot; format=&quot;actionables&quot;\n\n# extract targeted results using refs\n\nopendevbrowser_network_poll sessionId=&quot;&lt;session-id&gt;&quot; max=50\n\n</code></pre>\n<h3>Provider Crawl Workflow</h3>\n<p>Goal: multipage fetch + extraction with bounded depth.</p>\n<pre><code>\nopendevbrowser_launch noExtension=true\n\nopendevbrowser_goto sessionId=&quot;&lt;session-id&gt;&quot; url=&quot;&lt;seed-url&gt;&quot;\n\nopendevbrowser_wait sessionId=&quot;&lt;session-id&gt;&quot; until=&quot;networkidle&quot;\n\nopendevbrowser_snapshot sessionId=&quot;&lt;session-id&gt;&quot; format=&quot;actionables&quot;\n\n# capture links/data, enqueue next pages in host logic\n\nopendevbrowser_scroll sessionId=&quot;&lt;session-id&gt;&quot; dy=1000\n\nopendevbrowser_wait sessionId=&quot;&lt;session-id&gt;&quot; until=&quot;networkidle&quot;\n\n</code></pre>\n<h3>QA Debug Workflow</h3>\n<p>Goal: isolate frontend regressions quickly.</p>\n<pre><code>\nopendevbrowser_snapshot sessionId=&quot;&lt;session-id&gt;&quot; format=&quot;outline&quot;\n\nopendevbrowser_console_poll sessionId=&quot;&lt;session-id&gt;&quot; max=100\n\nopendevbrowser_network_poll sessionId=&quot;&lt;session-id&gt;&quot; max=100\n\nopendevbrowser_screenshot sessionId=&quot;&lt;session-id&gt;&quot;\n\n</code></pre>\n<h3>Read-Only Social Validation Workflow</h3>\n<p>Goal: validate authenticated read/search capability without posting.</p>\n<ol>\n<li>Connect and verify extension readiness (<code>extensionConnected</code> + handshake).</li>\n<li>Navigate/search target social surface.</li>\n<li>Capture <code>debug-trace-snapshot</code> and <code>network-poll</code> evidence.</li>\n<li>Record blocker/auth status only (no write action).</li>\n</ol>\n<h2>Workflow Router Script</h2>\n<p>Use the router script to avoid retyping flows:</p>\n<pre><code>\n./skills/opendevbrowser-best-practices/scripts/odb-workflow.sh provider-search\n\n./skills/opendevbrowser-best-practices/scripts/odb-workflow.sh provider-crawl\n\n./skills/opendevbrowser-best-practices/scripts/odb-workflow.sh qa-debug\n\n./skills/opendevbrowser-best-practices/scripts/odb-workflow.sh social-readonly-check\n\n./skills/opendevbrowser-best-practices/scripts/odb-workflow.sh parity-check\n\n./skills/opendevbrowser-best-practices/scripts/odb-workflow.sh surface-audit\n\n./skills/opendevbrowser-best-practices/scripts/odb-workflow.sh ops-channel-check\n\n./skills/opendevbrowser-best-practices/scripts/odb-workflow.sh cdp-channel-check\n\n./skills/opendevbrowser-best-practices/scripts/odb-workflow.sh mode-flag-matrix\n\n./skills/opendevbrowser-best-practices/scripts/odb-workflow.sh robustness-audit\n\n</code></pre>\n<h2>Modes and Surface Parity</h2>\n<p>Always run acceptance on:</p>\n<ul>\n<li>Modes: <code>managed</code>, <code>extension</code>, <code>cdpConnect</code></li>\n<li>Surfaces: tool API, CLI, daemon RPC</li>\n</ul>\n<p>Reference: <code>artifacts/parity-gates.md</code></p>\n<p>Parity gate test:</p>\n<pre><code>\nnpm run test -- tests/parity-matrix.test.ts\n\n</code></pre>\n<p>Real-world provider+mode scenario harness (soak replacement):</p>\n<pre><code>\nnpm run build\n\nnode scripts/provider-live-matrix.mjs --use-global-env --skip-live-regression --out artifacts/provider-live-realworld.json\n\n</code></pre>\n<p>Surface inventory source of truth:</p>\n<ul>\n<li><code>docs/SURFACE_REFERENCE.md</code> (55 CLI commands, 48 tools, 38 <code>/ops</code> commands, <code>/cdp</code> envelope contracts)</li>\n<li><code>artifacts/command-channel-reference.md</code> (skill-pack operational digest)</li>\n</ul>\n<h2>Diagnostics and Traceability</h2>\n<p>Current diagnostics tools:</p>\n<ul>\n<li><code>opendevbrowser_console_poll</code></li>\n<li><code>opendevbrowser_network_poll</code></li>\n<li><code>opendevbrowser_debug_trace_snapshot</code> (combined page + console + network + exception channels)</li>\n</ul>\n<p>Reference: <code>artifacts/debug-trace-playbook.md</code></p>\n<h2>Fingerprint Hardening</h2>\n<p>Apply the minimum tier that meets reliability goals.</p>\n<ul>\n<li>Tier 0: baseline deterministic automation.</li>\n<li>Tier 1: coherence profile (default recommended).</li>\n<li>Tier 2: runtime hardening.</li>\n<li>Tier 3: adaptive managed hardening (optional).</li>\n</ul>\n<p>Reference: <code>artifacts/fingerprint-tiers.md</code></p>\n<h2>Macro Guidance</h2>\n<p>Use macros as normalized entrypoints for provider workflows.</p>\n<ul>\n<li>Keep macro definitions declarative and typed.</li>\n<li>Expand macros to canonical provider queries.</li>\n<li>Emit provenance metadata (<code>macro</code>, <code>resolvedQuery</code>, <code>provider</code>).</li>\n</ul>\n<p>Reference: <code>artifacts/macro-workflows.md</code></p>",
      "codeSample": "# Skill source\ncat skills/opendevbrowser-best-practices/SKILL.md"
    },
    "skills/opendevbrowser-continuity-ledger": {
      "category": "skills",
      "slug": "opendevbrowser-continuity-ledger",
      "title": "opendevbrowser-continuity-ledger",
      "summary": "Use this guide to maintain compaction-safe project state in CONTINUITY.md.",
      "sourcePath": "skills/opendevbrowser-continuity-ledger/SKILL.md",
      "editUrl": "https://github.com/freshtechbro/opendevbrowser/edit/main/skills/opendevbrowser-continuity-ledger/SKILL.md",
      "contentHtml": "<h1>OpenDevBrowser Continuity Ledger</h1>\n<p>Use this guide to maintain compaction-safe project state in <code>CONTINUITY.md</code>.</p>\n<h2>When to Use This Skill</h2>\n<p>Use this skill when any of these are true:</p>\n<ul>\n<li>Work is multi-step or long-running.</li>\n<li>Context compaction or session handoff is likely.</li>\n<li>Multiple agents are coordinating the same task.</li>\n</ul>\n<p>Start with <code>opendevbrowser-best-practices</code> quick start for execution. Switch here once continuity tracking is required.</p>\n<h2>Ownership Rules</h2>\n<p>Apply these rules exactly:</p>\n<ul>\n<li>Allow only the main orchestrator agent to edit <code>CONTINUITY.md</code>.</li>\n<li>Instruct sub-agents to never edit <code>CONTINUITY.md</code>.</li>\n<li>Require sub-agents to append their outcomes to <code>sub_continuity.md</code>.</li>\n<li>If <code>CONTINUITY.md</code> is modified incorrectly by another agent, restore it immediately and continue.</li>\n</ul>\n<h2>Start-of-Turn Protocol</h2>\n<p>Run this sequence at the beginning of each turn:</p>\n<ol>\n<li>Read <code>CONTINUITY.md</code>.</li>\n<li>Read <code>sub_continuity.md</code>.</li>\n<li>Update <code>CONTINUITY.md</code> to reflect the current goal, constraints, decisions, and execution state.</li>\n<li>Proceed with implementation.</li>\n</ol>\n<p>If recall is incomplete, rebuild from visible context, mark gaps <code>UNCONFIRMED</code>, then continue.</p>\n<h2>Required Ledger Template</h2>\n<p>Maintain these headings and sections:</p>\n<pre><code>\nGoal (incl. success criteria):\n\n- Constraints/Assumptions:\n\n- Key decisions:\n\n- State:\n\n  - Done:\n\n  - Now:\n\n  - Next: at least 4 next tasks/subtasks each with a brief description. must be detailed with a clear action item and expected outcome and files to be impacted\n\n- Open questions (UNCONFIRMED if needed):\n\n  - When you have open questions, do your research in the codebase (and on the internet for best practices) to understand the existing patterns and constraints. Choose answers that are consistent with the existing patterns and constraints and best-practice and research all synchronized into logical recommendations. You must research codebase + external sources first, state the recommended option with brief rationale, and explicitly list any items that still require user input.\n\n- Working set (files/ids/commands):\n\n- Key learnings: what worked; what didn&#39;t work, best approach identified for next time\n\n</code></pre>\n<h2>Update Triggers</h2>\n<p>Update <code>CONTINUITY.md</code> whenever one of these changes:</p>\n<ul>\n<li>Goal or success criteria</li>\n<li>Constraints or assumptions</li>\n<li>Key decisions</li>\n<li>Progress state (<code>Done</code>, <code>Now</code>, <code>Next</code>)</li>\n<li>Important command/tool outcomes</li>\n</ul>\n<p>Keep entries factual and concise. Avoid transcript-style logging.</p>\n<h2>Handling Open Questions</h2>\n<p>When uncertainty exists:</p>\n<ol>\n<li>Research codebase patterns first.</li>\n<li>Research external best practices where relevant.</li>\n<li>Recommend a preferred option with rationale.</li>\n<li>List only unresolved user-input decisions.</li>\n<li>Mark unknown facts as <code>UNCONFIRMED</code>.</li>\n</ol>\n<h2>Reply Pattern</h2>\n<p>Start response messages with a short ledger snapshot:</p>\n<ul>\n<li>Goal</li>\n<li>Now/Next</li>\n<li>Open questions + recommended option</li>\n</ul>\n<p>Print the full ledger only when it materially changes or when requested.</p>",
      "codeSample": "# Skill source\ncat skills/opendevbrowser-continuity-ledger/SKILL.md"
    },
    "skills/opendevbrowser-data-extraction": {
      "category": "skills",
      "slug": "opendevbrowser-data-extraction",
      "title": "opendevbrowser-data-extraction",
      "summary": "Use this skill to extract structured, auditable datasets from dynamic pages with compliance-aware workflows.",
      "sourcePath": "skills/opendevbrowser-data-extraction/SKILL.md",
      "editUrl": "https://github.com/freshtechbro/opendevbrowser/edit/main/skills/opendevbrowser-data-extraction/SKILL.md",
      "contentHtml": "<h1>Data Extraction Skill</h1>\n<p>Use this skill to extract structured, auditable datasets from dynamic pages with compliance-aware workflows.</p>\n<h2>Pack Contents</h2>\n<ul>\n<li><code>artifacts/extraction-workflows.md</code></li>\n<li><code>assets/templates/extraction-schema.json</code></li>\n<li><code>assets/templates/pagination-state.json</code></li>\n<li><code>assets/templates/quality-gates.json</code></li>\n<li><code>assets/templates/compliance-checklist.md</code></li>\n<li><code>scripts/run-extraction-workflow.sh</code></li>\n<li><code>scripts/validate-skill-assets.sh</code></li>\n<li>Shared robustness matrix: <code>../opendevbrowser-best-practices/artifacts/browser-agent-known-issues-matrix.md</code></li>\n</ul>\n<h2>Fast Start</h2>\n<pre><code>\n./skills/opendevbrowser-data-extraction/scripts/validate-skill-assets.sh\n\n./skills/opendevbrowser-data-extraction/scripts/run-extraction-workflow.sh list\n\n./skills/opendevbrowser-data-extraction/scripts/run-extraction-workflow.sh pagination\n\n./skills/opendevbrowser-data-extraction/scripts/run-extraction-workflow.sh infinite-scroll\n\n</code></pre>\n<h2>Core Rules</h2>\n<ul>\n<li>Define schema before extraction.</li>\n<li>Track provenance for each record (<code>source_url</code>, <code>provider</code>, <code>captured_at</code>, <code>page</code>).</li>\n<li>Prefer embedded structured data (JSON-LD/microdata) where available.</li>\n<li>Stop on sustained anti-bot pressure (repeated 403/429/challenge loops).</li>\n<li>Honor <code>Retry-After</code> and preserve checkpoint state before retrying pagination.</li>\n</ul>\n<h2>Parallel Multitab Alignment</h2>\n<ul>\n<li>Apply shared concurrency policy from <code>../opendevbrowser-best-practices/SKILL.md</code> (&quot;Parallel Operations&quot;).</li>\n<li>Run extraction acceptance on <code>managed</code>, <code>extension</code>, and <code>cdpConnect</code> before claiming mode parity.</li>\n<li>Keep one session per worker; avoid interleaving <code>target-use</code> streams inside a single session.</li>\n</ul>\n<h2>Robustness Coverage (Known-Issue Matrix)</h2>\n<p>Matrix source: <code>../opendevbrowser-best-practices/artifacts/browser-agent-known-issues-matrix.md</code></p>\n<ul>\n<li><code>ISSUE-01</code>: stale refs after dynamic content updates</li>\n<li><code>ISSUE-06</code>: 429/backoff and retry budgeting</li>\n<li><code>ISSUE-08</code>: blocked/restricted origins and policy checks</li>\n<li><code>ISSUE-09</code>: pagination drift, duplicate accumulation, terminal detection</li>\n<li><code>ISSUE-10</code>: locale/currency parsing consistency</li>\n</ul>\n<h2>Extraction Planning</h2>\n<ol>\n<li>Define required fields and null policy.</li>\n<li>Snapshot and map refs to schema.</li>\n<li>Choose pagination strategy.</li>\n<li>Apply quality gates each page.</li>\n</ol>\n<pre><code>\nopendevbrowser_snapshot sessionId=&quot;&lt;session-id&gt;&quot; format=&quot;actionables&quot;\n\n</code></pre>\n<h2>Structured Data First</h2>\n<p>Attempt extraction in this order:</p>\n<ol>\n<li>JSON-LD product/article blocks</li>\n<li>semantic table/list/card DOM</li>\n<li>fallback text parsing</li>\n</ol>\n<pre><code>\nopendevbrowser_dom_get_text sessionId=&quot;&lt;session-id&gt;&quot; ref=&quot;&lt;json-ld-ref&gt;&quot;\n\nopendevbrowser_dom_get_html sessionId=&quot;&lt;session-id&gt;&quot; ref=&quot;&lt;table-ref&gt;&quot;\n\n</code></pre>\n<h2>Pagination Patterns</h2>\n<h3>Numbered/Next pagination</h3>\n<pre><code>\nopendevbrowser_click sessionId=&quot;&lt;session-id&gt;&quot; ref=&quot;&lt;next-ref&gt;&quot;\n\nopendevbrowser_wait sessionId=&quot;&lt;session-id&gt;&quot; until=&quot;networkidle&quot;\n\nopendevbrowser_snapshot sessionId=&quot;&lt;session-id&gt;&quot; format=&quot;actionables&quot;\n\n</code></pre>\n<h3>Infinite scroll</h3>\n<pre><code>\nopendevbrowser_scroll sessionId=&quot;&lt;session-id&gt;&quot; dy=1000\n\nopendevbrowser_wait sessionId=&quot;&lt;session-id&gt;&quot; until=&quot;networkidle&quot;\n\n</code></pre>\n<h3>Load more</h3>\n<pre><code>\nopendevbrowser_click sessionId=&quot;&lt;session-id&gt;&quot; ref=&quot;&lt;load-more-ref&gt;&quot;\n\nopendevbrowser_wait sessionId=&quot;&lt;session-id&gt;&quot; until=&quot;networkidle&quot;\n\n</code></pre>\n<h2>Quality Gates</h2>\n<p>Apply per page:</p>\n<ul>\n<li>dedupe by stable key (URL or canonical ID)</li>\n<li>null-rate check for required fields</li>\n<li>count delta check (new records must increase)</li>\n<li>consistency check for currency/units</li>\n<li>max consecutive challenge/429 loops before stop</li>\n</ul>\n<p>Use <code>assets/templates/quality-gates.json</code>.</p>\n<h2>Compliance and Safety</h2>\n<ul>\n<li>Respect robots and site terms.</li>\n<li>Use pacing; do not flood endpoints.</li>\n<li>Treat robots as policy guidance, not auth.</li>\n<li>Stop or back off on repeated 429/403 and challenges.</li>\n</ul>\n<h2>References</h2>\n<ul>\n<li>RFC 9309 (robots protocol): https://www.rfc-editor.org/rfc/rfc9309</li>\n<li>Google robots docs: https://developers.google.com/search/docs/crawling-indexing/robots/robots_txt</li>\n<li>Schema.org Offer: https://schema.org/Offer</li>\n<li>Google Product structured data: https://developers.google.com/search/docs/appearance/structured-data/product-snippet</li>\n<li>Playwright best practices: https://playwright.dev/docs/best-practices</li>\n</ul>",
      "codeSample": "# Skill source\ncat skills/opendevbrowser-data-extraction/SKILL.md"
    },
    "skills/opendevbrowser-form-testing": {
      "category": "skills",
      "slug": "opendevbrowser-form-testing",
      "title": "opendevbrowser-form-testing",
      "summary": "Use this skill for robust form automation across dynamic, multi-step, challenge-protected, and accessibility-critical flows.",
      "sourcePath": "skills/opendevbrowser-form-testing/SKILL.md",
      "editUrl": "https://github.com/freshtechbro/opendevbrowser/edit/main/skills/opendevbrowser-form-testing/SKILL.md",
      "contentHtml": "<h1>Form Testing Skill</h1>\n<p>Use this skill for robust form automation across dynamic, multi-step, challenge-protected, and accessibility-critical flows.</p>\n<h2>Pack Contents</h2>\n<ul>\n<li><code>artifacts/form-workflows.md</code></li>\n<li><code>assets/templates/validation-matrix.json</code></li>\n<li><code>assets/templates/challenge-decision-tree.json</code></li>\n<li><code>assets/templates/a11y-assertions.md</code></li>\n<li><code>assets/templates/multi-step-state.json</code></li>\n<li><code>scripts/run-form-workflow.sh</code></li>\n<li><code>scripts/validate-skill-assets.sh</code></li>\n<li>Shared robustness matrix: <code>../opendevbrowser-best-practices/artifacts/browser-agent-known-issues-matrix.md</code></li>\n</ul>\n<h2>Fast Start</h2>\n<pre><code>\n./skills/opendevbrowser-form-testing/scripts/validate-skill-assets.sh\n\n./skills/opendevbrowser-form-testing/scripts/run-form-workflow.sh validation\n\n./skills/opendevbrowser-form-testing/scripts/run-form-workflow.sh multi-step\n\n./skills/opendevbrowser-form-testing/scripts/run-form-workflow.sh challenge-checkpoint\n\n</code></pre>\n<h2>Core Rules</h2>\n<ul>\n<li>Snapshot first, then act.</li>\n<li>Keep one field mutation per decision loop in failure analysis.</li>\n<li>Re-snapshot after each invalid submit to avoid stale refs.</li>\n<li>Verify both UX and network behavior for each submission branch.</li>\n<li>Keep challenge retries bounded and honor <code>Retry-After</code> when 429 pressure appears.</li>\n</ul>\n<h2>Parallel Multitab Alignment</h2>\n<ul>\n<li>Apply shared concurrency policy from <code>../opendevbrowser-best-practices/SKILL.md</code> (&quot;Parallel Operations&quot;).</li>\n<li>Validate form workflows in <code>managed</code>, <code>extension</code>, and <code>cdpConnect</code> paths before parity sign-off.</li>\n<li>Keep one session per worker and avoid alternating <code>target-use</code> inside one command stream.</li>\n</ul>\n<h2>Robustness Coverage (Known-Issue Matrix)</h2>\n<p>Matrix source: <code>../opendevbrowser-best-practices/artifacts/browser-agent-known-issues-matrix.md</code></p>\n<ul>\n<li><code>ISSUE-01</code>: stale refs after dynamic validation rerenders</li>\n<li><code>ISSUE-02</code>: iframe challenge or embedded payment/auth forms</li>\n<li><code>ISSUE-05</code>: anti-bot checkpoint loops on submit</li>\n<li><code>ISSUE-06</code>: rate-limit/backoff behavior</li>\n<li><code>ISSUE-08</code>: restricted origin or unsupported test surface</li>\n</ul>\n<h2>Form Coverage Matrix</h2>\n<p>Cover at least:</p>\n<ul>\n<li>required/optional fields</li>\n<li>format/pattern constraints</li>\n<li>numeric and length boundaries</li>\n<li>dependent and conditional sections</li>\n<li>disabled/enabled transitions</li>\n<li>server-side rejection paths</li>\n</ul>\n<p>Use the matrix template in <code>assets/templates/validation-matrix.json</code>.</p>\n<div class=\"docs-table-wrap\"><table>\n<thead><tr>\n<th>Validation area</th>\n<th>Minimal assertion</th>\n<th>Evidence capture</th>\n</tr></thead>\n<tbody>\n<tr>\n<td>Required vs optional</td>\n<td>Empty required field blocks submit; optional field allows submit</td>\n<td><code>snapshot</code>, inline error text, submit request status</td>\n</tr>\n<tr>\n<td>Format and pattern</td>\n<td>Invalid format shows field error and keeps form invalid</td>\n<td><code>dom_get_text</code>, <code>get_attr aria-invalid</code>, request payload</td>\n</tr>\n<tr>\n<td>Numeric and length bounds</td>\n<td>Min/max boundaries are enforced consistently client+server</td>\n<td>field value checks, server response body</td>\n</tr>\n<tr>\n<td>Conditional sections</td>\n<td>Dependent fields appear/disappear with correct state reset</td>\n<td>before/after snapshots, visibility checks</td>\n</tr>\n<tr>\n<td>Disabled/enabled transitions</td>\n<td>Submit only enables when constraints are satisfied</td>\n<td><code>is_enabled</code>, transition snapshots</td>\n</tr>\n<tr>\n<td>Server-side rejection</td>\n<td>Backend validation errors map to correct field/global errors</td>\n<td><code>network_poll</code>, rendered error copy</td>\n</tr>\n</tbody>\n</table></div>\n<h2>Canonical Validation Flow</h2>\n<pre><code>\nopendevbrowser_snapshot sessionId=&quot;&lt;session-id&gt;&quot; format=&quot;actionables&quot;\n\nopendevbrowser_type sessionId=&quot;&lt;session-id&gt;&quot; ref=&quot;&lt;field-ref&gt;&quot; text=&quot;&quot;\n\nopendevbrowser_click sessionId=&quot;&lt;session-id&gt;&quot; ref=&quot;&lt;submit-ref&gt;&quot;\n\nopendevbrowser_snapshot sessionId=&quot;&lt;session-id&gt;&quot; format=&quot;outline&quot;\n\nopendevbrowser_dom_get_text sessionId=&quot;&lt;session-id&gt;&quot; ref=&quot;&lt;error-ref&gt;&quot;\n\n</code></pre>\n<h2>Accessibility Assertions</h2>\n<p>Validate error handling semantics:</p>\n<ul>\n<li>error text bound to invalid field</li>\n<li><code>aria-invalid=&quot;true&quot;</code> when invalid</li>\n<li>keyboard focus on first invalid field when applicable</li>\n<li>labels/instructions remain programmatically associated</li>\n</ul>\n<pre><code>\nopendevbrowser_get_attr sessionId=&quot;&lt;session-id&gt;&quot; ref=&quot;&lt;field-ref&gt;&quot; name=&quot;aria-invalid&quot;\n\nopendevbrowser_get_attr sessionId=&quot;&lt;session-id&gt;&quot; ref=&quot;&lt;field-ref&gt;&quot; name=&quot;aria-describedby&quot;\n\n</code></pre>\n<h2>Anti-Bot and Challenge Branches</h2>\n<p>For forms guarded by challenge providers:</p>\n<ol>\n<li>Detect challenge widget/frame state.</li>\n<li>Mark manual checkpoint in run log.</li>\n<li>Complete challenge manually or by approved test key in non-production.</li>\n<li>Resume from fresh snapshot and continue validation.</li>\n</ol>\n<p>Do not implement challenge bypass behavior.</p>\n<p>Loop guardrail:</p>\n<ul>\n<li>Stop after 2 repeated challenge checkpoints without forward progress.</li>\n<li>Capture network evidence and escalate as blocker.</li>\n</ul>\n<h2>Multi-Step and Conditional Forms</h2>\n<p>For wizard flows:</p>\n<ol>\n<li>validate current step</li>\n<li>submit and wait for next-step container ref</li>\n<li>assert state carryover from prior step</li>\n<li>finalize and validate confirmation payload</li>\n</ol>\n<p>Use <code>assets/templates/multi-step-state.json</code> to track progression.</p>\n<h2>Network Correlation</h2>\n<p>Always poll and inspect submit requests:</p>\n<pre><code>\nopendevbrowser_network_poll sessionId=&quot;&lt;session-id&gt;&quot; max=50\n\n</code></pre>\n<p>Flag mismatch cases:</p>\n<ul>\n<li>UI shows success but network fails</li>\n<li>UI hides server validation errors</li>\n<li>repeated 429/403 challenge pressure on submit endpoint</li>\n</ul>\n<h2>References</h2>\n<ul>\n<li>Playwright best practices: https://playwright.dev/docs/best-practices</li>\n<li>WCAG 2.2 (Input assistance + accessible authentication): https://www.w3.org/TR/WCAG22/</li>\n<li>Cloudflare Turnstile testing: https://developers.cloudflare.com/turnstile/tutorials/testing/</li>\n<li>reCAPTCHA v2 test keys: https://developers.google.com/recaptcha/docs/faq</li>\n<li>hCaptcha test keys: https://docs.hcaptcha.com/</li>\n</ul>",
      "codeSample": "# Skill source\ncat skills/opendevbrowser-form-testing/SKILL.md"
    },
    "skills/opendevbrowser-login-automation": {
      "category": "skills",
      "slug": "opendevbrowser-login-automation",
      "title": "opendevbrowser-login-automation",
      "summary": "Use this skill for deterministic auth testing that handles MFA and anti-bot checkpoints without unsafe bypass patterns.",
      "sourcePath": "skills/opendevbrowser-login-automation/SKILL.md",
      "editUrl": "https://github.com/freshtechbro/opendevbrowser/edit/main/skills/opendevbrowser-login-automation/SKILL.md",
      "contentHtml": "<h1>Login Automation Skill</h1>\n<p>Use this skill for deterministic auth testing that handles MFA and anti-bot checkpoints without unsafe bypass patterns.</p>\n<h2>Pack Contents</h2>\n<ul>\n<li><code>artifacts/login-workflows.md</code></li>\n<li><code>assets/templates/login-scenario-matrix.json</code></li>\n<li><code>assets/templates/challenge-checkpoint.md</code></li>\n<li><code>assets/templates/auth-signals.json</code></li>\n<li><code>scripts/run-login-workflow.sh</code></li>\n<li><code>scripts/record-auth-signals.sh</code></li>\n<li><code>scripts/validate-skill-assets.sh</code></li>\n<li>Shared robustness matrix: <code>../opendevbrowser-best-practices/artifacts/browser-agent-known-issues-matrix.md</code></li>\n</ul>\n<h2>Fast Start</h2>\n<ol>\n<li>Validate pack integrity.</li>\n</ol>\n<pre><code>\n./skills/opendevbrowser-login-automation/scripts/validate-skill-assets.sh\n\n</code></pre>\n<ol>\n<li>Print a ready workflow.</li>\n</ol>\n<pre><code>\n./skills/opendevbrowser-login-automation/scripts/run-login-workflow.sh password\n\n./skills/opendevbrowser-login-automation/scripts/run-login-workflow.sh mfa\n\n./skills/opendevbrowser-login-automation/scripts/run-login-workflow.sh challenge-checkpoint\n\n</code></pre>\n<h2>Core Rules</h2>\n<ul>\n<li>Use snapshot refs, not ad-hoc selectors.</li>\n<li>Run one decision loop at a time: snapshot -&gt; action -&gt; snapshot.</li>\n<li>Never store credentials in skill files, logs, screenshots, or committed fixtures.</li>\n<li>Treat anti-bot challenges as checkpoints (manual solve or approved test keys), not bypass targets.</li>\n<li>Keep a bounded retry budget (max 2 automated retries) and honor <code>Retry-After</code> when present.</li>\n</ul>\n<h2>Parallel Multitab Alignment</h2>\n<ul>\n<li>Apply shared concurrency policy from <code>../opendevbrowser-best-practices/SKILL.md</code> (&quot;Parallel Operations&quot;).</li>\n<li>Validate login paths across <code>managed</code>, <code>extension</code>, and <code>cdpConnect</code> before parity sign-off.</li>\n<li>Treat extension headless attempts as expected <code>unsupported_mode</code>; do not force unsupported auth runs.</li>\n</ul>\n<h2>Robustness Coverage (Known-Issue Matrix)</h2>\n<p>Matrix source: <code>../opendevbrowser-best-practices/artifacts/browser-agent-known-issues-matrix.md</code></p>\n<ul>\n<li><code>ISSUE-01</code>: stale refs / DOM churn</li>\n<li><code>ISSUE-02</code>: challenge or SSO iframe boundaries</li>\n<li><code>ISSUE-03</code>: popup/new-tab SSO redirects</li>\n<li><code>ISSUE-04</code>: MFA/session step-up branching</li>\n<li><code>ISSUE-05</code>: anti-bot challenge loops</li>\n<li><code>ISSUE-06</code>: 429/backoff discipline</li>\n<li><code>ISSUE-07</code>: extension readiness on resume</li>\n</ul>\n<h2>Challenge-Aware Flow</h2>\n<ol>\n<li>Preflight: goto login page, wait, snapshot actionables.</li>\n<li>Enter identifier and password.</li>\n<li>Submit once.</li>\n<li>Branch by observed state:</li>\n</ol>\n<ul>\n<li>authenticated shell appears -&gt; success validation</li>\n<li>MFA prompt appears -&gt; continue MFA branch</li>\n<li>popup/new-tab SSO appears -&gt; switch target and continue auth branch</li>\n<li>anti-bot challenge appears -&gt; checkpoint branch</li>\n<li>invalid credentials or lockout message -&gt; failure branch</li>\n</ul>\n<pre><code>\nopendevbrowser_goto sessionId=&quot;&lt;session-id&gt;&quot; url=&quot;https://example.com/login&quot;\n\nopendevbrowser_wait sessionId=&quot;&lt;session-id&gt;&quot; until=&quot;networkidle&quot;\n\nopendevbrowser_snapshot sessionId=&quot;&lt;session-id&gt;&quot; format=&quot;actionables&quot;\n\nopendevbrowser_type sessionId=&quot;&lt;session-id&gt;&quot; ref=&quot;&lt;identifier-ref&gt;&quot; text=&quot;&lt;resolved-identifier&gt;&quot;\n\nopendevbrowser_type sessionId=&quot;&lt;session-id&gt;&quot; ref=&quot;&lt;password-ref&gt;&quot; text=&quot;&lt;resolved-password&gt;&quot;\n\nopendevbrowser_click sessionId=&quot;&lt;session-id&gt;&quot; ref=&quot;&lt;submit-ref&gt;&quot;\n\nopendevbrowser_wait sessionId=&quot;&lt;session-id&gt;&quot; until=&quot;networkidle&quot;\n\nopendevbrowser_snapshot sessionId=&quot;&lt;session-id&gt;&quot; format=&quot;outline&quot;\n\n</code></pre>\n<h2>Anti-Bot Checkpoint Pattern</h2>\n<p>Use this when CAPTCHA/turnstile/challenge pages appear.</p>\n<ol>\n<li>Detect challenge UI from snapshot refs or page text.</li>\n<li>Pause automation and mark checkpoint in run log.</li>\n<li>Complete challenge manually (or with provider-approved test key in non-production).</li>\n<li>Resume from a fresh snapshot and continue auth validation.</li>\n</ol>\n<p>Signals to monitor:</p>\n<ul>\n<li>challenge iframe/widget visible</li>\n<li>error copy like &quot;verify you are human&quot;</li>\n<li>repeated 403/429 responses on auth endpoints</li>\n<li>repeated challenge pages after resume (loop condition)</li>\n</ul>\n<p>Challenge loop guardrail:</p>\n<ul>\n<li>After 2 challenge checkpoints without success, stop automation and escalate.</li>\n<li>If <code>Retry-After</code> is available, wait at least that duration before any retry.</li>\n</ul>\n<h2>MFA Pattern</h2>\n<ol>\n<li>Submit primary credentials.</li>\n<li>Wait for OTP/passkey/TOTP ref visibility.</li>\n<li>Enter second factor.</li>\n<li>Submit and validate authenticated state.</li>\n</ol>\n<pre><code>\nopendevbrowser_wait sessionId=&quot;&lt;session-id&gt;&quot; ref=&quot;&lt;mfa-input-ref&gt;&quot; state=&quot;visible&quot;\n\nopendevbrowser_type sessionId=&quot;&lt;session-id&gt;&quot; ref=&quot;&lt;mfa-input-ref&gt;&quot; text=&quot;&lt;resolved-otp&gt;&quot;\n\nopendevbrowser_click sessionId=&quot;&lt;session-id&gt;&quot; ref=&quot;&lt;mfa-submit-ref&gt;&quot;\n\nopendevbrowser_wait sessionId=&quot;&lt;session-id&gt;&quot; until=&quot;networkidle&quot;\n\n</code></pre>\n<h2>Validation Signals</h2>\n<p>Validate at least two independent signals:</p>\n<ul>\n<li>URL/route transition to authenticated area.</li>\n<li>Auth-only element visible (<code>opendevbrowser_is_visible</code>).</li>\n<li>Auth request success from <code>opendevbrowser_network_poll</code>.</li>\n</ul>\n<pre><code>\nopendevbrowser_network_poll sessionId=&quot;&lt;session-id&gt;&quot; max=50\n\n</code></pre>\n<h2>Session Persistence and Reauth</h2>\n<p>Use persistent profiles for remember-me checks:</p>\n<pre><code>\nopendevbrowser_launch profile=&quot;auth-test&quot; persistProfile=true noExtension=true\n\n</code></pre>\n<p>Close and relaunch, then confirm one of:</p>\n<ul>\n<li>still authenticated without credential prompt</li>\n<li>intentionally forced reauth policy was applied</li>\n</ul>\n<h2>Failure Modes</h2>\n<ul>\n<li>Invalid credentials: assert explicit field/banner errors.</li>\n<li>Rate limit/lockout: stop retries, apply cooldown, rotate test account.</li>\n<li>Challenge loop: escalate as anti-bot pressure issue.</li>\n<li>MFA unavailable for test account: mark incomplete test prerequisite.</li>\n</ul>\n<h2>References</h2>\n<p>Use these sources when tuning login automation behavior:</p>\n<ul>\n<li>Playwright auth guide: https://playwright.dev/docs/auth</li>\n<li>OWASP Authentication Cheat Sheet: https://cheatsheetseries.owasp.org/cheatsheets/Authentication_Cheat_Sheet.html</li>\n<li>NIST SP 800-63B (Digital Identity): https://pages.nist.gov/800-63-4/sp800-63b.html</li>\n<li>Cloudflare Turnstile testing keys: https://developers.cloudflare.com/turnstile/tutorials/testing/</li>\n<li>reCAPTCHA v2 testing keys: https://developers.google.com/recaptcha/docs/faq</li>\n<li>hCaptcha test keys: https://docs.hcaptcha.com/</li>\n</ul>",
      "codeSample": "# Skill source\ncat skills/opendevbrowser-login-automation/SKILL.md"
    },
    "skills/opendevbrowser-product-presentation-asset": {
      "category": "skills",
      "slug": "opendevbrowser-product-presentation-asset",
      "title": "opendevbrowser-product-presentation-asset",
      "summary": "Use this skill to build complete product-video input packs and assembly instructions for UGC-style content production.",
      "sourcePath": "skills/opendevbrowser-product-presentation-asset/SKILL.md",
      "editUrl": "https://github.com/freshtechbro/opendevbrowser/edit/main/skills/opendevbrowser-product-presentation-asset/SKILL.md",
      "contentHtml": "<h1>Product Presentation Asset Skill</h1>\n<p>Use this skill to build complete product-video input packs and assembly instructions for UGC-style content production.</p>\n<h2>Pack Contents</h2>\n<ul>\n<li><code>artifacts/asset-pack-assembly.md</code></li>\n<li><code>artifacts/ugc-creative-guide.md</code></li>\n<li><code>assets/templates/manifest.schema.json</code></li>\n<li><code>assets/templates/copy.md</code></li>\n<li><code>assets/templates/features.md</code></li>\n<li><code>assets/templates/video-assembly.md</code></li>\n<li><code>assets/templates/user-actions.md</code></li>\n<li><code>assets/templates/ugc-concepts.md</code></li>\n<li><code>assets/templates/shot-list.md</code></li>\n<li><code>assets/templates/claims-evidence-map.md</code></li>\n<li><code>scripts/collect-product.sh</code></li>\n<li><code>scripts/capture-screenshots.sh</code></li>\n<li><code>scripts/download-images.sh</code></li>\n<li><code>scripts/write-manifest.sh</code></li>\n<li><code>scripts/render-video-brief.sh</code></li>\n<li><code>scripts/validate-skill-assets.sh</code></li>\n<li>Shared robustness matrix: <code>../opendevbrowser-best-practices/artifacts/browser-agent-known-issues-matrix.md</code></li>\n</ul>\n<h2>Fast Start</h2>\n<pre><code>\n./skills/opendevbrowser-product-presentation-asset/scripts/validate-skill-assets.sh\n\n./skills/opendevbrowser-product-presentation-asset/scripts/collect-product.sh &quot;https://example.com/product/123&quot;\n\n./skills/opendevbrowser-product-presentation-asset/scripts/render-video-brief.sh /path/to/manifest.json /tmp/product-video-brief\n\n</code></pre>\n<h2>Final Assets Produced</h2>\n<p>Expected output pack includes:</p>\n<ul>\n<li><code>manifest.json</code> with canonical product metadata</li>\n<li><code>product.json</code> and <code>pricing.json</code></li>\n<li><code>images/</code> for product stills</li>\n<li><code>screenshots/</code> for page context and UI proof</li>\n<li><code>copy.md</code> and <code>features.md</code></li>\n<li><code>raw/source-record.json</code> for auditability</li>\n</ul>\n<p>The <code>render-video-brief.sh</code> helper adds:</p>\n<ul>\n<li><code>video-brief.md</code></li>\n<li><code>shot-list.md</code></li>\n<li><code>ugc-brief.md</code></li>\n<li><code>claims-evidence-map.md</code></li>\n</ul>\n<h2>What the User Should Do</h2>\n<ol>\n<li>Pick product URL or product name.</li>\n<li>Run collection workflow and confirm output pack path.</li>\n<li>Review generated manifest/copy/features for accuracy.</li>\n<li>Run <code>render-video-brief.sh</code> to generate production instructions.</li>\n<li>Hand the brief and assets to editor/creator pipeline.</li>\n</ol>\n<h2>Parallel Multitab Alignment</h2>\n<ul>\n<li>Apply shared concurrency policy from <code>../opendevbrowser-best-practices/SKILL.md</code> (&quot;Parallel Operations&quot;).</li>\n<li>Validate asset capture flows across <code>managed</code>, <code>extension</code>, and <code>cdpConnect</code> when browser capture is involved.</li>\n<li>Keep one session per worker for concurrent product-page captures; avoid target-switch thrash in one session.</li>\n</ul>\n<h2>How to Combine the Assets</h2>\n<ol>\n<li>Use <code>manifest.json</code> as source of truth.</li>\n<li>Build hooks and claims from <code>copy.md</code> + <code>features.md</code>.</li>\n<li>Pair each claim with supporting asset (<code>images</code> or <code>screenshots</code>).</li>\n<li>Sequence assets using <code>shot-list.md</code>.</li>\n<li>Validate pricing/availability freshness before publishing.</li>\n<li>Validate every claim appears in <code>claims-evidence-map.md</code> before publish.</li>\n</ol>\n<h2>Robustness Coverage (Known-Issue Matrix)</h2>\n<p>Matrix source: <code>../opendevbrowser-best-practices/artifacts/browser-agent-known-issues-matrix.md</code></p>\n<ul>\n<li><code>ISSUE-10</code>: normalized price/currency fields for claims</li>\n<li><code>ISSUE-11</code>: anchor discount context for pricing claims</li>\n<li><code>ISSUE-12</code>: stale price and unsupported-claim prevention via evidence mapping</li>\n</ul>\n<h2>UGC Key Concepts</h2>\n<ul>\n<li>Hook in first 2 seconds with user problem + payoff.</li>\n<li>Show real product usage context before polished close-ups.</li>\n<li>Keep claims concrete and verifiable from captured assets.</li>\n<li>Use one CTA and one primary value proposition per short clip.</li>\n<li>Preserve authenticity: avoid over-produced voice/style mismatches.</li>\n</ul>\n<h2>References</h2>\n<ul>\n<li>FTC pricing guidance (deceptive pricing): https://www.ecfr.gov/current/title-16/chapter-I/subchapter-B/part-233</li>\n<li>Schema.org Offer metadata: https://schema.org/Offer</li>\n<li>NIST unit pricing/value comparison guide: https://www.nist.gov/publications/unit-pricing-guide</li>\n</ul>",
      "codeSample": "# Skill source\ncat skills/opendevbrowser-product-presentation-asset/SKILL.md"
    },
    "skills/opendevbrowser-research": {
      "category": "skills",
      "slug": "opendevbrowser-research",
      "title": "opendevbrowser-research",
      "summary": "Use this skill when you need benchmark-style research across web|community|social|shopping with strict timebox semantics and stable output modes.",
      "sourcePath": "skills/opendevbrowser-research/SKILL.md",
      "editUrl": "https://github.com/freshtechbro/opendevbrowser/edit/main/skills/opendevbrowser-research/SKILL.md",
      "contentHtml": "<h1>Research Skill</h1>\n<p>Use this skill when you need benchmark-style research across <code>web|community|social|shopping</code> with strict timebox semantics and stable output modes.</p>\n<h2>Pack Contents</h2>\n<ul>\n<li><code>artifacts/research-workflows.md</code></li>\n<li><code>assets/templates/compact.md</code></li>\n<li><code>assets/templates/context.json</code></li>\n<li><code>assets/templates/report.md</code></li>\n<li><code>scripts/run-research.sh</code></li>\n<li><code>scripts/render-output.sh</code></li>\n<li><code>scripts/write-artifacts.sh</code></li>\n<li><code>scripts/validate-skill-assets.sh</code></li>\n<li>Shared robustness matrix: <code>../opendevbrowser-best-practices/artifacts/browser-agent-known-issues-matrix.md</code></li>\n</ul>\n<h2>Fast Start</h2>\n<pre><code>\n./skills/opendevbrowser-research/scripts/validate-skill-assets.sh\n\n./skills/opendevbrowser-research/scripts/run-research.sh &quot;browser automation&quot; 30 context\n\n./skills/opendevbrowser-research/scripts/render-output.sh &quot;browser automation&quot; compact\n\n</code></pre>\n<h2>Core Rules</h2>\n<ul>\n<li>Define timebox first (<code>--days</code> or <code>--from/--to</code>).</li>\n<li>Prefer explicit sources for high-stakes claims.</li>\n<li>Persist artifacts and return reproducible paths.</li>\n<li>Mark unsupported claims as tentative; do not overstate certainty.</li>\n<li>Honor bounded retries and backoff windows under 429 pressure.</li>\n</ul>\n<h2>Parallel Multitab Alignment</h2>\n<ul>\n<li>Apply shared concurrency policy from <code>../opendevbrowser-best-practices/SKILL.md</code> (&quot;Parallel Operations&quot;).</li>\n<li>Run research acceptance in <code>managed</code>, <code>extension</code>, and <code>cdpConnect</code> where browser-backed evidence capture is used.</li>\n<li>Keep provider query orchestration mode-agnostic; isolate browser interaction per session worker.</li>\n</ul>\n<h2>Robustness Coverage (Known-Issue Matrix)</h2>\n<p>Matrix source: <code>../opendevbrowser-best-practices/artifacts/browser-agent-known-issues-matrix.md</code></p>\n<ul>\n<li><code>ISSUE-06</code>: upstream throttling and retry discipline</li>\n<li><code>ISSUE-09</code>: pagination/result drift across sources</li>\n<li><code>ISSUE-10</code>: locale/currency normalization consistency</li>\n<li><code>ISSUE-12</code>: stale evidence and claim traceability</li>\n</ul>\n<h2>Workflow</h2>\n<ol>\n<li>Resolve timebox (<code>days</code> or <code>from/to</code>).</li>\n<li>Choose sources (<code>auto|web|community|social|shopping|all</code>).</li>\n<li>Run <code>opendevbrowser research run</code>.</li>\n<li>Return requested mode output and artifact path.</li>\n</ol>\n<h2>Commands</h2>\n<pre><code>\nopendevbrowser research run --topic &quot;&lt;topic&gt;&quot; --days 30 --mode context\n\nopendevbrowser research run --topic &quot;&lt;topic&gt;&quot; --source-selection all --mode json\n\nopendevbrowser research run --topic &quot;&lt;topic&gt;&quot; --sources web,shopping --mode md\n\n</code></pre>\n<h2>Notes</h2>\n<ul>\n<li><code>auto</code> resolves to <code>web|community|social</code> in v1.</li>\n<li>Use <code>--source-selection all</code> or <code>--sources shopping,...</code> to include shopping.</li>\n<li>Use <code>--mode path</code> with <code>scripts/write-artifacts.sh</code> when you need replayable handoff bundles.</li>\n</ul>",
      "codeSample": "# Skill source\ncat skills/opendevbrowser-research/SKILL.md"
    },
    "skills/opendevbrowser-shopping": {
      "category": "skills",
      "slug": "opendevbrowser-shopping",
      "title": "opendevbrowser-shopping",
      "summary": "Use this skill for robust deal hunting across providers with market-baseline validation and savings analysis.",
      "sourcePath": "skills/opendevbrowser-shopping/SKILL.md",
      "editUrl": "https://github.com/freshtechbro/opendevbrowser/edit/main/skills/opendevbrowser-shopping/SKILL.md",
      "contentHtml": "<h1>Shopping Skill</h1>\n<p>Use this skill for robust deal hunting across providers with market-baseline validation and savings analysis.</p>\n<h2>Pack Contents</h2>\n<ul>\n<li><code>artifacts/deal-hunting-workflows.md</code></li>\n<li><code>assets/templates/deals-context.json</code></li>\n<li><code>assets/templates/deals-table.md</code></li>\n<li><code>assets/templates/market-analysis.json</code></li>\n<li><code>assets/templates/deal-thresholds.json</code></li>\n<li><code>scripts/run-shopping.sh</code></li>\n<li><code>scripts/normalize-offers.sh</code></li>\n<li><code>scripts/render-deals.sh</code></li>\n<li><code>scripts/analyze-market.sh</code></li>\n<li><code>scripts/run-deal-hunt.sh</code></li>\n<li><code>scripts/validate-skill-assets.sh</code></li>\n<li>Shared robustness matrix: <code>../opendevbrowser-best-practices/artifacts/browser-agent-known-issues-matrix.md</code></li>\n</ul>\n<h2>Fast Start</h2>\n<pre><code>\n./skills/opendevbrowser-shopping/scripts/validate-skill-assets.sh\n\n./skills/opendevbrowser-shopping/scripts/run-shopping.sh &quot;wireless earbuds&quot; context best_deal\n\n./skills/opendevbrowser-shopping/scripts/run-deal-hunt.sh &quot;wireless earbuds&quot; &quot;shopping/amazon,shopping/walmart&quot;\n\n</code></pre>\n<h2>Deal-Hunting Model</h2>\n<p>Use a two-layer check for each offer:</p>\n<ol>\n<li>Provider discount check</li>\n</ol>\n<ul>\n<li>Compare listed total to provider anchor price (MSRP/list/original) when available.</li>\n<li>Capture absolute savings and percentage savings.</li>\n</ul>\n<ol>\n<li>Market baseline check</li>\n</ol>\n<ul>\n<li>Compare listed total against cross-provider market average and median.</li>\n<li>Flag offers that are truly cheaper than market, not just marked &quot;on sale&quot;.</li>\n</ul>\n<h2>Parallel Multitab Alignment</h2>\n<ul>\n<li>Apply shared concurrency policy from <code>../opendevbrowser-best-practices/SKILL.md</code> (&quot;Parallel Operations&quot;).</li>\n<li>Validate shopping workflows across <code>managed</code>, <code>extension</code>, and <code>cdpConnect</code> when browser-backed provider paths are exercised.</li>\n<li>Keep one session per worker for parallel offer collection and avoid session-level target contention.</li>\n</ul>\n<h2>Savings Math</h2>\n<p>Per offer:</p>\n<ul>\n<li><code>total_price = item_price + shipping</code></li>\n<li><code>anchor_savings_abs = max(anchor_price - total_price, 0)</code></li>\n<li><code>anchor_savings_pct = anchor_savings_abs / anchor_price * 100</code></li>\n</ul>\n<p>Per market group (same currency):</p>\n<ul>\n<li><code>market_avg = average(total_price)</code></li>\n<li><code>market_median = median(total_price)</code></li>\n<li><code>market_savings_abs = market_avg - offer_total</code></li>\n<li><code>market_savings_pct = market_savings_abs / market_avg * 100</code></li>\n</ul>\n<p>This captures both:</p>\n<ul>\n<li>high-percentage discounts (for example 50% off)</li>\n<li>high-absolute savings (for example $500 saved)</li>\n</ul>\n<h2>Robustness Coverage (Known-Issue Matrix)</h2>\n<p>Matrix source: <code>../opendevbrowser-best-practices/artifacts/browser-agent-known-issues-matrix.md</code></p>\n<ul>\n<li><code>ISSUE-06</code>: rate-limit/backoff handling while collecting offers</li>\n<li><code>ISSUE-09</code>: dedupe and pagination drift controls in offer collection</li>\n<li><code>ISSUE-10</code>: currency normalization and same-currency grouping</li>\n<li><code>ISSUE-11</code>: weak/missing anchor price detection</li>\n<li><code>ISSUE-12</code>: stale price and unsupported claim controls</li>\n</ul>\n<h2>Canonical Workflow</h2>\n<ol>\n<li>Run shopping search across selected providers.</li>\n<li>Normalize offers into stable records.</li>\n<li>Compute market analysis with <code>analyze-market.sh</code>.</li>\n<li>Render markdown/json summary for user decision.</li>\n</ol>\n<pre><code>\nopendevbrowser shopping run --query &quot;&lt;query&gt;&quot; --providers shopping/amazon,shopping/walmart --mode json --output-format json\n\n</code></pre>\n<h2>Classification Heuristics</h2>\n<p>Default tags from analysis script:</p>\n<ul>\n<li><code>high_percent</code> when anchor discount percent exceeds threshold.</li>\n<li><code>high_absolute</code> when anchor discount absolute exceeds threshold.</li>\n<li><code>high_value</code> when both are true.</li>\n<li><code>market_beating</code> when offer is materially below market average.</li>\n</ul>\n<p>Threshold defaults are in <code>assets/templates/deal-thresholds.json</code>.</p>\n<p>Confidence model:</p>\n<ul>\n<li>score combines sample size, anchor coverage, and freshness coverage.</li>\n<li>warnings call out low-sample, missing-anchor, and stale/missing timestamp risk.</li>\n</ul>\n<h2>Good Deal Decision Rules</h2>\n<p>Mark as strong only when at least one is true:</p>\n<ul>\n<li>anchor discount is material and market gap is positive</li>\n<li>market price is materially below average/median even without anchor</li>\n</ul>\n<p>Avoid false positives:</p>\n<ul>\n<li>anchor discount exists but market total is not competitive</li>\n<li>low total due to unavailable stock or hidden constraints</li>\n</ul>\n<h2>References</h2>\n<ul>\n<li>FTC Guides Against Deceptive Pricing (16 CFR 233): https://www.ecfr.gov/current/title-16/chapter-I/subchapter-B/part-233</li>\n<li>NIST SP 1181 (unit pricing and value comparison): https://www.nist.gov/publications/unit-pricing-guide</li>\n<li>Schema.org Offer (price metadata): https://schema.org/Offer</li>\n</ul>",
      "codeSample": "# Skill source\ncat skills/opendevbrowser-shopping/SKILL.md"
    },
    "guides/qa-loop": {
      "category": "guides",
      "slug": "qa-loop",
      "title": "QA Loop",
      "summary": "Run repeatable browser checks with trace-backed pass/fail evidence.",
      "sourcePath": "docs/LANDING_PAGE_CONCEPT1_SPEC.md",
      "editUrl": "https://github.com/freshtechbro/opendevbrowser/edit/main/docs/LANDING_PAGE_CONCEPT1_SPEC.md",
      "contentHtml": "<h2>What this guide covers</h2>\n<p>Run repeatable browser checks with trace-backed pass/fail evidence.</p>\n<h2>Mode selection</h2>\n<p>Use managed mode for deterministic baselines, then replay in extension mode when login state affects behavior.</p>\n<h2>Recommended run sequence</h2>\n<ul>\n<li>Launch or connect a session and open the target page.</li>\n<li>Capture a baseline snapshot, then execute the interaction sequence by refs.</li>\n<li>Collect diagnostics with status, console, network, and trace snapshots.</li>\n<li>Capture screenshots for before/after comparison and close the session.</li>\n</ul>\n<h2>Verification checkpoints</h2>\n<ul>\n<li>Every critical step reports success/failure with explicit diagnostics.</li>\n<li>Console and network logs confirm no hidden runtime regressions.</li>\n<li>Artifacts include enough evidence for independent replay.</li>\n</ul>\n<h2>Related surfaces</h2>\n<ul>\n<li><code>launch</code>, <code>connect</code>, <code>snapshot</code>, <code>click</code>, <code>type</code>, <code>press</code></li>\n<li><code>status</code>, <code>console-poll</code>, <code>network-poll</code>, <code>debug-trace-snapshot</code>, <code>perf</code></li>\n<li><code>screenshot</code>, <code>disconnect</code></li>\n</ul>",
      "codeSample": "npx opendevbrowser launch --no-extension"
    },
    "guides/data-extraction": {
      "category": "guides",
      "slug": "data-extraction",
      "title": "Data Extraction",
      "summary": "Extract structured page intelligence from DOM and workflow outputs.",
      "sourcePath": "docs/LANDING_PAGE_CONCEPT1_SPEC.md",
      "editUrl": "https://github.com/freshtechbro/opendevbrowser/edit/main/docs/LANDING_PAGE_CONCEPT1_SPEC.md",
      "contentHtml": "<h2>What this guide covers</h2>\n<p>Extract structured page intelligence from DOM and workflow outputs.</p>\n<h2>Mode selection</h2>\n<p>Use managed mode for open pages and extension mode when extraction requires an authenticated profile.</p>\n<h2>Recommended run sequence</h2>\n<ul>\n<li>Navigate to the source page and capture a snapshot for stable references.</li>\n<li>Extract key values with DOM inspection commands or a workflow wrapper.</li>\n<li>Normalize outputs into JSON/markdown artifacts for downstream systems.</li>\n<li>Persist artifacts with source references for auditability.</li>\n</ul>\n<h2>Verification checkpoints</h2>\n<ul>\n<li>Extracted fields are tied to deterministic refs or documented selectors.</li>\n<li>Outputs include URL/source provenance and execution metadata.</li>\n<li>Missing fields are explicit and not silently dropped.</li>\n</ul>\n<h2>Related surfaces</h2>\n<ul>\n<li><code>dom-html</code>, <code>dom-text</code>, <code>dom-attr</code>, <code>dom-value</code></li>\n<li><code>research run</code>, <code>shopping run</code>, <code>product-video run</code></li>\n<li><code>artifacts cleanup</code></li>\n</ul>",
      "codeSample": "npx opendevbrowser dom-text --help"
    },
    "guides/auth-automation": {
      "category": "guides",
      "slug": "auth-automation",
      "title": "Auth Automation",
      "summary": "Operate safely in logged-in sessions using extension relay controls and explicit cookie policy behavior.",
      "sourcePath": "docs/LANDING_PAGE_CONCEPT1_SPEC.md",
      "editUrl": "https://github.com/freshtechbro/opendevbrowser/edit/main/docs/LANDING_PAGE_CONCEPT1_SPEC.md",
      "contentHtml": "<h2>What this guide covers</h2>\n<p>Operate safely in logged-in sessions using extension relay controls and explicit cookie policy behavior.</p>\n<h2>Mode selection</h2>\n<p>Use extension mode for real profiles. Choose cookie policy <code>off|auto|required</code> per run based on auth requirements.</p>\n<h2>Recommended run sequence</h2>\n<ul>\n<li>Start in extension mode and verify relay + handshake readiness.</li>\n<li>Optionally import cookies or inspect active cookies before navigation.</li>\n<li>Run actions/workflows with <code>--cookie-policy</code> and <code>--use-cookies</code> settings that match the task.</li>\n<li>Handle <code>auth_required</code> failures deterministically and re-run after session correction.</li>\n</ul>\n<h2>Verification checkpoints</h2>\n<ul>\n<li>Auth-required workflows fail fast with <code>reasonCode=auth_required</code> when policy is <code>required</code>.</li>\n<li>Cookie diagnostics expose injected/rejected/verified session details.</li>\n<li>No-auth runs keep cookie injection disabled for deterministic behavior.</li>\n</ul>\n<h2>Related surfaces</h2>\n<ul>\n<li><code>status</code>, <code>cookie-import</code>, <code>cookie-list</code></li>\n<li><code>research run</code>, <code>shopping run</code>, <code>product-video run</code> with cookie overrides</li>\n<li>workflow metrics: <code>cookie_diagnostics</code> / <code>cookieDiagnostics</code></li>\n</ul>",
      "codeSample": "npx opendevbrowser shopping run --query \"wireless earbuds\" --cookie-policy auto"
    },
    "guides/visual-qa": {
      "category": "guides",
      "slug": "visual-qa",
      "title": "Visual QA",
      "summary": "Capture screenshots and annotations for fast UI review cycles.",
      "sourcePath": "docs/LANDING_PAGE_CONCEPT1_SPEC.md",
      "editUrl": "https://github.com/freshtechbro/opendevbrowser/edit/main/docs/LANDING_PAGE_CONCEPT1_SPEC.md",
      "contentHtml": "<h2>What this guide covers</h2>\n<p>Capture screenshots and annotations for fast UI review cycles.</p>\n<h2>Mode selection</h2>\n<p>Use managed mode for public UI checks and extension mode when page state depends on an authenticated account.</p>\n<h2>Recommended run sequence</h2>\n<ul>\n<li>Open the target route and capture baseline screenshots.</li>\n<li>Use annotation flow to attach comments to exact elements.</li>\n<li>Export screenshots and annotation payloads for implementation handoff.</li>\n<li>Re-run after fixes and compare artifacts.</li>\n</ul>\n<h2>Verification checkpoints</h2>\n<ul>\n<li>Annotations map to concrete elements and not free-form text only.</li>\n<li>Screenshot artifacts are timestamped and reproducible.</li>\n<li>Handoff includes both notes and visual evidence.</li>\n</ul>\n<h2>Related surfaces</h2>\n<ul>\n<li><code>screenshot</code>, <code>annotate</code></li>\n<li><code>snapshot</code>, <code>scroll</code>, <code>scroll-into-view</code></li>\n<li>annotation docs and extension setup guides</li>\n</ul>",
      "codeSample": "npx opendevbrowser annotate --help"
    },
    "guides/ui-component-extraction": {
      "category": "guides",
      "slug": "ui-component-extraction",
      "title": "UI Component Extraction",
      "summary": "Clone pages/components into reusable frontend artifacts quickly.",
      "sourcePath": "docs/LANDING_PAGE_CONCEPT1_SPEC.md",
      "editUrl": "https://github.com/freshtechbro/opendevbrowser/edit/main/docs/LANDING_PAGE_CONCEPT1_SPEC.md",
      "contentHtml": "<h2>What this guide covers</h2>\n<p>Clone pages/components into reusable frontend artifacts quickly.</p>\n<h2>Mode selection</h2>\n<p>Use managed mode for stable extraction. Use extension mode when component state is only available after login.</p>\n<h2>Recommended run sequence</h2>\n<ul>\n<li>Navigate to the component state you need and snapshot the page.</li>\n<li>Extract page or component artifacts with clone commands.</li>\n<li>Review generated output for structure, semantics, and style fidelity.</li>\n<li>Store artifacts with source route/context metadata.</li>\n</ul>\n<h2>Verification checkpoints</h2>\n<ul>\n<li>Component extraction is tied to an explicit state and route.</li>\n<li>Generated output captures expected structure and key properties.</li>\n<li>Artifacts include enough context for reuse without re-scraping.</li>\n</ul>\n<h2>Related surfaces</h2>\n<ul>\n<li><code>clone-page</code>, <code>clone-component</code></li>\n<li><code>snapshot</code>, <code>dom-html</code></li>\n<li>frontend route and asset references</li>\n</ul>",
      "codeSample": "npx opendevbrowser clone-component --help"
    },
    "guides/ops-monitoring": {
      "category": "guides",
      "slug": "ops-monitoring",
      "title": "Ops Monitoring",
      "summary": "Diagnose regressions early with status, console, network, and perf signals.",
      "sourcePath": "docs/LANDING_PAGE_CONCEPT1_SPEC.md",
      "editUrl": "https://github.com/freshtechbro/opendevbrowser/edit/main/docs/LANDING_PAGE_CONCEPT1_SPEC.md",
      "contentHtml": "<h2>What this guide covers</h2>\n<p>Diagnose regressions early with status, console, network, and perf signals.</p>\n<h2>Mode selection</h2>\n<p>Run in the same mode used by production workflows so diagnostics match real execution conditions.</p>\n<h2>Recommended run sequence</h2>\n<ul>\n<li>Start with daemon/session readiness checks.</li>\n<li>Run target commands or workflows and collect telemetry.</li>\n<li>Capture performance, console, and network deltas during the run.</li>\n<li>Promote failures into reproducible incident notes with command traces.</li>\n</ul>\n<h2>Verification checkpoints</h2>\n<ul>\n<li>Status outputs match expected mode and connectivity state.</li>\n<li>Perf and trace output contain measurable regression signals.</li>\n<li>Failure notes contain exact commands, timestamps, and evidence links.</li>\n</ul>\n<h2>Related surfaces</h2>\n<ul>\n<li><code>status</code>, <code>daemon status</code></li>\n<li><code>console-poll</code>, <code>network-poll</code>, <code>debug-trace-snapshot</code>, <code>perf</code></li>\n<li>troubleshooting and release-gate docs</li>\n</ul>",
      "codeSample": "npx opendevbrowser status --output-format json"
    }
  }
}
